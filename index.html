<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description"
        content="Le guide ultime pour voyager à Madagascar - Spots locaux authentiques, carte interactive offline, expressions malgaches">
    <meta name="theme-color" content="#C13535">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>MG Guide Voyage Madagascar - Le guide que seuls les Malgaches connaissent</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" href="images/logo/favicon.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="shortcut icon" href="icons/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="styles-map.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <style>
        /* ============================================
           VARIABLES CSS & RESET
           ============================================ */
        :root {
            /* Couleurs principales (identité malgache préservée) */
            --laterite: #b03030;
            /* Légèrement plus profond pour le premium */
            --foret: #2d4a2d;
            /* Plus profond/élégant */
            --sable: #D8B48F;
            --creme: #FAF9F6;
            /* Off-white plus pur */
            --noir: #1A1A1A;
            /* Noir moins dur */

            /* Statuts */
            --gratuit: #16A34A;
            --abordable: #F59E0B;
            --premium: #DC2626;

            /* UI Premium */
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
            --radius: 16px;
            /* Plus moderne */
            --radius-sm: 8px;

            /* Typographie Premium */
            --font-display: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            --font-mono: 'Roboto Mono', monospace;

            /* Mode clair (défaut) */
            --bg-primary: var(--creme);
            --bg-secondary: #FFFFFF;
            --text-primary: var(--noir);
            --text-secondary: #525252;
            /* Gris plus chaud */
            --border-color: #E5E5E5;
        }

        [data-theme="dark"] {
            --bg-primary: #121212;
            --bg-secondary: #1E1E1E;
            --text-primary: #EDE9E4;
            --text-secondary: #A3A3A3;
            --border-color: #262626;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* ============================================
           HEADER PREMIUM (NON SCROLLABLE)
           ============================================ */
        .header-premium {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: linear-gradient(135deg, var(--laterite) 0%, var(--foret) 100%);
            color: white;
            padding: 16px 20px;
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            flex-direction: column;
            gap: 12px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            gap: 16px;
        }

        .header-left {
            flex: 1;
        }

        .header-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .badge-premium {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: var(--noir);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }



        .btn-locate {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 999;
            background: white;
            color: var(--laterite);
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.2s ease;
        }

        .btn-locate:hover {
            transform: scale(1.05);
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .theme-toggle:active {
            transform: scale(0.95);
        }

        /* ============================================
           NAVIGATION SCROLLABLE
           ============================================ */
        .nav-container {
            position: sticky;
            top: 80px;
            z-index: 999;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .nav-container::-webkit-scrollbar {
            display: none;
        }

        .main-nav {
            display: flex;
            gap: 8px;
            padding: 12px 20px;
            min-width: max-content;
        }

        .nav-btn {
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 24px;
            padding: 10px 20px;
            font-family: var(--font-body);
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-btn:hover {
            background: var(--laterite);
            border-color: var(--laterite);
            color: white;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--laterite);
            border-color: var(--laterite);
            color: white;
            font-weight: 600;
        }

        /* ============================================
           MAIN CONTENT
           ============================================ */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .page-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============================================
           CARTE INTERACTIVE
           ============================================ */
        #map {
            height: 500px;
            width: 100%;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            margin-bottom: 20px;
        }

        .map-filters {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .filter-group {
            margin-bottom: 16px;
        }

        .filter-group:last-child {
            margin-bottom: 0;
        }

        .filter-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-checkbox {
            display: none;
        }

        .filter-label {
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 6px 14px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }

        .filter-checkbox:checked+.filter-label {
            background: var(--laterite);
            border-color: var(--laterite);
            color: white;
            font-weight: 500;
        }

        .filter-label:hover {
            border-color: var(--laterite);
        }

        /* ============================================
           SHORTCUTS RAPIDES
           ============================================ */
        /* Shortcuts styles defined later in the file for map page specificity */


        .shortcut-card {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .shortcut-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--laterite);
        }

        .shortcut-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .shortcut-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .shortcut-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* ============================================
           FILTRES PREMIUM (VILLE DÉTAIL)
           ============================================ */
        .filter-scroll-container {
            overflow-x: auto;
            white-space: nowrap;
            padding: 10px 4px;
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            /* Firefox */
        }

        .filter-scroll-container::-webkit-scrollbar {
            display: none;
            /* Chrome/Safari */
        }

        .filter-chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: #F3F4F6;
            /* Gris très clair */
            color: var(--noir);
            border: 1px solid transparent;
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-right: 10px;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .filter-chip:last-child {
            margin-right: 0;
        }

        .filter-chip svg {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
            transition: transform 0.3s ease;
        }

        .filter-chip:hover {
            background-color: #E5E7EB;
        }

        .filter-chip.active {
            background-color: var(--noir);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transform: translateY(-1px);
        }

        .filter-chip.active svg {
            transform: scale(1.1);
        }

        /* Animation Fade pour le filtrage */
        .lieu-card.fade-in {
            animation: cardFadeIn 0.4s ease forwards;
        }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Bannière Agenda (Invisible par défaut) */
        .agenda-banner {
            display: none;
            /* Caché par défaut */
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 16px;
            border-radius: var(--radius);
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            align-items: center;
            gap: 12px;
            animation: slideDown 0.4s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .agenda-icon {
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        /* ============================================
           CARDS LIEUX
           ============================================ */
        .lieux-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .lieu-card {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .lieu-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--laterite);
        }

        .lieu-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: var(--sable);
        }

        .lieu-content {
            padding: 16px;
        }

        .lieu-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
        }

        .lieu-title {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            flex: 1;
        }

        .badge-spot {
            background: var(--laterite);
            color: white;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .badge-type {
            background: var(--foret);
            color: white;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .badge-ville {
            background: var(--bg-primary);
            /* Use theme bg */
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            /* Pill shape */
            padding: 4px 10px;
            font-size: 0.75rem;
            font-weight: 500;
            white-space: nowrap;
            margin-left: auto;
            /* Push to right if needed, or just gap */
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* PREMIUM SEGMENTED CONTROL */
        .segmented-control-container {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
            padding: 0 16px;
        }

        .segmented-control {
            display: flex;
            background: var(--bg-secondary);
            padding: 4px;
            border-radius: 50px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 320px;
            position: relative;
        }

        .segment-btn {
            flex: 1;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 40px;
            font-family: var(--font-body);
            /* Inter */
            font-weight: 600;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.85rem;
            text-transform: uppercase;
        }

        .segment-btn.active {
            background: var(--laterite);
            color: white;
            box-shadow: 0 2px 8px rgba(176, 48, 48, 0.25);
        }

        .lieu-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .lieu-prix {
            font-family: var(--font-mono);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .lieu-prix.gratuit {
            color: var(--gratuit);
        }

        .lieu-prix.abordable {
            color: var(--abordable);
        }

        .lieu-prix.premium {
            color: var(--premium);
        }

        .lieu-note {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .lieu-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .btn-details {
            width: 100%;
            background: var(--laterite);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            padding: 12px;
            font-family: var(--font-body);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-website {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, #2E7D32, #1B5E20);
            color: white;
            padding: 12px;
            border-radius: var(--radius);
            font-weight: 600;
            text-decoration: none;
            margin-top: 15px;
            transition: transform 0.2s ease;
            box-shadow: var(--shadow-md);
        }

        .btn-website:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-details:hover {
            background: #A12929;
            transform: scale(1.02);
        }

        .btn-details:active {
            transform: scale(0.98);
        }

        /* ============================================
           MODAL DÉTAILS
           ============================================ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            overflow-y: auto;
            animation: fadeIn 0.2s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: scale(1.1);
        }

        .modal-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .modal-body {
            padding: 24px;
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--laterite);
        }

        .modal-section-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .modal-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .modal-info-item {
            background: var(--bg-primary);
            padding: 12px;
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--laterite);
        }

        .modal-info-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .modal-info-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ============================================
           LANGUE - ACCORDÉONS
           ============================================ */
        .langue-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 44px;
            border: 2px solid var(--border-color);
            border-radius: 24px;
            font-family: var(--font-body);
            font-size: 0.95rem;
            background: var(--bg-secondary);
            color: var(--text-primary);
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--laterite);
            box-shadow: 0 0 0 3px rgba(193, 53, 53, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .accordion-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .accordion-item {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 2px solid transparent;
            transition: border-color 0.2s ease;
        }

        .accordion-item.open {
            border-color: var(--laterite);
        }

        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            cursor: pointer;
            user-select: none;
            background: var(--bg-secondary);
            transition: background 0.2s ease;
        }

        .accordion-header:hover {
            background: var(--bg-primary);
        }

        .accordion-title {
            font-family: var(--font-display);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .accordion-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .accordion-item.open .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .accordion-item.open .accordion-body {
            max-height: 2000px;
        }

        .accordion-content {
            padding: 0 20px 20px 20px;
        }

        .phrase-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            margin-bottom: 8px;
            transition: all 0.2s ease;
        }

        .phrase-item:hover {
            background: var(--bg-secondary);
            transform: translateX(4px);
        }

        .phrase-content {
            flex: 1;
        }

        .phrase-fr {
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .phrase-mg {
            color: var(--laterite);
            font-weight: 600;
            margin-bottom: 2px;
        }

        .phrase-phonetic {
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-style: italic;
        }

        .phrase-actions {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            background: var(--laterite);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .btn-icon:hover {
            background: #A12929;
            transform: scale(1.1);
        }

        .btn-icon:active {
            transform: scale(0.9);
        }

        .btn-icon.favorite.active {
            background: #FFD700;
            color: var(--noir);
        }

        /* Fix pour l'alignement de l'étoile dans la liste */
        .phrase-actions .btn-favorite {
            position: static;
            background: var(--laterite);
            color: white;
            width: 36px;
            height: 36px;
            box-shadow: none;
        }

        .phrase-actions .btn-favorite.active {
            background: #FFD700;
            color: var(--noir);
        }

        /* ============================================
           OUTILS
           ============================================ */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .tool-card {
            background: var(--bg-secondary);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
        }

        .tool-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .converter-inputs {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .converter-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .converter-input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-family: var(--font-mono);
            font-size: 1.1rem;
            font-weight: 500;
            background: var(--bg-primary);
            color: var(--text-primary);
            text-align: center;
        }

        .converter-input:focus {
            outline: none;
            border-color: var(--laterite);
        }

        .converter-label {
            font-weight: 600;
            color: var(--text-secondary);
            min-width: 50px;
        }

        .rate-info {
            text-align: center;
            padding: 12px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 8px;
        }

        .btn-modify {
            margin-top: 12px;
            background: var(--foret);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            padding: 10px 16px;
            font-family: var(--font-body);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-modify:hover {
            background: #2D4A2D;
        }

        .checklist-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checklist-item:hover {
            background: var(--bg-secondary);
            transform: translateX(4px);
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .checklist-item.checked .checklist-checkbox {
            background: var(--gratuit);
            border-color: var(--gratuit);
        }

        .checklist-checkbox::after {
            content: '✓';
            color: white;
            font-weight: bold;
            display: none;
        }

        .checklist-item.checked .checklist-checkbox::after {
            display: block;
        }

        .checklist-label {
            flex: 1;
            color: var(--text-primary);
        }

        .checklist-item.checked .checklist-label {
            text-decoration: line-through;
            opacity: 0.6;
        }

        .seasonal-advice {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .advice-item {
            padding: 16px;
            border-radius: var(--radius-sm);
            border-left: 4px solid;
        }

        .advice-item.good {
            background: rgba(22, 163, 74, 0.1);
            border-color: var(--gratuit);
        }

        .advice-item.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--abordable);
        }

        .advice-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .advice-list {
            color: var(--text-secondary);
            font-size: 0.9rem;
            list-style-position: inside;
        }

        .contacts-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .contact-group-title {
            font-weight: 600;
            color: var(--laterite);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .contact-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
        }

        .contact-name {
            color: var(--text-primary);
        }

        .contact-number {
            font-family: var(--font-mono);
            color: var(--laterite);
            font-weight: 500;
        }

        /* ============================================
           MAP STYLES
           ============================================ */
        /* ============================================
           CARTE & FILTRES PREMIUM (Design Expert)
           ============================================ */
        #page-carte {
            /* Standard block flow - height matches content */
            display: block;
            height: auto;
            /* REMOVED min-height: 100vh - was causing shortcuts to float inside */
            position: relative;
            padding: 0;
            margin: 0 -20px 0 -20px;
            padding-bottom: 0;
            /* Reduced from 80px */
        }

        #map-container {
            /* Fixed height block - increased for better visibility */
            height: 75vh;
            min-height: 450px;
            max-height: 800px;
            width: 100%;
            position: relative;
            z-index: 1;
            overflow: hidden;
            /* CRITIQUE: empêche la carte Leaflet de déborder */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            /* Positive margin to force shortcuts down */
            margin-bottom: 20px;
            border-bottom: 8px solid var(--bg-primary);
            /* Physical separator */
        }

        #map {
            height: 100%;
            width: 100%;
            border-radius: 0;
            z-index: 1;
        }

        /* FILTRES FLOTTANTS ÉPURÉS */
        .map-filters-overlay {
            position: absolute;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 800px;
            z-index: 900;
            display: flex;
            justify-content: center;
            pointer-events: none;
        }

        .filter-row {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 4px 8px;
            pointer-events: auto;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            max-width: 100%;
        }

        .filter-chip-map {
            background: transparent;
            border: 1px solid transparent;
            border-radius: 20px;
            padding: 6px 14px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .filter-chip-map:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .filter-chip-map.active {
            background: var(--laterite);
            color: white;
            box-shadow: 0 2px 8px rgba(217, 79, 4, 0.3);
        }

        /* BOUTON LOCALISATION */
        .btn-locate {
            position: absolute;
            bottom: 24px;
            right: 24px;
            z-index: 900;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: white;
            color: var(--laterite);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
        }

        .btn-locate span {
            display: none;
        }

        /* SHORTCUTS RAPIDES (High Visibility) */
        /* SHORTCUTS RAPIDES (High Visibility) */
        .shortcuts-grid {
            /* Clear separation */
            margin-top: 20px;
            position: relative;
            z-index: 10;
            clear: both;
            /* Ensure no floating issues */
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 20px;
            background: var(--bg-primary);
        }

        .shortcut-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 16px;
            /* Plus compact */
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
            /* Plus subtil */
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
            height: 100%;
        }

        .shortcut-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--laterite);
        }

        .shortcut-icon {
            font-size: 2rem;
            /* Plus compact */
            margin-bottom: 8px;
            display: block;
        }

        .shortcut-title {
            font-size: 1.1rem;
            /* Plus compact */
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .shortcut-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* RESPONSIVE */
        @media (max-width: 900px) {
            .shortcuts-grid {
                grid-template-columns: 1fr;
                padding: 20px;
            }

            .shortcut-card {
                padding: 20px;
            }
        }

        /* ============================================
           RESPONSIVE
           ============================================ */
        @media (max-width: 768px) {
            .header-title {
                font-size: 1.2rem;
            }

            .header-tagline {
                font-size: 0.8rem;
            }

            .theme-toggle {
                width: 44px;
                height: 44px;
            }

            .nav-container {
                top: 72px;
            }

            .main-nav {
                padding: 10px 16px;
                gap: 6px;
            }

            .nav-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }

            .main-content {
                padding: 16px;
            }

            #map {
                height: 400px;
            }

            .shortcuts-grid {
                grid-template-columns: 1fr;
            }

            .lieux-grid {
                grid-template-columns: 1fr;
            }

            .tools-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 10px;
            }

            .modal-title {
                font-size: 1.5rem;
            }
        }

        @media (min-width: 1024px) {
            #map {
                height: 600px;
            }
        }

        /* ============================================
           UTILITAIRES
           ============================================ */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        /* Leaflet popup customization */
        /* Leaflet popup customization - Premium */
        .leaflet-popup-content-wrapper {
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            padding: 0;
            overflow: hidden;
            border: 2px solid var(--laterite);
            background: var(--bg-primary);
        }

        .leaflet-popup-content {
            margin: 0;
            width: 280px !important;
        }

        .popup-image-container {
            height: 140px;
            width: 100%;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .btn-favorite-popup-overlay {
            position: absolute;
            top: 10px;
            right: 10px;

            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;

            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);

            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            color: #4b5563;
            font-size: 1.1rem;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-favorite-popup-overlay:hover {
            transform: scale(1.1);
            background: #ffffff;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .btn-favorite-popup-overlay:active {
            transform: scale(0.95);
        }

        .btn-favorite-popup-overlay.active {
            color: var(--premium);
        }

        .popup-body {
            padding: 12px 16px 16px 16px;
        }

        .popup-title {
            font-family: var(--font-display);
            font-weight: 700;
            font-size: 1.15rem;
            color: var(--text-primary);
            line-height: 1.3;
            margin: 0 0 4px 0;
        }

        .popup-subtitle {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .popup-type-badge {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            backdrop-filter: blur(4px);
        }

        .popup-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .popup-price {
            font-family: var(--font-mono);
            font-weight: 700;
            color: var(--laterite);
            font-size: 1rem;
            background: rgba(217, 79, 4, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }

        .popup-rating {
            font-size: 0.9rem;
            color: #F59E0B;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn-popup-details {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--laterite);
            color: white;
            text-align: center;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            margin-top: 12px;
            box-shadow: 0 4px 6px rgba(217, 79, 4, 0.2);
        }

        .btn-popup-details:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(217, 79, 4, 0.3);
            background: #c2410b;
        }

        .btn-favorite-popup {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #ccc;
            transition: all 0.2s;
            flex-shrink: 0;
            box-shadow: var(--shadow);
        }

        .btn-favorite-popup.active {
            color: var(--premium);
            border-color: var(--premium);
            background: #fff9e6;
        }

        .btn-favorite-popup:hover {
            transform: scale(1.1);
        }

        /* Installation prompt */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--laterite);
            color: white;
            padding: 16px 24px;
            border-radius: 50px;
            box-shadow: var(--shadow-lg);
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 9999;
            animation: slideUp 0.3s ease;
        }

        .install-prompt.active {
            display: flex;
        }

        .install-btn {
            background: white;
            color: var(--laterite);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .install-btn:hover {
            transform: scale(1.05);
        }

        .install-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            margin-left: 8px;
        }

        /* FAVORITES STYLES */
        /* FAVORITES STYLES */
        .btn-favorite {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 10;

            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;

            background: rgba(255, 255, 255, 0.95);
            /* Quasi opaque pour contraste max */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
            /* Ombre marquée pour détacher du fond */

            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

            color: #4b5563;
            /* Gris foncé neutre par défaut */
            font-size: 1.1rem;
        }

        .btn-favorite:hover {
            transform: scale(1.1);
            background: #ffffff;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .btn-favorite:active {
            transform: scale(0.95);
        }

        .btn-favorite.active {
            color: var(--premium);
            /* Rouge/Or pour l'état actif */
            /* Optionnel: fond légèrement teinté */
            /* background: #fff5f5; */
        }

        .btn-favorite.active i {
            /* Anime l'icône si besoin */
            mix-blend-mode: normal;
        }

        /* CONVERTER STYLES */
        .converter-select {
            flex: 1;
            padding: 8px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-body);
        }

        .btn-icon-small {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .status-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-badge.manual {
            background: #F59E0B;
            color: white;
        }

        .status-badge.live {
            background: #10B981;
            color: white;
        }

        .btn-text-action {
            background: none;
            border: none;
            color: var(--laterite);
            font-size: 0.8rem;
            text-decoration: underline;
            cursor: pointer;
            margin-left: 10px;
        }

        /* ============================================
           FILTRES INTELLIGENTS (PREMIUM UI)
           ============================================ */
        .nav-pills {
            display: flex;
            gap: 12px;
            padding: 4px 4px 12px 4px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            margin-bottom: 24px;
            align-items: center;
        }

        .nav-pills::-webkit-scrollbar {
            display: none;
        }

        .nav-pill {
            background: var(--bg-secondary);
            border: 1px solid rgba(0, 0, 0, 0.08);
            /* Plus subtil */
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 50px;
            font-family: var(--font-body);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            /* Ombre douce initiale */
            display: flex;
            align-items: center;
            gap: 8px;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .nav-pill:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            color: var(--text-primary);
            background: white;
            border-color: rgba(0, 0, 0, 0.05);
        }

        .nav-pill:active {
            transform: scale(0.96);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .nav-pill.active {
            background: linear-gradient(135deg, var(--laterite) 0%, #A12929 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 6px 15px rgba(217, 79, 4, 0.4);
            /* Glow rouge */
        }

        /* ICON STYLES */
        .nav-pill i,
        .nav-btn i,
        .filter-chip-map i {
            font-size: 1.1em;
            /* Légèrement plus grand */
            margin-right: 2px;
        }

        .nav-btn i {
            margin-bottom: 2px;
            /* Alignement optique */
        }
    </style>
</head>

<body>
    <header class="header-premium">
        <div class="header-content">
            <div class="header-top">
                <div>
                    <h1 class="header-title">
                        🌍 Gasikara Explorer
                        <span class="badge-premium">PREMIUM</span>
                    </h1>
                    <p class="header-tagline">Le guide connecté des terres rouges</p>
                </div>
                <button id="themeToggle" class="theme-toggle">☀️</button>
            </div>


        </div>
    </header>
    <nav class="nav-container">
        <div class="main-nav" id="mainNav">
            <button class="nav-btn active" data-page="carte"><i class="fa-solid fa-map-location-dot"></i> Carte</button>
            <button class="nav-btn" data-page="antananarivo"><i class="fa-solid fa-landmark"></i> Tana</button>
            <button class="nav-btn" data-page="antsiranana"><i class="fa-solid fa-anchor"></i> Diego</button>
            <button class="nav-btn" data-page="fianarantsoa"><i class="fa-solid fa-train"></i> Fianar</button>
            <button class="nav-btn" data-page="mahajanga"><i class="fa-solid fa-umbrella-beach"></i> Majunga</button>
            <button class="nav-btn" data-page="toamasina"><i class="fa-solid fa-ship"></i> Tamatave</button>
            <button class="nav-btn" data-page="toliara"><i class="fa-solid fa-sun"></i> Tuléar</button>
            <button class="nav-btn" data-page="spots"><i class="fa-solid fa-fire"></i> Spots</button>
            <button class="nav-btn" data-page="langue"><i class="fa-solid fa-language"></i> Langue</button>
            <button class="nav-btn" data-page="outils"><i class="fa-solid fa-toolbox"></i> Outils</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Page Carte -->
        <section id="page-carte" class="page-section active">
            <!-- Filtres -->
            <!-- Map Container with Overlay Filters -->
            <!-- Map Container with Overlay Filters -->
            <div id="map-container">
                <div id="map"></div>

                <!-- Filters Overlay (Smart Bar Harmonized) -->
                <div class="map-filters-overlay">
                    <div class="filter-row">
                        <!-- Villes (Navigation Rapide) -->
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'antananarivo')">
                            <input type="checkbox" id="filter-antananarivo" class="filter-checkbox" checked>
                            <i class="fa-solid fa-landmark"></i> Tana
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'antsiranana')">
                            <input type="checkbox" id="filter-antsiranana" class="filter-checkbox" checked>
                            <i class="fa-solid fa-anchor"></i> Diego
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'mahajanga')">
                            <input type="checkbox" id="filter-mahajanga" class="filter-checkbox" checked>
                            <i class="fa-solid fa-umbrella-beach"></i> Majunga
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'toamasina')">
                            <input type="checkbox" id="filter-toamasina" class="filter-checkbox" checked>
                            <i class="fa-solid fa-ship"></i> Tamatave
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'toliara')">
                            <input type="checkbox" id="filter-toliara" class="filter-checkbox" checked>
                            <i class="fa-solid fa-sun"></i> Tuléar
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'fianarantsoa')">
                            <input type="checkbox" id="filter-fianarantsoa" class="filter-checkbox" checked>
                            <i class="fa-solid fa-train"></i> Fianar
                        </div>

                        <div
                            style="width:1px; background:rgba(0,0,0,0.1); margin:0 4px; height:20px; align-self:center;">
                        </div>

                        <!-- Catégories Standardisées -->
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'explorer')">
                            <input type="checkbox" id="filter-explorer" class="filter-checkbox" checked>
                            <i class="fa-solid fa-binoculars"></i> Explorer
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'manger')">
                            <input type="checkbox" id="filter-manger" class="filter-checkbox" checked>
                            <i class="fa-solid fa-utensils"></i> Manger
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'dodo')">
                            <input type="checkbox" id="filter-dodo" class="filter-checkbox" checked>
                            <i class="fa-solid fa-bed"></i> Dormir
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'sortir')">
                            <input type="checkbox" id="filter-sortir" class="filter-checkbox" checked>
                            <i class="fa-solid fa-martini-glass-citrus"></i> Sortir
                        </div>
                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'spot')">
                            <input type="checkbox" id="filter-spot" class="filter-checkbox" checked>
                            <i class="fa-solid fa-map-pin"></i> Spots
                        </div>

                        <div
                            style="width:1px; background:rgba(0,0,0,0.1); margin:0 4px; height:20px; align-self:center;">
                        </div>

                        <div class="filter-chip-map active" onclick="toggleFilter(this, 'favorites')">
                            <input type="checkbox" id="filter-favorites" class="filter-checkbox">
                            <i class="fa-solid fa-heart"></i> Favoris
                        </div>
                    </div>
                </div>

                <button id="btnLocateMe" class="btn-locate" title="Autour de moi">
                    <i class="fas fa-location-crosshairs"></i>
                </button>
            </div>

            <!-- Shortcuts -->
            <div class="shortcuts-grid">
                <div class="shortcut-card" data-goto="spots">
                    <div class="shortcut-icon">🔥</div>
                    <h3 class="shortcut-title">Spots Locaux</h3>
                    <p class="shortcut-desc">9 lieux secrets accessibles uniquement via contact local</p>
                </div>

                <div class="shortcut-card" data-goto="langue">
                    <div class="shortcut-icon">🗣️</div>
                    <h3 class="shortcut-title">50+ Expressions</h3>
                    <p class="shortcut-desc">Phrases essentielles en malgache avec prononciation audio</p>
                </div>

                <div class="shortcut-card" data-goto="outils">
                    <div class="shortcut-icon">🧰</div>
                    <h3 class="shortcut-title">Outils Terrain</h3>
                    <p class="shortcut-desc">Convertisseur devises, checklist voyage, numéros utiles</p>
                </div>
            </div>
        </section>

        <!-- Pages Provinces (template dynamique) -->
        <section id="page-antananarivo" class="page-section"></section>
        <section id="page-antsiranana" class="page-section"></section>
        <section id="page-fianarantsoa" class="page-section"></section>
        <section id="page-mahajanga" class="page-section"></section>
        <section id="page-toamasina" class="page-section"></section>
        <section id="page-toliara" class="page-section"></section>

        <!-- Page Spots Locaux -->
        <section id="page-spots" class="page-section">
            <h2 class="page-title"
                style="font-family: var(--font-display); font-size: 2rem; margin-bottom: 20px; color: var(--laterite);">
                🔥 Spots Locaux Authentiques</h2>
            <p style="color: var(--text-secondary); margin-bottom: 30px; font-size: 1.1rem;">
                Ces lieux sont <strong>inaccessibles sans contact humain local</strong>. Non référencés sur Google Maps,
                absents des guides touristiques traditionnels.
            </p>
            <div id="spotsContainer" class="lieux-grid"></div>
        </section>

        <!-- Page Langue -->
        <section id="page-langue" class="page-section">
            <div class="langue-header">
                <h2 style="font-family: var(--font-display); font-size: 2rem; color: var(--text-primary);">🗣️
                    Expressions Malgaches</h2>
                <div class="search-box">
                    <span class="search-icon">🔍</span>
                    <input type="text" id="langueSearch" class="search-input"
                        placeholder="Rechercher une expression...">
                </div>
            </div>

            <div id="accordionContainer" class="accordion-container"></div>
        </section>

        <!-- Page Outils -->
        <section id="page-outils" class="page-section">
            <h2
                style="font-family: var(--font-display); font-size: 2rem; margin-bottom: 30px; color: var(--text-primary);">
                🧰 Outils Terrain</h2>

            <div class="tools-grid">
                <!-- Convertisseur -->
                <!-- Convertisseur Avancé -->
                <div class="tool-card">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 class="tool-title" style="margin:0;">💱 Convertisseur</h3>
                        <div id="converterStatus" class="status-badge manual">Mode Manuel</div>
                    </div>

                    <div class="converter-controls" style="margin-bottom: 15px; display: flex; gap: 10px;">
                        <select id="currencySelector" class="converter-select">
                            <option value="EUR" selected>🇪🇺 Euro (€)</option>
                            <option value="USD">🇺🇸 Dollar ($)</option>
                            <option value="GBP">🇬🇧 Livre (£)</option>
                            <option value="CHF">🇨🇭 Franc Suisse</option>
                            <option value="ZAR">🇿🇦 Rand (R)</option>
                        </select>
                        <button id="btnRefreshRate" class="btn-icon-small" title="Actualiser taux officiel">🔄</button>
                    </div>

                    <div class="converter-inputs" id="converterInputsContainer">
                        <div class="converter-row" id="rowForeign">
                            <span class="converter-label" id="foreignLabel">€</span>
                            <input type="number" id="inputForeign" class="converter-input" value="10" min="0"
                                step="0.01">
                        </div>

                        <div class="converter-actions" style="display:flex; justify-content:center; margin: 10px 0;">
                            <button id="btnInvert" class="btn-icon-small" title="Inverser le sens"
                                style="transform: rotate(90deg);">⇄</button>
                        </div>

                        <div class="converter-row" id="rowLocal">
                            <span class="converter-label">Ar</span>
                            <input type="number" id="inputLocal" class="converter-input" value="50000" min="0">
                        </div>
                    </div>

                    <div class="rate-info">
                        <span id="rateText">1 € = 5000 Ar</span>
                        <button id="btnEditRate" class="btn-text-action">Modifier manuellement</button>
                    </div>
                </div>

                <!-- Checklist -->
                <div class="tool-card">
                    <h3 class="tool-title">✅ Checklist Voyage</h3>
                    <div class="checklist-items" id="checklistContainer"></div>
                </div>

                <!-- Conseils Saisonniers -->
                <div class="tool-card">
                    <h3 class="tool-title">📅 Conseils Saisonniers</h3>
                    <div class="seasonal-advice">
                        <div class="advice-item good">
                            <div class="advice-title">🌞 Meilleure période : MAI à OCTOBRE</div>
                            <ul class="advice-list">
                                <li>Météo stable, routes praticables</li>
                                <li>Observation lémuriens optimale</li>
                                <li>Températures agréables (20-25°C)</li>
                            </ul>
                        </div>
                        <div class="advice-item warning">
                            <div class="advice-title">⚠️ À éviter : JANVIER à MARS</div>
                            <ul class="advice-list">
                                <li>Saison des pluies (cyclones possibles)</li>
                                <li>Routes coupées, parcs fermés</li>
                                <li>Forte humidité</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Numéros Utiles -->
                <div class="tool-card">
                    <h3 class="tool-title">📞 Numéros Utiles</h3>
                    <div class="contacts-list">
                        <div>
                            <div class="contact-group-title">🚨 Urgences</div>
                            <div class="contact-item">
                                <span class="contact-name">Police</span>
                                <span class="contact-number">117</span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-name">Pompiers</span>
                                <span class="contact-number">118</span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-name">Ambulance</span>
                                <span class="contact-number">119</span>
                            </div>
                        </div>

                        <div>
                            <div class="contact-group-title">🏛️ Ambassades</div>
                            <div class="contact-item">
                                <span class="contact-name">France</span>
                                <span class="contact-number">+261 20 22 399 98</span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-name">Belgique</span>
                                <span class="contact-number">+261 20 22 241 69</span>
                            </div>
                        </div>

                        <div>
                            <div class="contact-group-title">📶 Opérateurs</div>
                            <div class="contact-item">
                                <span class="contact-name">Telma</span>
                                <span class="contact-number">*111#</span>
                            </div>
                            <div class="contact-item">
                                <span class="contact-name">Airtel</span>
                                <span class="contact-number">*121#</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal Détails -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">×</button>
            <img id="modalImage" class="modal-image" src="" alt="" loading="lazy">
            <div class="modal-body">
                <h2 id="modalTitle" class="modal-title"></h2>
                <div id="modalBadges" style="margin-bottom: 16px;"></div>
                <div id="modalInfoGrid" class="modal-info-grid"></div>
                <div id="modalSections"></div>
            </div>
        </div>
    </div>

    <!-- Install Prompt -->
    <div id="installPrompt" class="install-prompt">
        <span>📱 Installer l'app pour un accès offline</span>
        <button class="install-btn" id="installBtn">Installer</button>
        <button class="install-close" id="installClose">×</button>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>




    <script>
        // ============================================
        // DONNÉES
        // ============================================

        const LIEUX_DATA = [
            {
                id: 1,
                ville: "Antananarivo",
                nom: "Palais de la Reine (Rova)",
                type: "Incontournable",
                lat: -18.9151,
                lng: 47.5283,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.5,
                description: "Le Rova de Manjakamiadana est le cœur historique et spirituel de l'Imerina. Perché sur la plus haute colline, ce complexe royal offre une plongée fascinante dans l'histoire des monarques malgaches et une vue imprenable à 360° sur toute la ville.",
                image: "images/villes/palais-reine.jpg",
                acces: "Centre-ville d'Antananarivo, colline d'Ambohimanga",
                horaires: "9h-17h tous les jours",
                respect: "Tenue correcte exigée, pas de short",
                conseil: "Prenez un guide officiel à l'entrée pour comprendre l'histoire complexe des incendies et de la reconstruction.",
                duree: "1h30",
                siteWeb: "https://tourisme-antananarivo.com/activities/rova-antananarivo/"
            },
            {
                id: 2,
                ville: "Antananarivo",
                nom: "Marché Artisanal de La Digue",
                type: "Culture",
                lat: -18.9087,
                lng: 47.5236,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.3,
                description: "Le plus grand marché artisanal de la capitale. Un labyrinthe de couleurs et de senteurs où vous trouverez tout l'artisanat malgache : vannerie, marqueterie, pierres semi-précieuses, broderies et sculptures en bois. L'endroit idéal pour vos souvenirs.",
                image: "images/villes/marche-la-digue.jpg",
                acces: "Avenue de l'Indépendance",
                horaires: "8h-18h du lundi au samedi",
                conseil: "Le marchandage est de rigueur ici ! Divisez le premier prix annoncé par deux ou trois, toujours avec le sourire.",
                duree: "2h",
                siteWeb: "https://tourisme-antananarivo.com/"
            },
            {
                id: 3,
                ville: "Antananarivo",
                nom: "Parc de Tsarasaotra",
                type: "Nature",
                lat: -18.9352,
                lng: 47.5467,
                prix: "5 000 Ar",
                prixEur: "1 €",
                prixNum: 5000,
                note: 4.6,
                description: "Un havre de paix inattendu en plein cœur de la ville. Ce parc privé classé RAMSAR est un refuge vital pour de nombreuses espèces d'oiseaux endémiques, dont le héron de Humblot. Parfait pour une pause nature loin du tumulte urbain.",
                image: "images/spots/parc-tsarasaotra.jpg",
                acces: "Quartier Tsarasaotra",
                horaires: "7h-17h tous les jours",
                conseil: "Apportez des jumelles si vous en avez, c'est un paradis pour l'ornithologie, surtout tôt le matin.",
                duree: "1h",
                siteWeb: "https://rsis.ramsar.org/ris/1464"
            },
            {
                id: 4,
                ville: "Antananarivo",
                nom: "Source Sacrée d'Ambohijatovo",
                type: "Spot Local",
                lat: -18.9151,
                lng: 47.5283,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.0,
                description: "Une source mystique chargée de légendes, vénérée par les habitants du quartier. On dit que son eau possède des vertus purificatrices. C'est un lieu secret, hors des guides touristiques classiques, où l'on ressent la spiritualité quotidienne malgache.",
                image: "images/spots/source-ambohijatovo.jpg",
                acces: "Pas de GPS - Derrière l'église Andohalo, demander au gardien qui montre le chemin",
                contactLocal: "Le gardien de l'église (présent le matin)",
                respect: "Offrande traditionnelle recommandée, silence requis, ne pas toucher l'eau sans permission",
                conseil: "Montrez du respect et demandez toujours la permission avant de prendre une photo. Une petite pièce au gardien est appréciée.",
                duree: "30 min",
                siteWeb: "https://tourisme-antananarivo.com/"
            },
            {
                id: 5,
                ville: "Antananarivo",
                nom: "Restaurant La Varangue",
                type: "Restaurant",
                lat: -18.9122,
                lng: 47.5341,
                prix: "40 000 Ar",
                prixEur: "9 €",
                prixNum: 40000,
                note: 4.7,
                description: "Une institution gastronomique à Tana. Installé dans une magnifique villa coloniale remplie d'antiquités, ce restaurant propose une cuisine fusion raffinée. Le cadre est aussi exquis que les plats, avec une collection d'objets d'art hétéroclite fascinante.",
                image: "images/restaurants/la-varangue.jpg",
                acces: "Rue Printsy Ratsimamanga, Isoraka",
                horaires: "12h-14h30 et 19h-22h",
                conseil: "Réservez une table en terrasse ou près de la cheminée en hiver. Essayez leur foie gras maison.",
                duree: "2h",
                siteWeb: "https://www.hotel-restaurant-lavarangue-tananarive.com"
            },
            {
                id: 515,
                ville: "Antananarivo",
                nom: "Colline Royale d'Ambohimanga",
                type: "Culture",
                lat: -18.7614,
                lng: 47.5622,
                prix: "20 000 Ar",
                prixEur: "4 €",
                prixNum: 20000,
                note: 4.8,
                description: "Le berceau de la royauté Merina, classé à l'UNESCO. Une cité interdite préservée avec ses palais en bois précieux, ses tombeaux royaux et ses ficus sacrés. Un lieu chargé de spiritualité et d'histoire, indispensable pour comprendre Madagascar.",
                image: "images/tana/tana_ambohimanga_royal_hill_1765475311821.png",
                acces: "20 km au nord de Tana, compter 1h de route",
                horaires: "9h-16h30 tous les jours",
                conseil: "Prenez impérativement un guide sur place pour saisir la symbolique de chaque porte et bâtiment.",
                duree: "Demi-journée",
                siteWeb: "https://whc.unesco.org/fr/list/950/"
            },
            {
                id: 516,
                ville: "Antananarivo",
                nom: "Lemurs' Park",
                type: "Nature",
                lat: -18.9667,
                lng: 47.3833,
                prix: "75 000 Ar",
                prixEur: "15 €",
                prixNum: 75000,
                note: 4.6,
                description: "Une réserve botanique privée où 9 espèces de lémuriens vivent en semi-liberté. C'est le meilleur endroit près de Tana pour observer les Makis Cattas, les Sifakas danseurs et les lémuriens nocturnes dans un cadre verdoyant au bord de la rivière.",
                image: "images/tana/tana_lemurs_park_1765475327277.png",
                acces: "RN1, PK 22 (route d'Ampefy)",
                horaires: "8h-16h (Dernière entrée)",
                conseil: "Arrivez le matin à 9h quand les lémuriens sont les plus actifs avant la chaleur de midi.",
                duree: "2h",
                siteWeb: "https://www.lemurspark.com"
            },
            {
                id: 517,
                ville: "Antananarivo",
                nom: "Le Carré",
                type: "Restaurant",
                lat: -18.9040,
                lng: 47.5260,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.5,
                description: "Le spot branché d'Antanimena. Un cadre moderne très végétalisé, une belle terrasse et une carte immense qui plaira à tout le monde (bons burgers, sushis, grillades). L'ambiance y est toujours animée et cosmopolite.",
                image: "images/tana/tana_le_carre_restaurant_1765475346465.png",
                acces: "Quartier Antanimena, Zone Galaxy",
                horaires: "10h-22h",
                conseil: "Parfait pour un déjeuner d'affaires ou un brunch tardif le samedi.",
                duree: "2h",
                siteWeb: "https://www.facebook.com/lecarretana"
            },
            {
                id: 518,
                ville: "Antananarivo",
                nom: "Kudeta Urban Club",
                type: "Restaurant",
                lat: -18.9130,
                lng: 47.5220,
                prix: "50 000 Ar",
                prixEur: "12 €",
                prixNum: 50000,
                note: 4.7,
                description: "Chic et tendance. Situé au Carlton, le Kudeta est à la fois un excellent restaurant gastronomique et un lounge bar sophistiqué le soir. Le décor mélange art malgache contemporain et design industriel. Incontournable pour la jeunesse dorée.",
                image: "images/tana/tana_kudeta_urban_club_1765475364373.png",
                acces: "Hôtel Carlton Anosy",
                horaires: "11h-Minuit (plus tard le WE)",
                conseil: "Leurs cocktails signature sont parmi les meilleurs de la ville.",
                duree: "Soirée",
                siteWeb: "https://www.kudeta.com"
            },
            {
                id: 519,
                ville: "Antananarivo",
                nom: "Lokanga Boutique Hotel",
                type: "Restaurant",
                lat: -18.9220,
                lng: 47.5310,
                prix: "60 000 Ar",
                prixEur: "14 €",
                prixNum: 60000,
                note: 4.8,
                description: "La plus belle vue de Tana. Perché sur la colline royale, ce restaurant offre un panorama époustouflant, surtout au coucher du soleil. Dans un cadre colonial raffiné, on y déguste une cuisine fine et des desserts maison squis (profiteroles, tartes).",
                image: "images/tana/tana_lokanga_terrace_view_1765475379611.png",
                acces: "Haute Ville, près du Rova",
                horaires: "Diner sur réservation, Salon de thé l'aprem",
                conseil: "Réservez impérativement la table en terrasse pour le coucher du soleil à 17h30.",
                duree: "2h",
                siteWeb: "https://lokanga-hotel.mg"
            },
            {
                id: 520,
                ville: "Antananarivo",
                nom: "Nerone",
                type: "Restaurant",
                lat: -18.9090,
                lng: 47.5250,
                prix: "30 000 Ar",
                prixEur: "7 €",
                prixNum: 30000,
                note: 4.6,
                description: "L'Italie authentique à Tana. Une trattoria chaleureuse où le patron italien veille au grain. Pizzas au feu de bois à la pâte fine, pâtes fraîches maison et tiramisu crémeux. On s'y sent comme à Rome, l'accueil malgache en plus.",
                image: "images/tana/tana_nerone_italian_restaurant_1765475395930.png",
                acces: "Quartier Ambatonakanga",
                horaires: "12h-14h et 19h-22h",
                conseil: "Ne partez pas sans goûter à leurs glaces maison en dessert.",
                duree: "1h30",
                siteWeb: "https://www.facebook.com"
            },
            {
                id: 521,
                ville: "Antananarivo",
                nom: "Grand Hôtel Urban",
                type: "Hôtel",
                lat: -18.9115,
                lng: 47.5245,
                prix: "350 000 Ar",
                prixEur: "80 €",
                prixNum: 350000,
                note: 4.7,
                description: "Le chic colonial revisité. Façade blanche immaculée, parquets en bois sombre et design épuré. C'est l'un des hôtels de charme les plus élégants du centre-ville, avec un rooftop bar très prisé pour les afterworks.",
                image: "images/tana/tana_grand_hotel_urban.jpg",
                acces: "Ambatonakanga, proche ambassades",
                horaires: "Réception 24h/24",
                conseil: "Demandez une chambre avec balcon donnant sur la ville pour une vue dégagée.",
                duree: "Séjour",
                siteWeb: "https://www.grandhotelurban.com"
            },
            {
                id: 522,
                ville: "Antananarivo",
                nom: "Le Centell Hotel & Spa",
                type: "Hôtel",
                lat: -18.9060,
                lng: 47.5230,
                prix: "300 000 Ar",
                prixEur: "70 €",
                prixNum: 300000,
                note: 4.6,
                description: "Le standing international 4 étoiles. Un bâtiment moderne vitré qui tranche avec l'architecture locale. Chambres spacieuses et sobres, spa complet et surtout 'La Canopée', son rooftop offrant une vue panoramique sur tout Tana.",
                image: "images/tana/tana_le_centell_hotel.jpg",
                acces: "Quartier Antanimena",
                horaires: "Réception 24h/24",
                conseil: "Idéal pour les voyages d'affaires grâce à son confort moderne et fonctionnel.",
                duree: "Séjour",
                siteWeb: "https://www.centellhotel.com"
            },
            {
                id: 523,
                ville: "Antananarivo",
                nom: "Le Sakamanga",
                type: "Hôtel",
                lat: -18.9150,
                lng: 47.5260,
                prix: "150 000 Ar",
                prixEur: "35 €",
                prixNum: 150000,
                note: 4.5,
                description: "Plus qu'un hôtel, une institution. Un véritable musée vivant rempli d'objets historiques et de photos anciennes. L'ambiance y est unique, avec une petite piscine dans un patio végétalisé. C'est le point de chute préféré des voyageurs depuis des décennies.",
                image: "images/tana/tana_sakamanga_pool.jpg",
                acces: "Rue Andrianary Ratianarivo, Isoraka",
                horaires: "Réception 24h/24",
                conseil: "Explorez les couloirs de l'hôtel comme on visite une galerie d'art, c'est fascinant.",
                duree: "Séjour",
                siteWeb: "https://www.sakamanga.com"
            },
            {
                id: 524,
                ville: "Antananarivo",
                nom: "Le Citizen Guest House",
                type: "Hôtel",
                lat: -18.9180,
                lng: 47.5190,
                prix: "380 000 Ar",
                prixEur: "90 €",
                prixNum: 380000,
                note: 4.9,
                description: "L'élégance intimiste au bord du lac. Situé dans une maison traditionnelle rénovée face au lac Anosy, il offre seulement quelques chambres sublimes et une terrasse en bois parfaite pour un dîner romantique avec vue sur le Rova illuminé.",
                image: "images/tana/tana_le_citizen_terrace.jpg",
                acces: "Isoraka, face au lac Anosy",
                horaires: "Réception 24h/24",
                conseil: "Réservez des mois à l'avance, le nombre de chambres est très limité.",
                duree: "Séjour",
                siteWeb: "https://www.le-citizen.com"
            },
            {
                id: 525,
                ville: "Antananarivo",
                nom: "Maison Gallieni",
                type: "Hôtel",
                lat: -18.9200,
                lng: 47.5300,
                prix: "750 000 Ar",
                prixEur: "170 €",
                prixNum: 750000,
                note: 4.9,
                description: "Le luxe confidentiel. Cette ancienne banque coloniale en briques rouges transformée en maison d'hôtes exclusive propose un jardin tropical avec piscine et une vue imprenable. Un havre de paix absolu sur les hauteurs de la ville.",
                image: "images/tana/tana_maison_gallieni.jpg",
                acces: "Colline de Faravohitra",
                horaires: "Sur réservation uniquement",
                conseil: "Pour une expérience 'comme à la maison' mais en version grand luxe.",
                duree: "Séjour",
                siteWeb: "https://www.maisongallieni.com"
            },
            {
                id: 526,
                ville: "Antananarivo",
                nom: "No Comment Bar",
                type: "Sortir",
                lat: -18.9155,
                lng: 47.5235,
                prix: "15 000 Ar",
                prixEur: "3 €",
                prixNum: 15000,
                note: 4.6,
                description: "L'afterwork incontournable d'Isoraka. Ambiance pub cosy à l'étage pour déguster un bon whisky et club animé au sous-sol pour danser. Les concerts live (jazz, rock, fusion) y sont fréquents et de très bonne qualité.",
                image: "images/tana/tana_no_comment_bar.jpg",
                acces: "Quartier Isoraka",
                horaires: "17h-3h (Fermé dimanche)",
                conseil: "Arrivez tôt le jeudi soir pour avoir une table, c'est bondé.",
                duree: "Soirée",
                siteWeb: "https://www.nocomment.mg"
            },
            {
                id: 527,
                ville: "Antananarivo",
                nom: "Taxi Be Antanimena",
                type: "Sortir",
                lat: -18.9050,
                lng: 47.5240,
                prix: "20 000 Ar",
                prixEur: "4 €",
                prixNum: 20000,
                note: 4.4,
                description: "L'ambiance 'chaude' à la malgache. Un grand club populaire où tout le monde se mélange pour danser sur du Salegy et de l'électro jusqu'au petit matin. C'est bruyant, joyeux et intense. Animation garantie toute la semaine.",
                image: "images/tana/tana_taxi_be.jpg",
                acces: "Antanimena, bord de route",
                horaires: "18h-5h tous les jours",
                conseil: "L'entrée est souvent gratuite mais conso obligatoire. Surveillez vos affaires.",
                duree: "Nuit blanche",
                siteWeb: "https://www.facebook.com"
            },
            {
                id: 528,
                ville: "Antananarivo",
                nom: "La Teinturerie",
                type: "Sortir",
                lat: -18.9250,
                lng: 47.5350,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.7,
                description: "Le spot arty et culturel. Une galerie d'art qui fait bar et salle de concert. L'ambiance y est alternative, détendue et créative. Idéal pour ceux qui cherchent autre chose que les boîtes de nuit classiques : expos, débats et musique indé.",
                image: "images/tana/tana_la_teinturerie.jpg",
                acces: "Ampasanimalo, près université",
                horaires: "10h-22h (selon événements)",
                conseil: "Vérifiez leur page Facebook pour le programme des vernissages et concerts.",
                duree: "2h",
                siteWeb: "https://www.facebook.com/LaTeinturerieAssociation"
            },
            {
                id: 529,
                ville: "Antananarivo",
                nom: "Le Glacier",
                type: "Sortir",
                lat: -18.9080,
                lng: 47.5255,
                prix: "15 000 Ar",
                prixEur: "3 €",
                prixNum: 15000,
                note: 4.2,
                description: "Mythique et sulfureux. Situé en plein Analakely, c'est le cabaret le plus célèbre de Tana. Concerts de Tsapiky et Salegy tous les soirs. L'ambiance est très locale, parfois un peu interlope, mais c'est une expérience brute de la nuit malgache.",
                image: "images/tana/tana_le_glacier.jpg",
                acces: "Avenue de l'Indépendance",
                horaires: "20h-4h",
                conseil: "Pour les amateurs de sensations fortes et d'authenticité brute. À éviter en famille.",
                duree: "Soirée",
                siteWeb: "https://www.hotel-glacier.com"
            },
            {
                id: 530,
                ville: "Antananarivo",
                nom: "Le Piment Café",
                type: "Sortir",
                lat: -18.9100,
                lng: 47.5280,
                prix: "25 000 Ar",
                prixEur: "5 €",
                prixNum: 25000,
                note: 4.6,
                description: "Le temple du cabaret. Un lieu convivial où les plus grands artistes de variété malgache viennent jouer en acoustique ou en groupe. L'ambiance est respectueuse de la musique, on y vient pour écouter et chanter en chœur.",
                image: "images/tana/tana_piment_cafe.jpg",
                acces: "Behoririka",
                horaires: "19h-1h (Soirées cabaret Jeudi/Vendredi)",
                conseil: "Réservez votre table, c'est souvent complet lors des grosses affiches.",
                duree: "Soirée",
                siteWeb: "https://www.facebook.com/pimentcafe"
            },
            {
                id: 531,
                ville: "Ampefy",
                nom: "Chute de la Lily",
                type: "Nature",
                lat: -19.0500,
                lng: 46.7333,
                prix: "2 000 Ar",
                prixEur: "0.5 €",
                prixNum: 2000,
                note: 4.8,
                description: "La star d'Ampefy. Une cascade spectaculaire de 26m de haut qui gronde au milieu des collines verdoyantes volcaniques. La légende raconte qu'une jeune fille nommée Lily y a disparu. C'est un spot photo magnifique et rafraîchissant.",
                image: "images/tana/ampefy_chute_lily.jpg",
                acces: "15 min de route depuis Ampefy village",
                horaires: "Journée",
                conseil: "Ne manquez pas le point de vue d'en haut avant de descendre au pied de la chute.",
                duree: "1h30",
                siteWeb: "https://madagascar-tourisme.com"
            },
            {
                id: 532,
                ville: "Ampefy",
                nom: "Geysers d'Analavory",
                type: "Nature",
                lat: -19.0000,
                lng: 46.7500,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Un phénomène géologique curieux. Ce ne sont pas des geysers volcaniques chauds, mais des puits artésiens d'eau froide riche en gaz carbonique qui jaillissent du sol, créant des formations de travertin jaune et rouge étonnantes. On peut s'y doucher !",
                image: "images/tana/ampefy_geysers.jpg",
                acces: "20km d'Ampefy vers Analavory",
                horaires: "Journée",
                conseil: "Apportez votre maillot pour une douche naturelle massante (argile bénéfique).",
                duree: "1h",
                siteWeb: "https://madagascar-tourisme.com"
            },
            {
                id: 533,
                ville: "Ampefy",
                nom: "Ilot de la Vierge",
                type: "Culture",
                lat: -19.0300,
                lng: 46.7400,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.9,
                description: "Le centre spirituel et géographique. Considéré comme le centre de gravité de Madagascar, cet îlot sur le lac Itasy offre une vue panoramique époustouflante sur toute la région. Une statue de la Vierge veille au sommet. Silence et contemplation.",
                image: "images/tana/ampefy_ilot_vierge.jpg",
                acces: "Route panoramique depuis Ampefy (piste)",
                horaires: "Coucher de soleil recommandé",
                conseil: "Le meilleur spot pour voir l'étendue du lac Itasy et ses volcans éteints.",
                duree: "1h",
                siteWeb: "https://madagascar-tourisme.com"
            },
            {
                id: 534,
                ville: "Antsirabe",
                nom: "Lac Tritriva",
                type: "Nature",
                lat: -19.9333,
                lng: 46.9500,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.8,
                description: "Le lac mystérieux. Un cratère volcanique profond aux eaux vert émeraude sombre. La légende des 'amants maudits' (Romeo & Juliette malgaches) qui s'y sont noyés hante les lieux. La forme du lac ressemble à la carte de Madagascar.",
                image: "images/tana/antsirabe_lac_tritriva.jpg",
                acces: "15km d'Antsirabe (piste)",
                horaires: "8h-17h",
                conseil: "Faites le tour du cratère à pied (30 min) pour apprécier la couleur changeante de l'eau. Baignade interdite (sacré).",
                duree: "Demi-journée",
                siteWeb: "https://madagascar-tourisme.com"
            },
            {
                id: 535,
                ville: "Antsirabe",
                nom: "Cathédrale Notre-Dame de la Salette",
                type: "Culture",
                lat: -19.8667,
                lng: 47.0333,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.6,
                description: "Un chef-d'œuvre architectural. Cette immense cathédrale fait la fierté de la 'Ville d'Eau'. Son architecture mêlant gothique et roman, avec ses briques rouges typiques des Hautes Terres, est majestueuse. Le parvis est un lieu de vie animé.",
                image: "images/tana/antsirabe_cathedrale.jpg",
                acces: "Centre-ville Antsirabe",
                horaires: "8h-18h",
                conseil: "Profitez-en pour faire un tour en pousse-pousse (la spécialité locale) juste devant.",
                duree: "45 min",
                siteWeb: "https://diocese-antsirabe.mg"
            },
            {
                id: 6,
                ville: "Diego-Suarez",
                nom: "Plage de Ramena",
                type: "Plage",
                lat: -12.2167,
                lng: 49.3833,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Bien plus qu'une simple plage, Ramena est un village de pêcheurs vibrant. La plage de sable blanc s'étire sur des kilomètres, bordée de gargotes servant du poisson grillé fraîchement pêché. L'ambiance y est détendue et festive le dimanche.",
                image: "images/iles/plage-ramena.jpg",
                acces: "18 km de Diego, taxi-brousse ou taxi",
                horaires: "Accessible 24h/24",
                conseil: "Commandez des brochettes de poisson dans une gargote le midi. Le soir, attention aux moustiques !",
                duree: "Demi-journée",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 7,
                ville: "Diego-Suarez",
                nom: "Mer d'Émeraude",
                type: "Plage",
                lat: -12.3333,
                lng: 49.4833,
                prix: "80 000 Ar",
                prixEur: "18 €",
                prixNum: 80000,
                note: 4.8,
                description: "Un lagon aux couleurs irréelles, digne des plus belles cartes postales. L'eau peu profonde et turquoise est idéale pour le snorkeling et le kitesurf. Le déjeuner se prend souvent sur un îlot désert avec au menu : poisson grillé et riz coco.",
                image: "images/iles/mer-emeraude.jpg",
                acces: "Excursion bateau depuis Ramena (45 min)",
                horaires: "Départ 8h-9h, retour 16h-17h",
                conseil: "Le vent souffle fort (Varatraza) l'après-midi, idéal pour le kite mais protégez-vous du sable.",
                duree: "Journée",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 8,
                ville: "Diego-Suarez",
                nom: "Les Trois Baies",
                type: "Plage",
                lat: -12.25,
                lng: 49.4167,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.6,
                description: "Une succession spectaculaire de baies sauvages : la Baie des Dunes, la Baie des Pigeons et la Baie des Sakalava. C'est un paradis pour les marcheurs et les photographes, offrant des panoramas contrastés entre sable blanc, eau turquoise et rochers sombres.",
                image: "images/iles/trois-baies.jpg",
                acces: "Excursion bateau depuis Diego",
                horaires: "Journée complète recommandée",
                conseil: "Faites la balade à pied d'une baie à l'autre (environ 3h de marche facile) pour profiter pleinement des paysages.",
                duree: "Demi-journée",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 9,
                ville: "Diego-Suarez",
                nom: "Montagne d'Ambre",
                type: "Nature",
                lat: -12.5186,
                lng: 49.1769,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.7,
                description: "Une oasis de fraîcheur tropicale qui contraste avec la chaleur de Diego. Cette forêt pluviale abrite des cascades sacrées, des lacs de cratère et une biodiversité incroyable, dont le plus petit caméléon du monde, le Brookesia.",
                image: "images/spots/montagne-ambre.jpg",
                acces: "30 km au sud de Diego par RN6, depuis Joffreville",
                horaires: "8h-16h avec guide obligatoire",
                conseil: "Prévoyez un vêtement de pluie et de bonnes chaussures, le climat est humide et plus frais qu'en ville.",
                duree: "4h à 6h",
                siteWeb: "https://www.parcs-madagascar.com/parcs/montagne%20d%20ambre.php"
            },
            {
                id: 10,
                ville: "Diego-Suarez",
                nom: "Tsingy Rouge",
                type: "Spot Local",
                lat: -12.9165,
                lng: 49.2936,
                prix: "50 000 Ar",
                prixEur: "12 €",
                prixNum: 50000,
                note: 4.8,
                description: "Une curiosité géologique unique, différente des Tsingy gris. Ici, l'érosion a sculpté le grès rouge et la latérite pour former des cheminées de fée aux couleurs flamboyantes. Le contraste avec la végétation verte est saisissant.",
                image: "images/spots/tsingy-rouge.jpg",
                acces: "60 km de Diego, route de Joffreville",
                horaires: "Lever/coucher de soleil recommandé",
                conseil: "La lumière de fin d'après-midi (Golden Hour) rend le rouge de la roche particulièrement intense.",
                duree: "2h",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 11,
                ville: "Diego-Suarez",
                nom: "Windsor Castle",
                type: "Spot Local",
                lat: -12.35,
                lng: 49.3,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Un ancien fort militaire perché sur un énorme monolithe rocheux. L'ascension est un peu raide mais la récompense est là : une vue panoramique époustouflante sur le Canal du Mozambique, l'Océan Indien et la baie de Diego.",
                image: "images/spots/windsor-castle.jpg",
                acces: "Accessible depuis Diego, sentier de randonnée",
                horaires: "Matinée recommandée (chaleur)",
                conseil: "Partez très tôt le matin pour éviter la grosse chaleur pendant la montée des marches.",
                duree: "3h",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 12,
                ville: "Diego-Suarez",
                nom: "Montagne des Français",
                type: "Nature",
                lat: -12.3200,
                lng: 49.3400,
                prix: "20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.6,
                description: "Un chemin de croix grimpe le long de cette montagne calcaire recouverte de forêt sèche et de baobabs. Au sommet, les ruines d'un fort colonial et une vue imprenable sur toute la baie de Diego vous attendent. C'est aussi un spot d'escalade réputé.",
                image: "images/spots/montagne-francais.jpg",
                acces: "7 km au sud de Diego, accessible en taxi",
                horaires: "6h-18h, guide recommandé",
                conseil: "L'ascension est exposée au soleil, faites-la très tôt le matin ou en fin de journée pour la vue.",
                duree: "3h",
                siteWeb: "http://montagnedesfrancais-anosiravo.com"
            },
            {
                id: 60,
                ville: "Anivorano",
                nom: "Lac Sacré Antagnavo",
                type: "Culture",
                lat: -12.9667,
                lng: 49.2333,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.6,
                description: "Un lieu chargé de mystère et de légendes. Selon la croyance, ce lac serait un ancien village dont les habitants, ayant refusé de l'eau à un voyageur assoiffé (un sorcier déguisé), furent maudits et transformés en crocodiles. Le village fut englouti par les eaux. Aujourd'hui, on y vient pour voir les nombreux crocodiles sacrés qui répondent à l'appel des gardiens et pour faire des offrandes.",
                image: "images/spots/lac-antagnavo.jpg",
                acces: "75 km au sud de Diego sur la RN6, après Anivorano Nord",
                horaires: "Visites guidées en journée",
                conseil: "Apportez de la viande (le gardien s'en occupe) pour faire sortir les crocodiles. Respectez scrupuleusement les fady (tabous) du lieu.",
                duree: "2h",
                siteWeb: "https://primemadaguide.com/guide-des-destinations-de-madagascar-lac-sacr%C3%A9-anivorano.html"
            },

            {
                id: 13,
                ville: "Diego-Suarez",
                nom: "Restaurant Le Melville",
                type: "Restaurant",
                lat: -12.2756,
                lng: 49.2934,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.7,
                description: "Une adresse historique avec vue sur la baie. Le Melville propose une cuisine généreuse centrée sur les produits de la mer. Le cadre, un peu hors du temps, rappelle l'époque coloniale avec ses boiseries et sa grande terrasse.",
                image: "images/restaurants/le-melville.jpg",
                acces: "Front de mer de Diego, centre-ville",
                horaires: "11h-22h, fermé lundi",
                conseil: "Commandez le crabe farci, c'est leur spécialité reconnue dans toute la ville.",
                duree: "2h",
                siteWeb: "https://www.hotels-diego.com/en/restaurant-bar"
            },
            {
                id: 14,
                ville: "Diego-Suarez",
                nom: "Restaurant La Cambusa",
                type: "Restaurant",
                lat: -12.2745,
                lng: 49.2923,
                prix: "40 000 Ar",
                prixEur: "9 €",
                prixNum: 40000,
                note: 4.8,
                description: "Le repaire des gourmands. Tenu par des Italiens, ce restaurant allie la fraîcheur des produits malgaches au savoir-faire italien. Pizzas au feu de bois excellentes et pâtes fraîches maison, le tout dans une ambiance bistro décontractée.",
                image: "images/restaurants/la-cambusa.jpg",
                acces: "Centre-ville de Diego, rue Colbert",
                horaires: "12h-14h et 19h-22h",
                conseil: "Leurs carpaccios de poisson (esadon, thon) sont d'une fraîcheur absolue, à tester en entrée.",
                duree: "1h30",
                siteWeb: "https://www.tripadvisor.fr/Restaurant_Review-g303985-d2217997-Reviews-La_Cambusa-Antsiranana_Diego_Suarez_Diana_Region.html"
            },
            {
                id: 15,
                ville: "Diego-Suarez",
                nom: "Nosy Lonjo (Pain de Sucre)",
                type: "Nature",
                lat: -12.2634,
                lng: 49.3123,
                prix: "40 000 Ar",
                prixEur: "9 €",
                prixNum: 40000,
                note: 4.6,
                description: "Ce cône volcanique parfait émerge de la baie tel un gardien sacré. Appelé 'Pain de Sucre' pour sa forme, il est couvert de végétation et abrite des rituels traditionnels. On ne peut généralement pas y débarquer, mais en faire le tour en bateau est magique.",
                image: "images/iles/nosy-lonjo.png",
                acces: "Excursion bateau depuis Diego (30 min)",
                horaires: "Matinée recommandée",
                conseil: "Demandez à votre piroguier de s'approcher doucement pour voir les oiseaux nichant dans la paroi.",
                duree: "1h",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 16,
                ville: "Diego-Suarez",
                nom: "Grotte des Pêcheurs",
                type: "Spot Local",
                spotLocal: true,
                lat: -12.2389,
                lng: 49.3012,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.8,
                description: "Un lieu fascinant, à la fois merveille naturelle et temple à ciel ouvert. Cette grotte s'ouvre sur la mer et sert de lieu de culte aux ancêtres. L'atmosphère y est solennelle et mystérieuse, bercée par le bruit des vagues.",
                image: "images/spots/grotte-pecheurs.jpg",
                acces: "Plage nord de Ramena à marée basse uniquement - Demander Paul au marché aux poissons qui guide gratuitement",
                contactLocal: "Paul, pêcheur au marché central de Diego (matin 6h-9h)",
                respect: "Retirer chaussures à l'entrée, ne pas toucher aux offrandes, silence",
                conseil: "Vérifiez impérativement les horaires de marée, la grotte est inaccessible à marée haute !",
                duree: "45 min",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            {
                id: 17,
                ville: "Nosy Be",
                nom: "Plage d'Andilana",
                type: "Incontournable",
                lat: -13.2205,
                lng: 48.1824,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.8,
                description: "Sans doute la plage la plus célèbre de l'île aux Parfums. Andilana offre deux baies aux eaux cristallines, séparées par une pointe rocheuse. C'est le spot baignade par excellence, avec des eaux calmes et peu profondes, idéales pour les familles.",
                image: "images/iles/plage-andilana.jpg",
                acces: "Nord de Nosy Be, 25 km de Hell-Ville",
                horaires: "Accessible 24h/24",
                conseil: "Allez-y en semaine pour éviter la foule du dimanche, où les familles locales viennent pique-niquer.",
                duree: "Demi-journée",
                siteWeb: "https://andilanaresort.com"
            },
            {
                id: 18,
                ville: "Nosy Be",
                nom: "Nosy Komba",
                type: "Incontournable",
                lat: -13.4619,
                lng: 48.3514,
                prix: "20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.7,
                description: "Surnommée l'île aux lémuriens, Nosy Komba est une montagne volcanique émergée de la forêt. Ici, pas de voitures, tout se fait à pied. Les lémuriens Macaco viennent manger dans votre main, et le village d'Ampangorinana est célèbre pour ses nappes brodées.",
                image: "images/iles/nosy-komba.jpg",
                acces: "Bateau depuis Ambatoloaka (25 min)",
                horaires: "Excursion journée ou demi-journée",
                conseil: "Prévoyez des bananes (souvent fournies par les guides) pour attirer les lémuriens sur vos épaules pour la photo !",
                duree: "3h",
                siteWeb: "https://nosykomba.com"
            },
            {
                id: 19,
                ville: "Nosy Be",
                nom: "Parc Marin Nosy Tanikely",
                type: "Nature",
                lat: -13.4833,
                lng: 48.2389,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.9,
                description: "Un véritable aquarium naturel protégé. Nosy Tanikely est une réserve marine où il suffit d'un masque et d'un tuba pour nager avec des tortues imbriquées, des mérous et des milliers de poissons colorés à quelques mètres du bord.",
                image: "images/iles/nosy-tanikely.jpg",
                acces: "Excursion bateau, tous clubs de plongée",
                horaires: "Sortie journée avec déjeuner",
                conseil: "Montez jusqu'au phare au sommet de l'île pour une vue panoramique incroyable sur l'archipel.",
                duree: "Demi-journée",
                siteWeb: "https://www.parcs-madagascar.com/parcs/nosy-tanikely.php"
            },
            {
                id: 20,
                ville: "Nosy Be",
                nom: "Nosy Iranja",
                type: "Incontournable",
                lat: -13.5960,
                lng: 47.8228,
                prix: "150 000 Ar",
                prixEur: "35 €",
                prixNum: 150000,
                note: 4.9,
                description: "La perle de Madagascar. Deux îlots (Nosy Iranja Be et Nosy Iranja Kely) reliés par un banc de sable blanc d'un kilomètre, submergé à marée haute. L'eau y est d'un bleu turquoise irréel. C'est aussi un lieu de ponte important pour les tortues.",
                image: "images/iles/nosy-iranja.jpg",
                acces: "Excursion bateau (1h30), départ Hell-Ville",
                horaires: "Journée complète, départ 7h",
                conseil: "Attention au soleil ! Le sable blanc réfléchit énormément, crème solaire haute protection obligatoire.",
                duree: "Journée",
                siteWeb: "https://nosyiranja.com"
            },
            {
                id: 21,
                ville: "Nosy Be",
                nom: "Réserve Naturelle de Lokobe",
                type: "Nature",
                lat: -13.4147,
                lng: 48.3117,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.6,
                description: "Dernier vestige de la forêt primaire sambirano qui recouvrait autrefois l'île. Lokobe est un sanctuaire accessible en pirogue traditionnelle. Vous y verrez le lémurien nocturne (Lepilemur), des boas, des caméléons et une flore exubérante.",
                image: "images/spots/reserve-lokobe.jpg",
                acces: "Sud-est de l'île, accessible en bateau + randonnée",
                horaires: "Excursions guidées matin (fraîcheur)",
                conseil: "L'arrivée en pirogue à rames est magique, profitez du silence pour observer les martins-pêcheurs.",
                duree: "Demi-journée",
                siteWeb: "https://www.parcs-madagascar.com/parcs/lokobe.php"
            },
            {
                id: 22,
                ville: "Nosy Be",
                nom: "Mont Passot",
                type: "Incontournable",
                lat: -13.3214,
                lng: 48.2611,
                prix: "20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.7,
                description: "Le toit de Nosy Be. Ce point culminant offre une vue à 360 degrés sur toute l'île et ses lacs sacrés volcaniques. C'est le rendez-vous incontournable pour un coucher de soleil spectaculaire, un cocktail à la main.",
                image: "images/spots/mont-passot.jpg",
                acces: "Centre de l'île, 15 km de Hell-Ville",
                horaires: "Lever/coucher de soleil recommandés",
                conseil: "Arrivez au moins 30 minutes avant le coucher du soleil pour avoir une bonne place sur la terrasse panoramique.",
                duree: "1h30",
                siteWeb: "https://nosybe-tourisme.com/que-faire/a-visiter/mont-passot/"
            },
            {
                id: 23,
                ville: "Nosy Be",
                nom: "Lemuria Land",
                type: "Culture",
                lat: -13.3556,
                lng: 48.2834,
                prix: "30 000 Ar",
                prixEur: "7 €",
                prixNum: 30000,
                note: 4.6,
                description: "Une réserve zoologique et botanique privée très bien entretenue. Vous pourrez y voir de près de nombreuses espèces de lémuriens, des crocodiles impressionnants et visiter une distillerie d'ylang-ylang traditionnelle toujours en activité.",
                image: "images/spots/lemuria-land.jpg",
                acces: "Route Hell-Ville - Andilana, bien indiqué",
                horaires: "8h-17h tous les jours",
                conseil: "La visite guidée de la distillerie est incluse, ne la manquez pas pour tout savoir sur l'essence de parfum.",
                duree: "2h",
                siteWeb: "https://lemurialand.com"
            },
            {
                id: 24,
                ville: "Nosy Be",
                nom: "Plage d'Ambatoloaka",
                type: "Incontournable",
                lat: -13.3639,
                lng: 48.2045,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.2,
                description: "Le quartier général de la vie nocturne et touristique. C'est ici que tout se passe : départs d'excursions, restaurants les pieds dans le sable, bars animés. L'ambiance y est festive, bruyante et colorée, mélangeant touristes et locaux.",
                image: "images/iles/plage-ambatoloaka.jpg",
                acces: "5 km de Hell-Ville, taxi ou location",
                horaires: "24h/24, vie nocturne dès 19h",
                conseil: "Parfait pour un apéro au coucher du soleil au 'Badamera', mais préférez Andilana pour le calme absolu.",
                duree: "Soirée",
                siteWeb: "https://nosybe-tourisme.com"
            },
            {
                id: 25,
                ville: "Nosy Be",
                nom: "Nosy Sakatia",
                type: "Nature",
                lat: -13.3108,
                lng: 48.1569,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.7,
                description: "L'île tranquille. Sakatia est authentique, avec ses sentiers de randonnée traversant les champs de vanille et d'orchidées. La plage aux tortues permet de nager avec d'immenses tortues vertes qui viennent brouter les herbiers à marée haute.",
                image: "images/iles/nosy-sakatia.jpg",
                acces: "Bateau (20 min) depuis côte ouest Nosy Be",
                horaires: "Excursion journée avec guide local",
                conseil: "Le déjeuner chez l'habitant sur la plage est souvent un délice (poisson coco).",
                duree: "Demi-journée",
                siteWeb: "https://sakatia.com"
            },
            {
                id: 26,
                ville: "Nosy Be",
                nom: "Restaurant Cacao Beach",
                type: "Restaurant",
                lat: -13.3178,
                lng: 48.2689,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.8,
                description: "Une institution à Andilana. Ce restaurant est littéralement sur le sable. On y mange les pieds dans l'eau des fruits de mer d'une fraîcheur absolue. L'ambiance est décontractée, avec des transats pour la sieste après le repas.",
                image: "images/restaurants/cacao-beach.jpg",
                acces: "Plage d'Andilana, nord de l'île",
                horaires: "10h-22h tous les jours",
                conseil: "Réservez le buffet de fruits de mer du dimanche midi, c'est gargantuesque et très couru !",
                duree: "3h (repas + plage)",
                siteWeb: "https://www.facebook.com/cacaobeachnosybe"
            },
            {
                id: 27,
                ville: "Nosy Be",
                nom: "Restaurant L'Heure Bleue",
                type: "Restaurant",
                lat: -13.3645,
                lng: 48.2823,
                prix: "50 000 Ar",
                prixEur: "12 €",
                prixNum: 50000,
                note: 4.9,
                description: "Le restaurant pour un dîner romantique par excellence. Perché sur une colline dominant la baie de Madirokely, la vue est imprenable. La cuisine est l'une des meilleures de l'île, mêlant gastronomie française et produits locaux.",
                image: "images/restaurants/heure-bleue.jpg",
                acces: "Hell-Ville, près du front de mer",
                horaires: "12h-14h et 19h-22h, fermé dimanche",
                conseil: "La terrasse est petite, réservez votre table en bordure pour avoir la vue plongeante sur la mer.",
                duree: "2h",
                siteWeb: "https://heurebleue.com"
            },
            {
                id: 28,
                ville: "Nosy Be",
                nom: "Plongée Nosy Be",
                type: "Culture",
                lat: -13.3634,
                lng: 48.2789,
                prix: "75 000 Ar",
                prixEur: "18 €",
                prixNum: 75000,
                note: 4.9,
                description: "Découvrez les fonds marins exceptionnels de Nosy Be. Ce centre professionnel vous emmène sur les meilleurs spots : tombants, épaves, et réserve de Tanikely. En saison (octobre-novembre), c'est le spot mondial pour nager avec les requins-baleines.",
                image: "images/iles/plongee-nosy-be.webp",
                acces: "Clubs de plongée à Madirokely, Ambatoloaka",
                horaires: "Sorties matin et après-midi",
                conseil: "Si vous êtes débutant, demandez un baptême à Tanikely, les conditions sont parfaites (peu profond, clair).",
                duree: "Demi-journée",
                siteWeb: "https://nosybe-tourisme.com"
            },
            {
                id: 29,
                ville: "Nosy Be",
                nom: "Distillerie Ylang Ylang",
                type: "Culture",
                lat: -13.3508,
                lng: 48.2831,
                prix: "15 000 Ar",
                prixEur: "3.50 €",
                prixNum: 15000,
                note: 4.5,
                description: "Nosy Be n'est pas l'île aux Parfums pour rien. Visiter une distillerie permet de comprendre le processus ancestral d'extraction de l'essence d'Ylang-Ylang. L'odeur entêtante des fleurs jaunes fraîchement cueillies est inoubliable.",
                image: "images/spots/ylang-ylang-distillerie.jpg",
                acces: "Plusieurs distilleries sur l'île, guides locaux",
                horaires: "8h-16h, meilleur en matinée",
                conseil: "Achetez votre huile essentielle ici, c'est bien moins cher et garanti pur par rapport aux revendeurs de plage.",
                duree: "1h",
                siteWeb: "https://ylang-ylang-nosybe.com"
            },
            {
                id: 30,
                ville: "Nosy Be",
                nom: "Grotte de la Vierge",
                type: "Spot Local",
                spotLocal: true,
                lat: -13.3456,
                lng: 48.2789,
                prix: "5 000 Ar",
                prixEur: "1 €",
                prixNum: 5000,
                note: 4.9,
                description: "Un lieu de syncrétisme religieux étonnant. Cette grotte marine abrite une statue de la Vierge, mais est aussi un lieu de culte pour les esprits locaux. L'accès se fait par la mer, ajoutant au mystère. C'est un endroit calme, respecté et très photogénique.",
                image: "images/spots/grotte-vierge.jpg",
                acces: "En pirogue depuis plage Ambatoloaka - Contacter Marie qui loue sa pirogue et guide (cabane bleue)",
                contactLocal: "Marie, sur la plage d'Ambatoloaka, reconnaissable à sa cabane bleue",
                respect: "Bougie d'offrande recommandée (5000 Ar), silence dans la grotte, respecter les prières en cours",
                conseil: "Parlez à Marie, la gardienne des lieux, elle connaît toutes les histoires et légendes de la grotte.",
                duree: "1h",
                siteWeb: "https://nosybe-tourisme.com"
            },
            {
                id: 31,
                ville: "Mahajanga",
                nom: "Cirque Rouge",
                type: "Incontournable",
                lat: -15.6667,
                lng: 46.3167,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.8,
                description: "Un amphithéâtre naturel sculpté par le vent et la pluie. Le Cirque Rouge est célèbre pour ses cheminées de fée et ses strates de sédiments aux 12 nuances de couleurs, du blanc à l'ocre foncé. C'est aussi un site paléontologique important.",
                image: "images/spots/cirque-rouge.jpg",
                acces: "12 km au nord, piste praticable",
                horaires: "Tôt le matin ou fin d'après-midi (chaleur)",
                conseil: "Ramassez un petit échantillon de sable coloré dans une bouteille (souvenir classique), mais restez raisonnable pour préserver le site.",
                duree: "2h",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 32,
                ville: "Mahajanga",
                nom: "Baobabs Sacrés de Mahabibo",
                type: "Nature",
                lat: -15.7167,
                lng: 46.3500,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Au milieu de la route se dressent majestueusement de gigantesques baobabs. L'un d'eux est particulièrement vénéré : c'est un arbre sacré où les habitants viennent déposer des offrandes et faire des vœux aux ancêtres.",
                image: "images/spots/baobabs-sacres.jpg",
                acces: "Route de Katsepy, 15 km",
                horaires: "Lever et coucher de soleil recommandés",
                conseil: "Respectez les tissus rouges et les objets (bouteilles, pièces) au pied de l'arbre, ne les touchez surtout pas.",
                duree: "30 min",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 33,
                ville: "Mahajanga",
                nom: "Source Sacrée de Marovoay",
                type: "Spot Local",
                spotLocal: true,
                lat: -15.7234,
                lng: 46.3678,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.7,
                description: "Cette source d'eau douce ne tarit jamais et joue un rôle centrale dans la vie spirituelle locale. C'est un lieu de rituels Sakalava où l'on vient demander bénédiction et guérison. L'atmosphère y est paisible et empreinte de respect.",
                image: "images/spots/source-marovoay.jpg",
                acces: "Près de l'école primaire de Marovoay, chemin de terre à gauche après le pont",
                contactLocal: "Demander au directeur de l'école qui indique le chemin",
                respect: "Offrande traditionnelle obligatoire (rhum, miel), ne pas se baigner",
                conseil: "Ne portez pas de rouge (fady/tabou) lors de votre visite à la source.",
                duree: "45 min",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 34,
                ville: "Mahajanga",
                nom: "Plage de Mahajanga",
                type: "Incontournable",
                lat: -15.7167,
                lng: 46.3167,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.6,
                description: "Le 'Bord' est le cœur battant de Mahajanga. Le soir, tout la ville vient s'y promener pour profiter de la brise marine, manger des brochettes et admirer le crépuscule. Le célèbre Baobab géant, emblème de la ville, veille sur les passants.",
                image: "images/iles/plage-mahajanga.jpg",
                acces: "Centre-ville, front de mer (boulevard Poincaré)",
                horaires: "Accessible 24h/24, meilleur au coucher de soleil",
                conseil: "Goûtez absolument aux 'Masikita' (brochettes de zébu) vendues par les marchands ambulants le soir.",
                duree: "Soirée",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 35,
                ville: "Mahajanga",
                nom: "Parc National d'Ankarafantsika",
                type: "Nature",
                lat: -16.3167,
                lng: 46.8167,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.8,
                description: "Un mix unique de forêt sèche, de savane et de zones humides. Le parc est le royaume des oiseaux (le Pygargue de Madagascar y règne) et des lémuriens (Sifaka Coquereli 'danseurs'). Le lac Ravelobe offre des balades en bateau paisibles.",
                image: "images/spots/ankarafantsika.jpg",
                acces: "115 km sur RN4, accessible en taxi-brousse ou 4x4",
                horaires: "7h-17h avec guide obligatoire",
                conseil: "Faites le circuit du canyon pour voir les formations géologiques 'Lavaka', c'est impressionnant.",
                duree: "Journée",
                siteWeb: "https://www.parcs-madagascar.com/parcs/ankarafantsika.php"
            },
            // ==========================================
            // DIEGO SUAREZ - HOTELS (Dormir)
            // ==========================================
            {
                id: 100,
                ville: "Diego-Suarez",
                nom: "Le Grand Hôtel",
                type: "Hotel",
                lat: -12.2714,
                lng: 49.2917,
                prix: "250 000 Ar",
                prixEur: "55 €",
                prixNum: 250000,
                note: 4.5,
                description: "L'adresse de référence pour le luxe à Diego. Situé en plein centre-ville, cet hôtel historique offre des prestations haut de gamme : grande piscine, spa, casino et chambres spacieuses. Idéal pour ceux qui cherchent confort et services irréprochables.",
                image: "images/hotels/grand-hotel-diego.jpg", // Generated
                acces: "Rue Colbert, centre-ville",
                horaires: "Réception 24h/24",
                conseil: "La pâtisserie de l'hôtel est réputée comme la meilleure de la ville, parfaite pour le goûter.",
                duree: "Séjour",
                siteWeb: "http://www.grand-hotel-diego.com"
            },
            {
                id: 101,
                ville: "Diego-Suarez",
                nom: "Suarez Hotel",
                type: "Hotel",
                lat: -12.3056,
                lng: 49.2917,
                prix: "180 000 Ar",
                prixEur: "40 €",
                prixNum: 180000,
                note: 4.6,
                description: "Un havre de paix niché dans un jardin tropical luxuriant. Les bungalows offrent une intimité totale avec vue sur le Pain de Sucre. L'ambiance y est zen et raffinée, loin du tumulte du centre-ville (tout en restant proche).",
                image: "images/hotels/suarez-hotel.jpg", // Generated
                acces: "Route de Ramena, à 10 min du centre",
                horaires: "Réception 24h/24",
                conseil: "Profitez de la piscine à débordement au coucher du soleil, la vue sur la baie est magique.",
                duree: "Séjour",
                siteWeb: "http://www.suarez-hotel.com"
            },
            {
                id: 102,
                ville: "Diego-Suarez",
                nom: "Allamanda Hôtel",
                type: "Hotel",
                lat: -12.2789,
                lng: 49.2934,
                prix: "200 000 Ar",
                prixEur: "45 €",
                prixNum: 200000,
                note: 4.4,
                description: "Le charme colonial au bord de l'eau. Situé en front de mer, l'Allamanda propose des chambres confortables avec balcon donnant sur la baie. C'est un excellent compromis entre standing et authenticité.",
                image: "images/hotels/allamanda-hotel.jpg", // To create based on prompt if needed or reuse seaside generic
                acces: "Rue Richelieu, bord de mer",
                horaires: "Réception 24h/24",
                conseil: "Leur restaurant 'Le Melville' est sur place, pratique pour les dîners gastronomiques sans bouger.",
                duree: "Séjour",
                siteWeb: "http://www.allamanda-hotel.com"
            },

            // ==========================================
            // DIEGO SUAREZ - RESTAURANTS (Manger / Gastronomie)
            // ==========================================
            {
                id: 103,
                ville: "Diego-Suarez",
                nom: "Le Tsara Be Vaovao",
                type: "Restaurant",
                lat: -12.2730,
                lng: 49.2920,
                prix: "50 000 Ar",
                prixEur: "11 €",
                prixNum: 50000,
                note: 4.6,
                description: "Une table incontournable pour les gourmets. Ce restaurant propose une cuisine fusion métissée, mettant à l'honneur les produits locaux (crabe, zébu, vanille) avec une touche française. Le cadre est élégant et le service attentionné.",
                image: "images/restaurants/tsara-be.jpg", // Generated generic seafood/elegant
                acces: "Centre-ville, proche marché",
                horaires: "Midi et Soir, fermé dimanche",
                conseil: "Leur filet de zébu au poivre vert de Madagascar est un classique indémodable.",
                duree: "2h",
                siteWeb: "https://www.tripadvisor.com"
            },
            // Note: La Cambusa et Le Melville sont déjà présents (IDs 13 et 14)

            // ==========================================
            // DIEGO SUAREZ - BARS & NIGHTLIFE (Sortir)
            // ==========================================
            {
                id: 104,
                ville: "Diego-Suarez",
                nom: "Taxi Be",
                type: "Boîte de nuit",
                lat: -12.2710,
                lng: 49.2890,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.3,
                description: "L'institution de la nuit à Diego ! Plus qu'une boîte de nuit, c'est un monument. Tout le monde s'y retrouve : locaux, touristes, expats. L'ambiance est survoltée chaque soir avec concerts live de Salegy et DJ sets jusqu'au petit matin.",
                image: "images/nightlife/taxi-be.jpg", // Generated
                acces: "Rue Colbert (impossible de le rater !)",
                horaires: "21h - Aube",
                respect: "L'ambiance est 'chaude' mais bon enfant, restez vigilant comme partout la nuit.",
                conseil: "Arrivez vers 23h pour le début du concert live, c'est là que l'ambiance décolle vraiment.",
                duree: "Soirée",
                siteWeb: "https://www.facebook.com/taxibediego"
            },
            {
                id: 105,
                ville: "Diego-Suarez",
                nom: "La Bodega",
                type: "Bar",
                lat: -12.2715,
                lng: 49.2895,
                prix: "15 000 Ar",
                prixEur: "3.50 €",
                prixNum: 15000,
                note: 4.5,
                description: "Le repaire cool et branché de la rue Colbert. Ambiance tapas, cocktails soignés et musique latine/rock. C'est l'endroit parfait pour commencer la soirée (before) avant d'aller danser. La terrasse permet d'observer l'animation de la rue.",
                image: "images/nightlife/la-bodega.jpg", // Generic lively bar
                acces: "Rue Colbert",
                horaires: "18h - 2h",
                conseil: "Leurs mojitos sont réputés pour être les meilleurs de la ville (avec menthe fraîche locale !).",
                duree: "2h",
                siteWeb: "https://www.facebook.com/labodegadiego"
            },
            {
                id: 106,
                ville: "Diego-Suarez",
                nom: "Nouvel Hôtel (New Bar)",
                type: "Boîte de nuit",
                lat: -12.2725,
                lng: 49.2885,
                prix: "20 000 Ar",
                prixEur: "4.50 €",
                prixNum: 20000,
                note: 4.2,
                description: "Un club plus sélect et climatisé, souvent préféré pour finir la soirée dans une ambiance plus 'clubbing' international. Le cadre est plus moderne que le Taxi Be, attirant une jeunesse dorée et les touristes.",
                image: "images/nightlife/nouvel-hotel-club.jpg", // Generic club
                acces: "Rue Colbert",
                horaires: "23h - Aube",
                conseil: "Tenue correcte exigée (pantalon pour les hommes), l'ambiance est un peu plus chic.",
                duree: "Nuit",
                siteWeb: "https://www.facebook.com"
            }
            ,
            {
                id: 36,
                ville: "Mahajanga",
                nom: "Katsepy et le Phare",
                type: "Nature",
                lat: -15.7456,
                lng: 46.2234,
                prix: "15 000 Ar",
                prixEur: "3.50 €",
                prixNum: 15000,
                note: 4.5,
                description: "Une escapade hors du temps. Après la traversée de l'estuaire en bac, vous arrivez dans un village de brousse paisible. Les lémuriens à couronne viennent saluer près du phare, et l'ambiance est totalement déconnectée de la ville.",
                image: "images/spots/katsepy-phare.jpg",
                acces: "Bac depuis le port de Mahajanga (30 min de traversée)",
                horaires: "Bacs : 6h, 8h, 11h, 14h, 16h",
                conseil: "Goûtez au crabe à la noix de coco préparé par Mme Chabaud, une institution locale à Katsepy.",
                duree: "Demi-journée",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 37,
                ville: "Mahajanga",
                nom: "Grotte d'Anjohibe",
                type: "Nature",
                lat: -15.5234,
                lng: 46.8567,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.7,
                description: "Une aventure pour y aller, mais le site est grandiose. Un réseau de grottes immenses, des piscines naturelles d'eau douce vert émeraude et une cascade nichée dans la verdure. Les lémuriens et les perroquets peuplent les arbres alentour.",
                image: "images/spots/grotte-anjohibe.jpg",
                acces: "85 km sur RN4 puis piste. Excursion journée avec guide local",
                horaires: "Excursion départ 7h, retour 17h",
                conseil: "La piste est difficile, un vrai 4x4 est indispensable. Partez très tôt le matin.",
                duree: "Journée complète",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 38,
                ville: "Mahajanga",
                nom: "Restaurant Chez Karon",
                type: "Restaurant",
                lat: -15.7178,
                lng: 46.3189,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.8,
                description: "Une institution culinaire face à la mer. Chez Karon est célèbre pour ses fruits de mer ultra-frais et ses plats généreux : langoustes grillées, crabes farcis, crevettes géantes. Le cadre est simple mais l'assiette est royale.",
                image: "images/restaurants/chez-karon.jpg",
                acces: "Boulevard Poincaré, front de mer",
                horaires: "11h-22h tous les jours",
                conseil: "Leur 'Capitaine à la plancha' est un délice absolu, demandez la sauce à l'ail à part.",
                duree: "2h",
                siteWeb: "https://www.facebook.com/ChezKaronMajunga"
            },
            {
                id: 39,
                ville: "Mahajanga",
                nom: "Marché Couvert de Mahajanga",
                type: "Culture",
                lat: -15.7156,
                lng: 46.3145,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.4,
                description: "Plongez dans l'authenticité de Majunga. Ce marché couvert regorge d'épices odorantes, de fruits exotiques colorés et de poissons séchés. C'est aussi le meilleur endroit pour acheter le célèbre artisanat Sakalava en raphia et en bois.",
                image: "images/villes/marche-couvert-mahajanga.jpg",
                acces: "Centre-ville, rue du Commerce",
                horaires: "5h-18h, meilleur en matinée",
                conseil: "Achetez ici votre poivre sauvage de Madagascar et de la vanille, les prix sont bien meilleurs qu'en boutique.",
                duree: "1h",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 40,
                ville: "Mahajanga",
                nom: "Complexe Sportif Ankorondrano",
                type: "Culture",
                lat: -15.7234,
                lng: 46.3212,
                prix: "5 000 Ar",
                prixEur: "1 €",
                prixNum: 5000,
                note: 4.3,
                description: "Le poumon sportif de la ville. Avec sa piscine olympique (rare dans la région) et ses terrains de sport, c'est le lieu de rencontre de la jeunesse locale. L'ambiance y est dynamique et conviviale, parfaite pour une pause active.",
                image: "images/villes/complexe-sportif-ankorondrano.jpg",
                acces: "Quartier Ankorondrano, bien indiqué",
                horaires: "8h-18h en semaine, 8h-20h weekend",
                conseil: "La piscine est très fréquentée le mercredi après-midi et le week-end, préférez le matin pour nager.",
                duree: "2h",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 41,
                ville: "Andasibe",
                nom: "Parc National Andasibe-Mantadia",
                type: "Nature",
                lat: -18.9333,
                lng: 48.4167,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.8,
                description: "L'un des parcs les plus visités et pour cause : c'est le seul endroit où l'on peut entendre le chant puissant de l'Indri, le plus grand lémurien vivant. La forêt de brume, les orchidées rares et les caméléons de Parson géants créent une ambiance jurassique.",
                image: "images/spots/andasibe-mantadia.jpg",
                acces: "RN2, 140 km d'Antananarivo (3h)",
                horaires: "Circuits 4h à 6h avec guide obligatoire",
                conseil: "Le matin très tôt (6h-7h) est le meilleur moment pour entendre le chant des Indris.",
                duree: "4h",
                siteWeb: "https://www.parcs-madagascar.com/parcs/andasibe-mantadia.php"
            },
            {
                id: 42,
                ville: "Andasibe",
                nom: "Réserve de Vakona",
                type: "Nature",
                lat: -18.9350,
                lng: 48.4200,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.7,
                description: "Une expérience inoubliable pour les familles. Sur « l'île aux lémuriens », les animaux sont en liberté et n'hésitent pas à sauter sur vos épaules pour réclamer une banane. C'est l'occasion unique de voir de très près des espèces difficiles à observer en forêt dense.",
                image: "images/spots/reserve-vakona.jpg",
                acces: "À côté du parc, bien indiqué",
                horaires: "8h-17h tous les jours",
                conseil: "Attention à vos lunettes de soleil et chapeaux, les lémuriens sont des petits voleurs espiègles !",
                duree: "2h",
                siteWeb: "https://vakonaforestlodge.com"
            },
            {
                id: 43,
                ville: "Andasibe",
                nom: "Cascade Cachée",
                type: "Spot Local",
                spotLocal: true,
                lat: -18.9389,
                lng: 48.4312,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.8,
                description: "Un secret bien gardé à l'écart des circuits classiques. Cette petite cascade se jette dans un bassin naturel entouré de fougères arborescentes. L'eau y est fraîche et revigorante, idéale pour se baigner en toute tranquillité.",
                image: "images/spots/cascade-cachee.jpg",
                acces: "Sentier derrière le Lodge Vakona (non balisé) - Demander Jean, guide local qui connaît le chemin",
                contactLocal: "Jean, guide à l'entrée de Vakona (gilet orange)",
                respect: "Ne pas laisser de déchets, baignade autorisée",
                conseil: "Le sentier peut être glissant après la pluie, prévoyez de bonnes chaussures ou des sandales de marche.",
                duree: "1h30",
                siteWeb: "https://vakonaforestlodge.com"
            },
            {
                id: 44,
                ville: "Isalo",
                nom: "Parc National de l'Isalo",
                type: "Incontournable",
                lat: -22.5833,
                lng: 45.3667,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.9,
                description: "Le Colorado malgache. Un paysage ruiniforme de grès jurassique, entaillé de canyons profonds. On passe de la savane aride à des oasis de fraîcheur luxuriantes en quelques pas. C'est un parc grandiose, sacré pour l'ethnie Bara qui y enterre ses morts.",
                image: "images/spots/parc-isalo.jpg",
                acces: "RN7, entre Tuléar et Fianarantsoa",
                horaires: "Circuits à la journée avec guide obligatoire",
                conseil: "Ne manquez pas le coucher de soleil à la 'Fenêtre de l'Isalo', un classique mais toujours spectaculaire.",
                duree: "Journée",
                siteWeb: "https://www.parcs-madagascar.com/parcs/isalo.php"
            },
            {
                id: 45,
                ville: "Isalo",
                nom: "Piscine Naturelle",
                type: "Nature",
                lat: -22.5500,
                lng: 45.3833,
                prix: "Inclus parc",
                prixEur: "Inclus",
                prixNum: 0,
                note: 4.8,
                description: "La récompense après la marche. Une vasque d'eau cristalline alimentée par une cascade, entourée de pandanus et de palmiers, le tout encaissé dans la roche. C'est l'image d'Épinal de l'Isalo, un petit paradis perdu.",
                image: "images/spots/piscine-naturelle.jpg",
                acces: "Circuit de 2-3h dans le parc",
                horaires: "Matin recommandé (moins de monde)",
                conseil: "L'eau est très fraîche, même en été, ça surprend après la chaleur du canyon !",
                duree: "1h (pause)",
                siteWeb: "https://www.parcs-madagascar.com/parcs/isalo.php"
            },
            {
                id: 46,
                ville: "Isalo",
                nom: "Point de Vue Secret du Canyon",
                type: "Spot Local",
                spotLocal: true,
                lat: -22.5678,
                lng: 45.3945,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.9,
                description: "Pour ceux qui aiment sortir des sentiers battus. Ce point de vue offre une perspective unique et vertigineuse sur l'immensité des canyons de l'Isalo, loin de la foule de la Fenêtre classique. Le silence y est absolu.",
                image: "images/spots/point-vue-canyon.jpg",
                acces: "Sentier non balisé à 500m de la Fenêtre de l'Isalo - Guide familial obligatoire",
                contactLocal: "Famille Rakoto au village de Ranohira, demander 'Papa Koto'",
                respect: "Coucher de soleil uniquement, ne pas sortir du sentier",
                conseil: "Demandez à Papa Koto de vous raconter l'histoire des tombeaux que l'on aperçoit dans la falaise en face.",
                duree: "1h",
                siteWeb: "https://www.parcs-madagascar.com"
            },
            {
                id: 47,
                ville: "Ifaty",
                nom: "Plage d'Ifaty / Mangily",
                type: "Plage",
                lat: -23.1500,
                lng: 43.6167,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Station balnéaire décontractée protégée par un immense lagon. Ici, on vit au rythme des marées et des pêcheurs Vezo. La forêt épineuse de l'arrière-pays, avec ses baobabs bouteilles, est tout aussi fascinante que le récif corallien.",
                image: "images/iles/plage-ifaty.jpg",
                acces: "27 km au nord de Tuléar par piste",
                horaires: "Accessible 24h/24",
                conseil: "Faites une sortie en pirogue Vezo à balancier tôt le matin pour aller voir le récif.",
                duree: "Séjour",
                siteWeb: "https://madagascar-tourisme.com"
            },
            {
                id: 48,
                ville: "Ifaty",
                nom: "Forêt de Baobabs de Mangily",
                type: "Nature",
                lat: -23.1667,
                lng: 43.6000,
                prix: "15 000 Ar",
                prixEur: "3.50 €",
                prixNum: 15000,
                note: 4.6,
                description: "Une forêt digne d'un conte de fées. Ici, les baobabs prennent des formes étranges (bouteilles, carottes) pour stocker l'eau. La forêt abrite aussi des oiseaux endémiques rares et des plantes succulentes adaptées à la sécheresse extrême.",
                image: "images/spots/foret-baobabs-mangily.jpg",
                acces: "Village de Mangily, guide local recommandé",
                horaires: "Matin ou fin d'après-midi (chaleur)",
                conseil: "Visitez le parc 'Mosa' juste à côté pour voir des lémuriens et des tortues radiata.",
                duree: "1h30",
                siteWeb: "https://www.reniala.com"
            },
            {
                id: 49,
                ville: "Ifaty",
                nom: "Arbre Millénaire Sacré",
                type: "Spot Local",
                spotLocal: true,
                lat: -23.1723,
                lng: 43.5978,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.9,
                description: "Un géant de la nature. Ce baobab a plus de 1000 ans et une circonférence impressionnante. C'est un arbre sacré pour les Vezo, qui le considèrent comme la demeure des esprits. On y vient pour des cérémonies et des offrandes.",
                image: "images/spots/arbre-millenaire-sacre.jpg",
                acces: "Intérieur des terres à 2 km d'Ifaty - Pas de panneau, chef du village montre le chemin",
                contactLocal: "Chef du village d'Ifaty (mairie)",
                respect: "Offrande traditionnelle obligatoire (rhum, tabac), ne pas toucher l'arbre",
                conseil: "Soyez très respectueux et ne touchez l'arbre que si le guide vous y invite explicitement.",
                duree: "45 min",
                siteWeb: "https://madagascar-tourisme.com"
            },
            {
                id: 50,
                ville: "Ankarana",
                nom: "Réserve Spéciale de l'Ankarana",
                type: "Incontournable",
                lat: -12.9167,
                lng: 49.0833,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.8,
                description: "Des Tsingy gris acérés comme des lames de rasoir, une forêt sèche décidue et des grottes immenses abritant des chauves-souris. Ce parc est une aventure géologique. Le 'Pont Suspendu' au-dessus des Tsingy est le spot photo incontournable.",
                image: "images/spots/ankarana.jpg",
                acces: "108 km au sud de Diego-Suarez",
                horaires: "Circuits guidés, harnais fourni",
                conseil: "Il fait très chaud dans les Tsingy (réverbération). Partez à l'aube et prenez beaucoup d'eau.",
                duree: "Journée",
                siteWeb: "https://www.parcs-madagascar.com/parcs/ankarana.php"
            },
            {
                id: 51,
                ville: "Ankarana",
                nom: "Grottes des Chauves-Souris",
                type: "Nature",
                lat: -12.9234,
                lng: 49.1289,
                prix: "Inclus parc",
                prixEur: "Inclus",
                prixNum: 0,
                note: 4.7,
                description: "Une exploration souterraine fascinante. Ces grottes calcaires sont ornées de stalactites et stalagmites géantes. Elles abritent d'immenses colonies de chauves-souris frugivores qui s'envolent à la tombée de la nuit.",
                image: "images/spots/grottes-chauves-souris.jpg",
                acces: "Sentier depuis l'entrée du parc",
                horaires: "Lampe frontale obligatoire",
                conseil: "L'odeur de guano peut être forte, un foulard ou un masque peut être utile.",
                duree: "1h",
                siteWeb: "https://www.parcs-madagascar.com/parcs/ankarana.php"
            },
            {
                id: 52,
                ville: "Ankarana",
                nom: "Grotte Interdite (Anjohibe)",
                type: "Spot Local",
                spotLocal: true,
                lat: -12.9312,
                lng: 49.1345,
                prix: "20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.8,
                description: "Grotte sacrée par excellence. Elle abrite les sépultures royales de la tribu Antakarana. L'accès est strictement réglementé et soumis à l'approbation des ancêtres via les gardiens traditionnels. C'est un lieu chargée d'histoire et de mystère.",
                image: "images/spots/grotte-interdite-anjohibe.jpg",
                acces: "Autorisation du chef Antakarana obligatoire - Contacter Papa Solo à Antsiranana qui organise",
                contactLocal: "Papa Solo (guide agréé), bureau près du marché central Diego",
                respect: "Interdiction photos, offrande obligatoire, vêtements couvrants",
                conseil: "Prévoyez un budget pour les offrandes rituelles (miel, rhum, zébu parfois selon les cérémonies).",
                duree: "Demi-journée",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 53,
                ville: "Mananara",
                nom: "Parc National Mananara-Nord",
                type: "Incontournable",
                lat: -16.1667,
                lng: 49.7667,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.6,
                description: "L'un des parcs les plus sauvages. Il combine une réserve marine et une forêt humide de basse altitude. C'est le seul endroit où l'on peut espérer voir l'Aye-Aye à l'état sauvage la nuit, ainsi que les baleines à bosse en saison.",
                image: "images/spots/parc-mananara-nord.jpg",
                acces: "Côte est, 250 km de Toamasina (difficile)",
                horaires: "Excursions guidées",
                conseil: "L'accès est difficile (piste ou bateau), c'est une expédition pour les aventuriers, pas pour le tourisme de masse.",
                duree: "2 jours",
                siteWeb: "https://www.parcs-madagascar.com/parcs/mananara-nord.php"
            },
            {
                id: 54,
                ville: "Mananara",
                nom: "Parc National Nosy Atafana",
                type: "Nature",
                lat: -16.1833,
                lng: 49.8000,
                prix: "20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.7,
                description: "Un parc marin exceptionnel situé au large de la côte Est. Il protège des écosystèmes coralliens préservés. C'est l'un des rares endroits où la forêt humide dense rejoint presque la mer, créant des paysages uniques de jungle et de plage.",
                image: "images/spots/parc-mananara-nord.jpg",
                acces: "Pirogue depuis Mananara (15 min)",
                horaires: "Départs matin et après-midi",
                conseil: "C'est un spot de réserve de Biosphère, respectez scrupuleusement les consignes (pas de coquillages, pas de touche au corail).",
                duree: "Demi-journée",
                siteWeb: "https://www.parcs-madagascar.com/parcs/mananara-nord.php"
            },
            {
                id: 55,
                ville: "Mananara",
                nom: "Lac aux Crocodiles Sacrés",
                type: "Spot Local",
                spotLocal: true,
                lat: -16.1734,
                lng: 49.7612,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.8,
                description: "Le repaire des ancêtres. Un lac sacré pour l'ethnie Betsimisaraka où les crocodiles sont vénérés comme des aïeux. Les villageois leur font des offrandes de zébu. Une atmosphère mystique règne ici, entre crainte et respect, au cœur de la forêt.",
                image: "images/spots/lac-crocodiles-sacres.jpg",
                acces: "Forêt à 5 km de Mananara, sentier depuis le village - Parler au gardien du lac",
                contactLocal: "Gardien au village (maison toit rouge)",
                respect: "Interdiction formelle de photographier, ne pas montrer du doigt, offrande requise",
                siteWeb: "https://www.parcs-madagascar.com/parcs/mananara-nord.php"
            },
            {
                id: 56,
                ville: "Diego-Suarez",
                nom: "Les Salines de Diego",
                type: "Spot Local",
                spotLocal: true,
                lat: -12.3174,
                lng: 49.2157,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.6,
                description: "Un paysage lunaire fascinant de 700 hectares. Les bassins de sel s'étendent à perte de vue, changeant de couleur du blanc aveuglant au rose selon la concentration. Un contraste saisissant avec la mangrove verte environnante.",
                image: "images/spots/salines-diego.jpg",
                acces: "7 km à l'ouest de Diego, piste via Anamakia",
                contactLocal: "Association des paludiers (sur place)",
                respect: "Ne pas marcher dans les bassins de récolte",
                conseil: "La lumière de fin d'après-midi crée des reflets spectaculaires sur l'eau.",
                duree: "1h30",
                siteWeb: "http://www.office-tourisme-diego-suarez.com"
            },
            // NOSY BE - HOTELS (Dormir)
            {
                id: 201,
                ville: "Nosy Be",
                nom: "Ravintsara Wellness Hotel",
                type: "Hotel",
                lat: -13.3350,
                lng: 48.1850,
                prix: "Dès 180 €",
                prixEur: "180 €",
                prixNum: 800000,
                note: 4.9,
                description: "Un sanctuaire de bien-être niché dans un jardin luxuriant face à la mer. Bungalows spacieux de grand standing, spa de classe mondiale et gastronomie raffinée.",
                image: "images/hotels/ravintsara.jpg",
                acces: "Côte Ouest, Dzamandzar",
                siteWeb: "https://ravintsara.mg"
            },
            {
                id: 202,
                ville: "Nosy Be",
                nom: "Vanila Hotel & Spa",
                type: "Hotel",
                lat: -13.3400,
                lng: 48.1800,
                prix: "Dès 120 €",
                prixEur: "120 €",
                prixNum: 550000,
                note: 4.7,
                description: "Architecture traditionnelle malgache et confort moderne. Piscines à débordement et vue imprenable sur le coucher de soleil.",
                image: "images/hotels/vanila-hotel.jpg",
                acces: "Ambaro, route de l'Ouest",
                siteWeb: "https://vanila-hotel.com"
            },
            {
                id: 203,
                ville: "Nosy Be",
                nom: "Manga Soa Lodge",
                type: "Hotel",
                lat: -13.3000,
                lng: 48.2500,
                prix: "Dès 200 €",
                prixEur: "200 €",
                prixNum: 900000,
                note: 4.8,
                description: "L'élégance à l'état pur. Ecolodge de luxe isolé sur la côte Est, offrant intimité totale et plage privée.",
                image: "images/hotels/manga-soa.jpg",
                acces: "Befefika, Côte Est",
                siteWeb: "https://mangasoalodge.com"
            },
            {
                id: 204,
                ville: "Nosy Be",
                nom: "Le Grand Bleu",
                type: "Hotel",
                lat: -13.2800,
                lng: 48.2200,
                prix: "Dès 60 €",
                prixEur: "60 €",
                prixNum: 270000,
                note: 4.6,
                description: "Perché sur une colline avec une vue panoramique à 180° sur la baie d'Andilana. Ambiance conviviale et décontractée.",
                image: "images/hotels/grand-bleu.jpg",
                acces: "Presqu'île d'Andilana, Nord",
                siteWeb: "https://legrandbleunosybe.com"
            },
            {
                id: 205,
                ville: "Nosy Be",
                nom: "Hôtel Clair de Lune",
                type: "Hotel",
                lat: -13.3600,
                lng: 48.2100,
                prix: "Dès 45 €",
                prixEur: "45 €",
                prixNum: 200000,
                note: 4.5,
                description: "Un havre de paix au milieu de l'animation d'Ambatoloaka. Bungalows de charme dans un jardin tropical calme.",
                image: "images/hotels/clair-de-lune.jpg",
                acces: "Ambatoloaka, à 200m de la plage",
                siteWeb: "https://clair-de-lune-nosybe.com"
            },

            // NOSY BE - RESTAURANTS (Manger)
            {
                id: 206,
                ville: "Nosy Be",
                nom: "La Table d'Alexandre",
                type: "Restaurant",
                lat: -13.3650,
                lng: 48.2150,
                prix: "60 000 Ar",
                prixEur: "15 €",
                prixNum: 60000,
                note: 4.8,
                description: "La référence gastronomique de l'île. Cuisine créative mêlant saveurs locales et techniques françaises.",
                image: "images/restaurants/alexandre.jpg",
                acces: "Ambatoloaka"
            },
            {
                id: 207,
                ville: "Nosy Be",
                nom: "Le Papillon",
                type: "Restaurant",
                lat: -13.4000,
                lng: 48.2700,
                prix: "40 000 Ar",
                prixEur: "10 €",
                prixNum: 40000,
                note: 4.6,
                description: "Une institution à Hell-Ville. Cadre colonial historique et carte variée, célèbre pour ses pizzas et fruits de mer.",
                image: "images/restaurants/le-papillon.jpg?v=2",
                acces: "Hell-Ville, centre",
                horaires: "11h-22h"
            },
            {
                id: 208,
                ville: "Nosy Be",
                nom: "Karibo",
                type: "Restaurant",
                lat: -13.3620,
                lng: 48.2120,
                prix: "30 000 Ar",
                prixEur: "8 €",
                prixNum: 30000,
                note: 4.5,
                description: "Ambiance italienne chaleureuse. Pâtes fraîches et produits locaux, le tout à prix doux.",
                image: "images/restaurants/karibo.jpg",
                acces: "Ambatoloaka",
                horaires: "12h-14h, 18h-22h"
            },
            {
                id: 209,
                ville: "Nosy Be",
                nom: "Le Pily Pily",
                type: "Restaurant",
                lat: -13.3200,
                lng: 48.1900,
                prix: "70 000 Ar",
                prixEur: "18 €",
                prixNum: 70000,
                note: 4.7,
                description: "Restaurant sur pilotis offrant une vue spectaculaire. Spécialités de fruits de mer et cadre romantique.",
                image: "images/restaurants/pily-pily.jpg",
                acces: "Hôtel Andilana Beach",
                conseil: "Allez-y au coucher du soleil pour la vue."
            },
            {
                id: 214,
                ville: "Nosy Be",
                nom: "Restaurant Cacao Beach",
                type: "Restaurant",
                lat: -13.3178,
                lng: 48.2689,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.8,
                description: "Une institution à Andilana. Ce restaurant est littéralement sur le sable. On y mange les pieds dans l'eau des fruits de mer d'une fraîcheur absolue. L'ambiance est décontractée, avec des transats pour la sieste après le repas.",
                image: "images/restaurants/cacao-beach.jpg",
                acces: "Plage d'Andilana, nord de l'île",
                horaires: "10h-22h tous les jours",
                conseil: "Réservez le buffet de fruits de mer du dimanche midi, c'est gargantuesque et très couru !",
                duree: "3h (repas + plage)",
                siteWeb: "https://www.facebook.com/cacaobeachnosybe"
            },
            {
                id: 215,
                ville: "Nosy Be",
                nom: "Safari Ambaro",
                type: "Restaurant",
                lat: -13.3500,
                lng: 48.2000,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.6,
                description: "Restaurant de charme sur la plage d'Ambaro. Spécialités italiennes et malgaches. C'est l'endroit idéal pour un déjeuner paisible loin de la foule ou un dîner romantique devant le coucher de soleil sur Sakatia.",
                image: "images/restaurants/safari-ambaro.jpg",
                acces: "Plage d'Ambaro, route de l'Ouest",
                horaires: "11h-22h",
                conseil: "Leurs pâtes aux fruits de mer sont excellentes.",
                duree: "2h",
                siteWeb: "https://www.facebook.com/safariambaro"
            },

            // NOSY BE - NIGHTLIFE (Sortir)
            {
                id: 210,
                ville: "Nosy Be",
                nom: "Le Bar de la Plage",
                type: "Bar",
                lat: -13.3610,
                lng: 48.2105,
                prix: "10 000 Ar",
                prixEur: "2.5 €",
                prixNum: 10000,
                note: 4.6,
                description: "Le spot incontournable pour commencer la soirée. Cocktails les pieds dans le sable et bonne musique.",
                image: "images/nightlife/bar-de-la-plage.jpg",
                acces: "Plage d'Ambatoloaka"
            },
            {
                id: 211,
                ville: "Nosy Be",
                nom: "Le Djembe",
                type: "Boîte de nuit",
                lat: -13.4020,
                lng: 48.2720,
                prix: "Entrée 20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.4,
                description: "Club mythique pour danser jusqu'au bout de la nuit. Ambiance électrique garantie.",
                image: "images/nightlife/djembe-club.jpg",
                acces: "Hell-Ville"
            },
            {
                id: 212,
                ville: "Nosy Be",
                nom: "L'Apero",
                type: "Bar",
                lat: -13.3630,
                lng: 48.2130,
                prix: "15 000 Ar",
                prixEur: "4 €",
                prixNum: 15000,
                note: 4.5,
                description: "Lounge bar cosy pour se détendre. Excellents cocktails et tapas.",
                image: "images/nightlife/lapero.jpg",
                acces: "Ambatoloaka"
            },
            {
                id: 213,
                ville: "Nosy Be",
                nom: "Beach Klub",
                type: "Bar",
                lat: -13.3180,
                lng: 48.2690,
                prix: "40 000 Ar",
                prixEur: "10 €",
                prixNum: 40000,
                note: 4.7,
                description: "Pool party et DJ sets face à la mer. Très prisé le dimanche.",
                image: "images/nightlife/beach-klub.jpg",
                acces: "Andilana"
            },
            // ==========================================
            // FIANARANTSOA - EXPLORER (Lieux)
            // ==========================================
            {
                id: 300,
                ville: "Fianarantsoa",
                nom: "La Haute Villle (Vieille Ville)",
                type: "Incontournable",
                lat: -21.4536,
                lng: 47.0858,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.8,
                description: "Classée au patrimoine mondial, la Haute Ville est le cœur historique. C'est un dédale de ruelles pavées et de maisons traditionnelles en briques rouges aux toits de tuiles, rappelant Tana d'autrefois. La vue depuis le sommet est imprenable.",
                image: "images/fianarantsoa/fianar_haute_ville.png",
                acces: "Centre-ville, accès pédestre uniquement dans les ruelles",
                horaires: "24h/24, de jour recommandé",
                conseil: "Montez jusqu'à l'école pour le meilleur panorama au coucher du soleil.",
                duree: "2h"
            },
            {
                id: 301,
                ville: "Fianarantsoa",
                nom: "Gare FCE",
                type: "Incontournable",
                lat: -21.4447,
                lng: 47.0889,
                prix: "Gratuit (visite)",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.6,
                description: "Le point de départ du mythique train Fianar-Côte Est. Même si vous ne prenez pas le train, l'ambiance de la gare, avec sa Micheline d'époque et son agitation, vaut le détour. Un saut dans le temps colonial.",
                image: "images/fianarantsoa/fianar_gare_fce.png",
                acces: "Quartier de la Gare, ville basse",
                horaires: "Matin pour l'animation des départs",
                conseil: "Vérifiez les jours de départ (souvent mardi/samedi) pour voir l'effervescence.",
                duree: "1h"
            },
            {
                id: 302,
                ville: "Fianarantsoa",
                nom: "Plantations de Thé Sahambavy",
                type: "Nature",
                lat: -21.4000,
                lng: 47.1833,
                prix: "15 000 Ar",
                prixEur: "3.5 €",
                prixNum: 15000,
                note: 4.7,
                description: "Les seules plantations de thé de l'île. Un paysage de collines verdoyantes à perte de vue où s'activent les cueilleuses. L'odeur du thé frais et l'usine de transformation (SIDEXAM) offrent une visite unique.",
                image: "images/fianarantsoa/fianar_plantations_the.png",
                acces: "23 km de Fianar (45 min), taxi ou train",
                horaires: "8h-16h, visite guidée",
                conseil: "Dégustez le thé sur place au Lac Hôtel voisin après la visite.",
                duree: "Demi-journée"
            },
            {
                id: 303,
                ville: "Fianarantsoa",
                nom: "Cathédrale d'Ambozontany",
                type: "Culture",
                lat: -21.4510,
                lng: 47.0870,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Majestueuse, cette cathédrale en briques rouges domine la ville basse. Son escalier monumental et son clocher sont les symboles de Fianarantsoa. L'intérieur est sobre mais empreint de spiritualité.",
                image: "images/fianarantsoa/fianar_cathedrale.png",
                acces: "Montée vers la Haute Ville",
                horaires: "8h-17h",
                conseil: "Assistez à la messe du dimanche pour les chants choraux magnifiques.",
                duree: "30 min"
            },
            {
                id: 304,
                ville: "Fianarantsoa",
                nom: "Labo Men (Pierrot Men)",
                type: "Culture",
                lat: -21.4480,
                lng: 47.0860,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.9,
                description: "La galerie du plus célèbre photographe malgache, Pierrot Men. Ses clichés en noir et blanc capturent l'âme de Madagascar. Un lieu de silence et de beauté artistique incontournable.",
                image: "images/fianarantsoa/fianar_pierrot_men.png",
                acces: "Ville moyenne, Suotama",
                horaires: "9h-18h, fermé dimanche",
                conseil: "On peut acheter des tirages ou des cartes postales signées, un souvenir précieux.",
                duree: "1h"
            },

            // ==========================================
            // FIANARANTSOA - MANGER (Restaurants)
            // ==========================================
            {
                id: 305,
                ville: "Fianarantsoa",
                nom: "L'Ancre d'Or",
                type: "Restaurant",
                lat: -21.4490,
                lng: 47.0850,
                prix: "40 000 Ar",
                prixEur: "9 €",
                prixNum: 40000,
                note: 4.5,
                description: "Une institution. On y vient pour sa fameuse fondue bourguignonne de zébu et son ambiance chaleureuse un peu rétro. C'est le rendez-vous des expatriés et des voyageurs.",
                image: "images/fianarantsoa/fianar_ancre_or.png",
                acces: "Centre-ville, Tsianolondroa",
                horaires: "Midi et Soir",
                conseil: "La fondue est copieuse, à partager !",
                duree: "2h"
            },
            {
                id: 306,
                ville: "Fianarantsoa",
                nom: "Tsara Guest House",
                type: "Restaurant",
                lat: -21.4520,
                lng: 47.0880,
                prix: "60 000 Ar",
                prixEur: "14 €",
                prixNum: 60000,
                note: 4.8,
                description: "Le raffinement à Fianar. Une terrasse avec vue panoramique sur la ville et une cuisine gastronomique locale. Le cadre est élégant, parfait pour un dîner romantique.",
                image: "images/fianarantsoa/fianar_tsara_guest.png",
                acces: "Près de la Haute Ville",
                horaires: "12h-14h, 19h-21h30",
                conseil: "Réservez la table au bord de la terrasse pour le coucher de soleil.",
                duree: "2h"
            },
            {
                id: 307,
                ville: "Fianarantsoa",
                nom: "La Rizière",
                type: "Restaurant",
                lat: -21.4600,
                lng: 47.0900,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.7,
                description: "Le restaurant d'application de la célèbre école hôtelière. Service impeccable, plats soignés et créatifs préparés par les futurs grands chefs du pays. Le cadre en briques rouges est magnifique.",
                image: "images/fianarantsoa/fianar_la_riziere.png",
                acces: "Sortie Sud de la ville",
                horaires: "Midi seulement (souvent)",
                conseil: "Le menu change selon les saisons et l'apprentissage des élèves.",
                duree: "2h"
            },
            {
                id: 308,
                ville: "Fianarantsoa",
                nom: "Le Panda",
                type: "Restaurant",
                lat: -21.4460,
                lng: 47.0840,
                prix: "25 000 Ar",
                prixEur: "6 €",
                prixNum: 25000,
                note: 4.3,
                description: "Le bon plan populaire. Cuisine chinoise et malgache généreuse, service rapide et prix doux. C'est bruyant, vivant et toujours bon.",
                image: "images/fianarantsoa/fianar_panda.png",
                acces: "Centre-ville, Ampasambazaha",
                horaires: "10h-22h",
                conseil: "Leur soupe de nouilles est légendaire après une longue route.",
                duree: "1h"
            },
            {
                id: 309,
                ville: "Fianarantsoa",
                nom: "Le Zomatel",
                type: "Restaurant",
                lat: -21.4430,
                lng: 47.0820,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.4,
                description: "Célèbre pour ses pizzas au feu de bois et ses pâtisseries. Le cadre est celui d'un grand hôtel classique, confortable et climatisé.",
                image: "images/fianarantsoa/fianar_zomatel.png",
                acces: "Place du Zoma",
                horaires: "11h-22h",
                conseil: "Gardez de la place pour une religieuse ou un éclair en dessert !",
                duree: "1h30"
            },

            // ==========================================
            // FIANARANTSOA - SORTIR (Bars)
            // ==========================================
            {
                id: 310,
                ville: "Fianarantsoa",
                nom: "La Chaud'hier",
                type: "Bar",
                lat: -21.4470,
                lng: 47.0850,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.5,
                description: "Le spot culturel et musical. Concerts live le week-end, ambiance cabaret et rencontres artistiques. L'endroit où il faut être pour sentir le pouls de la ville.",
                image: "images/fianarantsoa/fianar_chaudhier.png",
                acces: "Centre-ville",
                horaires: "Soirée, concerts vend/sam",
                conseil: "L'ambiance monte vers 22h lors des concerts.",
                duree: "Soirée"
            },
            {
                id: 311,
                ville: "Fianarantsoa",
                nom: "Chez Marie Zooze",
                type: "Bar",
                lat: -21.4455,
                lng: 47.0835,
                prix: "8 000 Ar",
                prixEur: "2 €",
                prixNum: 8000,
                note: 4.3,
                description: "Bar populaire et animé. On y boit de la bière THB bien fraîche et du rhum arrangé au comptoir. Ambiance authentique et sans chichis.",
                image: "images/fianarantsoa/fianar_marie_zooze.png",
                acces: "Quartier Ampasambazaha",
                horaires: "Jusqu'à tard",
                duree: "2h"
            },
            {
                id: 312,
                ville: "Fianarantsoa",
                nom: "Discothèque du Soafia",
                type: "Boîte de nuit",
                lat: -21.4420,
                lng: 47.0810,
                prix: "15 000 Ar",
                prixEur: "3.5 €",
                prixNum: 15000,
                note: 4.0,
                description: "La référence pour danser. Située dans l'hôtel Soafia, c'est le club le plus équipé de la ville. Ambiance locale et tubes internationaux.",
                image: "images/fianarantsoa/fianar_soafia.png",
                acces: "Hôtel Soafia",
                horaires: "23h - Aube",
                duree: "Nuit"
            },
            {
                id: 313,
                ville: "Fianarantsoa",
                nom: "Pavillon Bar (La Rizière)",
                type: "Bar",
                lat: -21.4605,
                lng: 47.0905,
                prix: "12 000 Ar",
                prixEur: "3 €",
                prixNum: 12000,
                note: 4.6,
                description: "Pour un verre au calme. Cadre apaisant avec vue sur les jardins de l'école hôtelière. Idéal pour un apéritif tranquille.",
                image: "images/fianarantsoa/fianar_pavillon_bar.png",
                acces: "La Rizière",
                horaires: "Fin d'après-midi",
                duree: "1h"
            },
            {
                id: 314,
                ville: "Fianarantsoa",
                nom: "Bar du Sorotel",
                type: "Bar",
                lat: -21.4440,
                lng: 47.0830,
                prix: "12 000 Ar",
                prixEur: "3 €",
                prixNum: 12000,
                note: 4.2,
                description: "Ambiance lounge et fauteuils confortables. C'est le bar d'hôtel classique pour discuter affaires ou se détendre au frais.",
                image: "images/fianarantsoa/fianar_sorotel_bar.png",
                acces: "Hôtel Sorotel",
                horaires: "Soirée",
                duree: "1h"
            },

            // ==========================================
            // FIANARANTSOA - SPOTS LOCAUX
            // ==========================================
            {
                id: 315,
                ville: "Fianarantsoa",
                nom: "Escaliers de la Haute Ville",
                type: "Spot Local",
                spotLocal: true,
                lat: -21.4530,
                lng: 47.0865,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.7,
                description: "Le défi sportif et photogénique. Ces grands escaliers relient la ville basse à la ville haute. La perspective est magnifique pour les photos.",
                image: "images/fianarantsoa/fianar_escaliers.png",
                acces: "Accès piéton partout",
                duree: "30 min (montée !)"
            },
            {
                id: 316,
                ville: "Fianarantsoa",
                nom: "Marché d'Anjoma",
                type: "Spot Local",
                spotLocal: true,
                lat: -21.4400,
                lng: 47.0800,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.4,
                description: "L'effervescence pure. C'est l'un des plus grands marchés du sud. On y trouve tout : zébus, artisanat, fruits, épices. Attention aux pickpockets, mais l'ambiance est inoubliable.",
                image: "images/fianarantsoa/fianar_marche_anjoma.png",
                acces: "Quartier Anjoma",
                horaires: "Matin (mardi/vendredi jours de grand marché)",
                conseil: "Allez voir la section des vanneries Betsileo.",
                duree: "1h"
            },
            {
                id: 317,
                ville: "Fianarantsoa",
                nom: "Point de Vue Kianjasoa",
                type: "Spot Local",
                spotLocal: true,
                lat: -21.4350,
                lng: 47.0750,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.6,
                description: "Une colline offrant un panorama à 360° sur toute la ville et les vallées environnantes. Un bol d'air frais à quelques minutes du centre.",
                image: "images/fianarantsoa/fianar_vue_kianjasoa.png",
                acces: "Piste montante, 4x4 ou marche",
                duree: "1h"
            },
            {
                id: 318,
                ville: "Fianarantsoa",
                nom: "Lac Anosy",
                type: "Spot Local",
                spotLocal: true,
                lat: -21.4550,
                lng: 47.0920,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.2,
                description: "Le poumon vert de la ville basse. Une promenade agréable autour du lac artificiel, bordé de jacarandas (en fleurs en octobre/novembre).",
                image: "images/fianarantsoa/fianar_lac_anosy.png",
                acces: "Ville basse, pied de la colline",
                duree: "45 min"
            },
            {
                id: 319,
                ville: "Fianarantsoa",
                nom: "Statue de la Vierge",
                type: "Spot Local",
                spotLocal: true,
                lat: -21.4580,
                lng: 47.0890,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "Une statue blanche monumentale qui veille sur la ville. Le site offre l'un des meilleurs points de vue pour comprendre la géographie des trois niveaux de la ville.",
                image: "images/fianarantsoa/fianar_statue_vierge.png",
                acces: "Hauteurs sud",
                duree: "30 min"
            },

            // ==========================================
            // FIANARANTSOA - DORMIR (Hôtels)
            // ==========================================
            {
                id: 320,
                ville: "Fianarantsoa",
                nom: "Tsara Guest House",
                type: "Hotel",
                lat: -21.4520,
                lng: 47.0880,
                prix: "180 000 Ar",
                prixEur: "40 €",
                prixNum: 180000,
                note: 4.8,
                description: "L'adresse de charme incontournable. Une architecture traditionnelle soignée, des briques rouges, et une vue imprenable sur la ville depuis la terrasse. Ambiance cosy et chaleureuse.",
                image: "images/fianarantsoa/fianar_tsara_guest.png",
                acces: "Près de la Haute Ville",
                horaires: "Réception 24h/24",
                conseil: "Demandez une chambre avec balcon pour le coucher de soleil.",
                duree: "Nuit"
            },
            {
                id: 321,
                ville: "Fianarantsoa",
                nom: "Zomatel Hôtel",
                type: "Hotel",
                lat: -21.4430,
                lng: 47.0820,
                prix: "200 000 Ar",
                prixEur: "45 €",
                prixNum: 200000,
                note: 4.5,
                description: "Le confort international à Fianar. Idéal pour ceux qui cherchent des services complets : grande piscine, spa, chambres modernes et spacieuses. Une valeur sûre pour le business ou la détente.",
                image: "images/fianarantsoa/fianar_zomatel.png",
                acces: "Place du Zoma",
                horaires: "Réception 24h/24",
                conseil: "Profitez de la piscine après une longue journée de route (RN7).",
                duree: "Nuit"
            },
            {
                id: 322,
                ville: "Fianarantsoa",
                nom: "Hôtel Cotsoyannis",
                type: "Hotel",
                lat: -21.4465,
                lng: 47.0845,
                prix: "140 000 Ar",
                prixEur: "32 €",
                prixNum: 140000,
                note: 4.4,
                description: "Un havre de paix en plein centre-ville. Des bungalows disséminés dans un jardin luxuriant et fleuri. Calme, intimiste et très bien situé.",
                image: "images/fianarantsoa/fianar_cotsoyannis.png",
                acces: "Centre-ville, face à la gare",
                horaires: "Réception 24h/24",
                conseil: "Le petit-déjeuner dans le jardin est un moment délicieux.",
                duree: "Nuit"
            },
            {
                id: 323,
                ville: "Fianarantsoa",
                nom: "Villa Sylvestre",
                type: "Hotel",
                lat: -21.4480,
                lng: 47.0860,
                prix: "160 000 Ar",
                prixEur: "35 €",
                prixNum: 160000,
                note: 4.7,
                description: "Une magnifique demeure coloniale des années 1920 restaurée avec goût. Parquets d'époque, varangue, charme fou. On s'y sent comme dans une maison de famille d'antan.",
                image: "images/fianarantsoa/fianar_villa_sylvestre.png",
                acces: "Quartier administratif",
                horaires: "Réception 24h/24",
                conseil: "Réservez à l'avance, il y a peu de chambres.",
                duree: "Nuit"
            },
            {
                id: 324,
                ville: "Fianarantsoa",
                nom: "La Rizière",
                type: "Hotel",
                lat: -21.4600,
                lng: 47.0900,
                prix: "130 000 Ar",
                prixEur: "30 €",
                prixNum: 130000,
                note: 4.6,
                description: "Plus qu'un hôtel, une école hôtelière de renom. Cadre magnifique en briques rouges entouré de jardins et rizières. Service aux petits soins par les étudiants.",
                image: "images/fianarantsoa/fianar_la_riziere_hotel.png",
                acces: "Sortie Sud",
                horaires: "Réception 24h/24",
                conseil: "Soutenez la formation des jeunes malgaches en y séjournant.",
                duree: "Nuit"
            },
            // ============================================
            // TOLIARA (TULEAR) - SUD-OUEST
            // ============================================
            {
                id: 400,
                ville: "Tuléar",
                nom: "Arboretum d'Antsokay",
                type: "Nature",
                lat: -23.4167,
                lng: 43.7500,
                prix: "30 000 Ar",
                prixEur: "7 €",
                prixNum: 30000,
                note: 4.8,
                description: "Un conservatoire botanique unique regroupant plus de 900 espèces de plantes du sud malgache (90% endémiques). Visite guidée passionnante pour comprendre la flore épineuse.",
                image: "images/toliara/toliara_arboretum.png",
                acces: "12 km au sud de Toliara (RN7)",
                horaires: "7h30 - 17h30",
                conseil: "Visitez tôt le matin pour les oiseaux et la fraîcheur.",
                duree: "2h",
                siteWeb: "http://www.antsokayarboretum.org"
            },
            {
                id: 401,
                ville: "Tuléar",
                nom: "Baie de Saint-Augustin",
                type: "Nature",
                lat: -23.5500,
                lng: 43.7667,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.7,
                description: "Site spectaculaire où le fleuve Onilahy se jette dans la mer. Falaises calcaires blanches, mangroves et flamants roses. Un paysage de bout du monde.",
                image: "images/toliara/toliara_saint_augustin.png",
                acces: "Piste depuis Toliara (1h30)",
                horaires: "Journée",
                conseil: "Spot idéal pour le snorkeling et l'observation des baleines (saison).",
                duree: "Demi-journée"
            },
            {
                id: 402,
                ville: "Tuléar",
                nom: "Plage d'Anakao",
                type: "Nature",
                lat: -23.6500,
                lng: 43.6500,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.9,
                description: "Village de pêcheurs Vezo authentique. Plages de sable blanc immaculé, eau turquoise. Accès bateau uniquement, garantissant une tranquillité absolue.",
                image: "images/toliara/toliara_anakao.png",
                acces: "Bateau depuis Toliara (1h)",
                horaires: "Départ bateau matin",
                conseil: "Excursion incontournable à Nosy Ve juste en face.",
                duree: "Séjour",
                siteWeb: "https://madagascar-tourisme.com/fr/destinations/toliara-et-le-sud-ouest/anakao/"
            },
            {
                id: 403,
                ville: "Tuléar",
                nom: "Forêt de Baobabs Mangily",
                type: "Nature",
                lat: -23.1167,
                lng: 43.6167,
                prix: "20 000 Ar",
                prixEur: "5 €",
                prixNum: 20000,
                note: 4.6,
                description: "Réserve de Reniala : forêt de baobabs bouteilles, tortues radiata et oiseaux. Sentier facile pour découvrir ces géants millénaires.",
                image: "images/toliara/toliara_baobabs_mangily.png",
                acces: "Mangily / Ifaty (30 km nord)",
                horaires: "6h - 17h",
                conseil: "Cherchez le fameux 'Baobab théière'.",
                duree: "1h30",
                siteWeb: "https://reniala-ecotourisme.jimdo.com"
            },
            {
                id: 404,
                ville: "Tuléar",
                nom: "Musée de la Mer",
                type: "Spot Local",
                lat: -23.3550,
                lng: 43.6700,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.3,
                description: "Musée de l'Institut Halieutique. Découvrez la biodiversité marine du canal du Mozambique et le célèbre cœlacanthe fossile.",
                image: "images/toliara/toliara_musee_mer.png",
                acces: "Port de Toliara",
                horaires: "8h-12h, 14h-17h",
                conseil: "Petit mais très instructif sur la faune locale.",
                duree: "1h",
                siteWeb: "https://www.ihsm.mg"
            },
            {
                id: 405,
                ville: "Tuléar",
                nom: "Le Jardin de Giancarlo",
                type: "Restaurant",
                lat: -23.3520,
                lng: 43.6680,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.7,
                description: "Institution gastronomique italienne. Produits de la mer d'une fraîcheur absolue, cadre jardin tropical apaisant. Une valeur sûre.",
                image: "images/toliara/toliara_giancarlo.png",
                acces: "Centre-ville",
                horaires: "Midi et Soir",
                conseil: "Raviolis à la langouste recommandés.",
                duree: "2h",
                siteWeb: "https://www.facebook.com/giancarlo.faussone"
            },
            {
                id: 406,
                ville: "Tuléar",
                nom: "Chez Freddy",
                type: "Restaurant",
                lat: -23.3540,
                lng: 43.6690,
                prix: "25 000 Ar",
                prixEur: "6 €",
                prixNum: 25000,
                note: 4.4,
                description: "L'ambiance routard mythique de Tuléar. Convivial, pas cher, copieux. Le point de ralliement des voyageurs pour échanger des infos.",
                image: "images/toliara/toliara_chez_freddy.png",
                acces: "Boulevard Lyautey",
                horaires: "11h - 23h",
                conseil: "Filet de zébu au poivre vert.",
                duree: "1h30",
                siteWeb: "https://www.facebook.com/chezfreddyifaty"
            },
            {
                id: 407,
                ville: "Tuléar",
                nom: "L'Étoile de Mer",
                type: "Restaurant",
                lat: -23.3560,
                lng: 43.6650,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.5,
                description: "Terrasse vue mer agréable. Spécialiste des grillades de poissons arrivant du port tout proche. Cuisine simple et savoureuse.",
                image: "images/toliara/toliara_etoile_mer.png",
                acces: "Front de mer",
                horaires: "Midi et Soir",
                conseil: "Plateau de fruits de mer royal.",
                duree: "2h"
            },
            {
                id: 408,
                ville: "Tuléar",
                nom: "La Table d'Alexandre",
                type: "Restaurant",
                lat: -23.3500,
                lng: 43.6720,
                prix: "50 000 Ar",
                prixEur: "11 €",
                prixNum: 50000,
                note: 4.6,
                description: "Table élégante, cuisine fusion franco-malgache raffinée. Le chef sublime les produits locaux. Cadre soigné.",
                image: "images/toliara/toliara_table_alexandre.png",
                acces: "Quartier résidentiel",
                horaires: "Soir uniquement",
                conseil: "Réservation conseillée.",
                duree: "2h30",
                siteWeb: "http://www.aubergedelatable.com"
            },
            {
                id: 409,
                ville: "Tuléar",
                nom: "Le Vezo (Anakao)",
                type: "Restaurant",
                lat: -23.6510,
                lng: 43.6510,
                prix: "30 000 Ar",
                prixEur: "7 €",
                prixNum: 30000,
                note: 4.8,
                description: "Restaurant de plage les pieds dans le sable à Anakao. Langoustes grillées pêchées du matin. Le goût du paradis.",
                image: "images/toliara/toliara_vezo_anakao.png",
                acces: "Plage d'Anakao",
                horaires: "Midi",
                conseil: "Commandez votre langouste le matin.",
                duree: "2h",
                siteWeb: "http://www.longovezo.com"
            },
            {
                id: 410,
                ville: "Tuléar",
                nom: "Bakouba Concept Hotel",
                type: "Hotel",
                lat: -23.5400,
                lng: 43.7600,
                prix: "350 000 Ar",
                prixEur: "80 €",
                prixNum: 350000,
                note: 4.9,
                description: "Ovni architectural style Gaudí face à la baie de Saint-Augustin. Décoration ethnique unique, piscine à débordement. Une expérience hors du temps.",
                image: "images/toliara/toliara_bakouba.png",
                acces: "Saint-Augustin",
                horaires: "24h/24",
                conseil: "Vaut le détour même juste pour voir l'architecture.",
                duree: "Nuit",
                siteWeb: "http://www.bakuba-lodge.com"
            },
            {
                id: 411,
                ville: "Tuléar",
                nom: "Moringa Hotel",
                type: "Hotel",
                lat: -23.3530,
                lng: 43.6700,
                prix: "200 000 Ar",
                prixEur: "45 €",
                prixNum: 200000,
                note: 4.7,
                description: "Le confort moderne en ville. Chambres spacieuses, grand patio verdoyant, excellent service. La valeur sûre business/détente.",
                image: "images/toliara/toliara_moringa.png",
                acces: "Centre-ville",
                horaires: "24h/24",
                conseil: "Excellent petit-déjeuner buffet.",
                duree: "Nuit",
                siteWeb: "http://www.moringa-tulear.mg"
            },
            {
                id: 412,
                ville: "Tuléar",
                nom: "Peter Pan",
                type: "Hotel",
                lat: -23.6520,
                lng: 43.6520,
                prix: "150 000 Ar",
                prixEur: "35 €",
                prixNum: 150000,
                note: 4.6,
                description: "Charme italien à Anakao. Bungalows rustiques-chic, cuisine délicieuse d'inspiration italienne. Ambiance familiale et décontractée.",
                image: "images/toliara/toliara_peter_pan.png",
                acces: "Anakao Village",
                horaires: "8h-20h",
                conseil: "Leurs pizzas au feu de bois sont réputées.",
                duree: "Nuit",
                siteWeb: "http://www.peter-pan-anakao.com"
            },
            {
                id: 413,
                ville: "Tuléar",
                nom: "Le Paradisier",
                type: "Hotel",
                lat: -23.1500,
                lng: 43.6000,
                prix: "300 000 Ar",
                prixEur: "70 €",
                prixNum: 300000,
                note: 4.8,
                description: "Eco-lodge de luxe à Ifaty. Bungalows pierre/bois intégrés à la dune, piscine à débordement sur le lagon. Calme absolu.",
                image: "images/toliara/toliara_paradisier.png",
                acces: "Sud Ifaty",
                horaires: "24h/24",
                conseil: "Observation des baleines depuis la terrasse en saison.",
                duree: "Nuit",
                siteWeb: "https://www.paradisier.net"
            },
            {
                id: 414,
                ville: "Tuléar",
                nom: "Les Dunes d'Ifaty",
                type: "Hotel",
                lat: -23.1000,
                lng: 43.6000,
                prix: "250 000 Ar",
                prixEur: "55 €",
                prixNum: 250000,
                note: 4.6,
                description: "Complexe hôtelier confortable, villas vue mer, piscine et jardin tropical. Idéal pour familles et longs séjours.",
                image: "images/toliara/toliara_dunes_ifaty.png",
                acces: "Nord Ifaty/Mangily",
                horaires: "24h/24",
                conseil: "Nombreuses activités nautiques disponibles.",

                duree: "Nuit"
            },
            {
                id: 415,
                ville: "Tuléar",
                nom: "Le T'Hôtre Chose",
                type: "Bar",
                lat: -23.3570,
                lng: 43.6700,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.4,
                description: "Le bar-club incontournable. Ambiance festive, live music, billard. Le point de rencontre nocturne.",
                image: "images/toliara/toliara_thotre_chose.png",
                acces: "Centre-ville",
                horaires: "18h - Tard",
                conseil: "Grosse ambiance le vendredi soir.",
                duree: "Soirée"
            },
            {
                id: 416,
                ville: "Tuléar",
                nom: "Bar de l'Hôtel Plazza",
                type: "Bar",
                lat: -23.3580,
                lng: 43.6600,
                prix: "15 000 Ar",
                prixEur: "3.5 €",
                prixNum: 15000,
                note: 4.5,
                description: "Le spot 'Sunset'. Terrasse panoramique face au canal du Mozambique. Cocktails soignés et brise marine.",
                image: "images/toliara/toliara_plazza.png",
                acces: "Front de mer",
                horaires: "16h - 22h",
                conseil: "Arriver à 17h30 pour la meilleure vue.",
                duree: "Soirée"
            },
            {
                id: 418,
                ville: "Tuléar",
                nom: "Chez Alain",
                type: "Bar",
                lat: -23.3510,
                lng: 43.6730,
                prix: "12 000 Ar",
                prixEur: "2.5 €",
                prixNum: 12000,
                note: 4.6,
                description: "Cabaret-restaurant légendaire. Jazz, Blues, musique malgache de qualité. Ambiance feutrée et mélomane.",
                image: "images/toliara/toliara_chez_alain.png",
                acces: "Centre-ville",
                horaires: "Soir uniquement",
                conseil: "Vérifier la prog musicale.",
                duree: "Soirée",
                siteWeb: "https://www.facebook.com/chezalaintoliara/"
            },
            {
                id: 419,
                ville: "Tuléar",
                nom: "Mangily Beach Bar",
                type: "Bar",
                lat: -23.1200,
                lng: 43.6150,
                prix: "10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.5,
                description: "Le QG d'Ifaty. Les pieds dans le sable, reggae, cocktails coco. Le chill absolu.",
                image: "images/toliara/toliara_mangily_bar.png",
                acces: "Plage de Mangily",
                horaires: "10h - Tard",
                conseil: "Punch coco maison recommandé.",
                duree: "Soirée"
            },
            // --- MAHAJANGA (BOENY) ADDITIONS (IDs 500-509) ---
            {
                id: 500,
                ville: "Mahajanga",
                nom: "Lac Sacré de Mangatsa",
                type: "Nature",
                lat: -15.6500,
                lng: 46.4333,
                prix: "10 000 Ar",
                prixEur: "2.30 €",
                prixNum: 10000,
                note: 4.6,
                description: "Un lieu mystique où l'histoire et la légende se rencontrent. Ce lac aux eaux émeraude cristallines abrite des carpes et des anguilles sacrées gigantesques, qui seraient les ancêtres d'un ancien village. L'ambiance y est solennelle et paisible. Les mardis et jeudis sont fady (tabous).",
                image: "images/mahajanga/mahajanga_lac_mangatsa_1765469963847.png",
                acces: "18 km au nord-est de Mahajanga, piste sablonneuse (4x4 recommandé)",
                horaires: "8h-17h (sauf tabous)",
                conseil: "Apportez du pain pour appeler les poissons, ils viennent manger dans votre main. Respectez le silence des lieux.",
                duree: "2h",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 501,
                ville: "Mahajanga",
                nom: "Plage d'Amborovy",
                type: "Spot Local",
                spotLocal: true,
                lat: -15.6667,
                lng: 46.3333,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.5,
                description: "La plage préférée des Majungais pour le week-end. Une longue étendue de sable fin bordée de filaos, animée par les gargotes et la musique. C'est ici que bat le cœur populaire de la ville le dimanche, loin de l'agitation du centre.",
                image: "images/mahajanga/mahajanga_plage_amborovy_1765469996725.png",
                acces: "10 km du centre, route goudronnée puis piste facile",
                horaires: "Accès libre",
                conseil: "Goûtez aux 'masikita' (brochettes) sur la plage au coucher du soleil.",
                duree: "Demi-journée",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 502,
                ville: "Mahajanga",
                nom: "Le Guest",
                type: "Restaurant",
                lat: -15.7200,
                lng: 46.3150,
                prix: "45 000 Ar",
                prixEur: "10 €",
                prixNum: 45000,
                note: 4.7,
                description: "Probablement la meilleure table de la Corniche. Le Guest propose une cuisine raffinée mélangeant saveurs locales et techniques françaises. La terrasse en bois au-dessus de la mer offre une vue imprenable sur le coucher de soleil.",
                image: "images/mahajanga/mahajanga_le_guest_1765470036454.png",
                acces: "Boulevard Marcoz, La Corniche",
                horaires: "11h-22h, fermé le lundi",
                conseil: "Le carpaccio de crocodile et le filet de mérou sont des incontournables. Réservation conseillée pour le dîner.",
                duree: "2h",
                siteWeb: "https://restaurantleguest.com"
            },
            {
                id: 503,
                ville: "Mahajanga",
                nom: "Coco Lodge Majunga",
                type: "Restaurant",
                lat: -15.7180,
                lng: 46.3160,
                prix: "35 000 Ar",
                prixEur: "8 €",
                prixNum: 35000,
                note: 4.6,
                description: "Une oasis gourmande en plein centre. Réputé pour sa cuisine fusion malgache-libanaise-française (foie gras, mezzés, langoustes). Le cadre autour de la piscine est relaxant, et les dîners-cabaret du vendredi soir sont une institution locale.",
                image: "images/mahajanga/mahajanga_coco_lodge_1765470063441.png",
                acces: "Avenue de France, Centre-ville",
                horaires: "7h-22h tous les jours",
                conseil: "Ne manquez pas leur foie gras mi-cuit maison.",
                duree: "2h",
                siteWeb: "https://cocolodgemajunga-madagascar.com"
            },
            {
                id: 504,
                ville: "Mahajanga",
                nom: "Chez Papy Râleur",
                type: "Restaurant",
                lat: -15.6670,
                lng: 46.3340,
                prix: "25 000 Ar",
                prixEur: "6 €",
                prixNum: 25000,
                note: 4.4,
                description: "Une paillote mythique sur la plage d'Amborovy. Ici, pas de chichis, on mange les pieds dans le sable des produits d'une fraîcheur absolue (poissons, crabes). L'ambiance est conviviale, typique des dimanches à la plage.",
                image: "images/mahajanga/mahajanga_papy_raleur_1765470086451.png",
                acces: "Plage d'Amborovy (Petite Plage)",
                horaires: "10h-21h",
                conseil: "Commandez le poisson grillé entier du jour, simple et délicieux.",
                duree: "2h",
                siteWeb: "https://www.facebook.com"
            },
            {
                id: 510,
                ville: "Mahajanga",
                nom: "Petite Plage (Amborovy)",
                type: "Spot Local",
                spotLocal: true,
                lat: -15.6600,
                lng: 46.3400,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.6,
                description: "Plus intime et paisible que sa grande sœur, la Petite Plage est un joyau bordé de filaos. L'eau y est calme et transparente, idéale pour la baignade en famille. C'est le lieu parfait pour admirer le coucher de soleil en toute tranquillité.",
                image: "images/mahajanga/petite_plage_mahajanga_1765473415665.png",
                acces: "Amborovy, après l'aéroport, suivre la piste côtière",
                horaires: "Accès libre",
                conseil: "Marchez jusqu'au bout de la plage pour voir les pêcheurs réparer leurs pirogues à l'ombre des arbres.",
                duree: "Demi-journée",
                siteWeb: "https://tourisme-majunga.com"
            },
            {
                id: 505,
                ville: "Mahajanga",
                nom: "Baobab Tree Hôtel & Spa",
                type: "Hôtel",
                lat: -15.7250,
                lng: 46.3100,
                prix: "350 000 Ar",
                prixEur: "80 €",
                prixNum: 350000,
                note: 4.8,
                description: "Le standing international à Mahajanga. Chambres spacieuses, immense piscine à débordement et spa de qualité. Situé sur la Corniche, c'est l'adresse idéale pour un séjour confort et luxe avec tous les standards modernes.",
                image: "images/mahajanga/mahajanga_baobab_tree_1765470123908.png",
                acces: "Boulevard de la Corniche",
                horaires: "Réception 24h/24",
                conseil: "Demandez une chambre avec vue mer pour profiter des couchers de soleil depuis votre balcon.",
                duree: "Nuitée",
                siteWeb: "https://baobab-tree-hotel.mg"
            },
            {
                id: 506,
                ville: "Mahajanga",
                nom: "Antsanitia Resort",
                type: "Hôtel",
                lat: -15.5800,
                lng: 46.4500,
                prix: "280 000 Ar",
                prixEur: "65 €",
                prixNum: 280000,
                note: 4.7,
                description: "Plus qu'un hôtel, une destination écotouristique. Niché entre rivière et mer, loin de tout, cet écolodge offre une déconnexion totale. Bungalows charmants, cuisine bio locale et engagement communautaire fort.",
                image: "images/mahajanga/mahajanga_antsanitia_1765470152704.png",
                acces: "25 km de l'aéroport, transfert organisé par l'hôtel recommandé (piste)",
                horaires: "Réception 24h/24",
                conseil: "Participez à la remontée de la rivière Morira en pirogue organisée par le lodge.",
                duree: "Nuitée",
                siteWeb: "https://antsanitia.com"
            },
            {
                id: 507,
                ville: "Mahajanga",
                nom: "Hôtel Edena Kely",
                type: "Hôtel",
                lat: -15.6700,
                lng: 46.3300,
                prix: "120 000 Ar",
                prixEur: "28 €",
                prixNum: 120000,
                note: 4.5,
                description: "Un petit jardin d'Eden. Cet hôtel à taille humaine charme par son jardin tropical luxuriant et son ambiance intimiste. Les bungalows sont décorés avec soin et la piscine est un havre de paix.",
                image: "images/mahajanga/mahajanga_edena_kely_1765470183184.png",
                acces: "Route d'Amborovy, Petite Plage",
                horaires: "Réception 7h-22h",
                conseil: "Idéal pour les couples cherchant du calme tout en étant proche de la plage.",
                duree: "Nuitée",
                siteWeb: "http://www.edenakely.com"
            },
            {
                id: 508,
                ville: "Mahajanga",
                nom: "Hôtel des Roches Rouges",
                type: "Hôtel",
                lat: -15.7185,
                lng: 46.3155,
                prix: "150 000 Ar",
                prixEur: "35 €",
                prixNum: 150000,
                note: 4.3,
                description: "Une légende de Majunga. Cet hôtel historique offre le panorama le plus spectaculaire de la ville sur la baie de Bombetoka. Son architecture coloniale Art Déco et sa terrasse 'La Rotonde' sont des incontournables empreints de nostalgie.",
                image: "images/mahajanga/mahajanga_roches_rouges_1765470209131.png",
                acces: "Boulevard de la Corniche",
                horaires: "Réception 24h/24",
                conseil: "Même si vous n'y dormez pas, venez prendre un verre au coucher du soleil à La Rotonde.",
                duree: "Nuitée",
                siteWeb: "https://rochesrouges.mg"
            },
            {
                id: 509,
                ville: "Mahajanga",
                nom: "Taxi Be",
                type: "Sortir",
                lat: -15.7220,
                lng: 46.3180,
                prix: "Gratuit",
                prixEur: "Gratuit",
                prixNum: 0,
                note: 4.4,
                description: "Le temple de la nuit majungaise. Une ambiance survoltée, de la musique live tous les soirs (Salegy, Slow, Variété) et une foule cosmopolite. C'est l'endroit où tout Majunga se retrouve pour danser et faire la fête jusqu'au bout de la nuit.",
                image: "images/mahajanga/mahajanga_taxi_be_1765470294627.png",
                acces: "Boulevard de la Corniche, près du bord",
                horaires: "21h à l'aube",
                conseil: "L'ambiance décolle vraiment vers 23h. Tenue correcte et bonne humeur exigées.",
                duree: "Soirée",
                siteWeb: "https://www.facebook.com"
            },
            {
                id: 511,
                ville: "Mahajanga",
                nom: "Club 73 (ex-Shakira)",
                type: "Boîte de nuit",
                lat: -15.7200,
                lng: 46.3150,
                prix: "Entrée ~10 000 Ar",
                prixEur: "2 €",
                prixNum: 10000,
                note: 4.3,
                description: "Le spot incontournable du centre-ville pour les noctambules. Avec ses deux ambiances (Lounge pour chiller et Club pour danser), il attire une foule jeune et branchée. Les soirées à thème y sont légendaires.",
                image: "images/mahajanga/mahajanga_club73_nightclub_1765473978259.png",
                acces: "Centre-ville, face Galana",
                horaires: "18h-5h (fermé Lundi)",
                conseil: "Arrivez vers minuit pour l'ambiance maximale côté club.",
                duree: "Soirée",
                siteWeb: "https://www.facebook.com"
            },
            {
                id: 512,
                ville: "Mahajanga",
                nom: "Le Zebulon",
                type: "Bar",
                lat: -15.6650,
                lng: 46.3350,
                prix: "Cocktails 15 000 Ar",
                prixEur: "3.5 €",
                prixNum: 15000,
                note: 4.6,
                description: "Les pieds dans le sable à Petite Plage. Le Zebulon est l'endroit parfait pour un apéro sunset décontracté. Franck et Miel vous accueillent dans une ambiance rasta-chic très chaleureuse. Bon son, bons cocktails.",
                image: "images/mahajanga/mahajanga_zebulon_beach_bar_1765473995356.png",
                acces: "Petite Plage Amborovy",
                horaires: "10h-22h",
                conseil: "Leur planteur maison est redoutable mais délicieux !",
                duree: "2h",
                siteWeb: "https://www.facebook.com"
            },
            {
                id: 513,
                ville: "Mahajanga",
                nom: "Bar de la Marine",
                type: "Bar",
                lat: -15.7150,
                lng: 46.3100,
                prix: "Bière 4 000 Ar",
                prixEur: "1 €",
                prixNum: 4000,
                note: 4.2,
                description: "Une institution authentique face au Port aux Boutres. Ici, on boit sa THB au milieu des marins et des locaux. L'ambiance est bruyante, vivante et sans filtre. Idéal pour sentir le pouls réel de la ville.",
                image: "images/mahajanga/mahajanga_bar_marine_harbor_1765474012619.png",
                acces: "Port aux Boutres, Quai Orsini",
                horaires: "8h-23h",
                conseil: "Venez en fin d'après-midi pour voir le ballet des bateaux qui rentrent.",
                duree: "1h",
                siteWeb: ""
            },
            {
                id: 514,
                ville: "Mahajanga",
                nom: "Cotton Club",
                type: "Sortir",
                lat: -15.7190,
                lng: 46.3160,
                prix: "Verre 20 000 Ar",
                prixEur: "4 €",
                prixNum: 20000,
                note: 4.5,
                description: "Une ambiance plus feutrée et jazzy pour des soirées élégantes. Situé près de la Rotonde, c'est un club un peu 'privé' où l'on vient discuter tranquillement autour d'un bon whisky ou d'un cocktail soigné.",
                image: "images/mahajanga/mahajanga_cotton_club_jazz_1765474031058.png",
                acces: "À côté de l'Hôtel de France",
                horaires: "20h-3h",
                conseil: "Parfait pour un dernier verre au calme après un repas en ville.",
                duree: "Soirée",
                siteWeb: ""
            }
        ];

        const PHRASES_DATA = {
            "Salutations & Politesse": [
                { fr: "Bonjour", mg: "Manao ahoana", phonetic: "man-ao a-ho-ana" },
                { fr: "Merci", mg: "Misaotra", phonetic: "mi-sao-tra" },
                { fr: "S'il vous plaît", mg: "Azafady", phonetic: "a-za-fa-dy" },
                { fr: "Excusez-moi", mg: "Miala tsiny", phonetic: "mi-a-la tsi-ny" },
                { fr: "Au revoir", mg: "Veloma", phonetic: "ve-lo-ma" },
                { fr: "Oui", mg: "Eny", phonetic: "e-ny" },
                { fr: "Non", mg: "Tsia", phonetic: "tsi-a" }
            ],
            "Se présenter": [
                { fr: "Je m'appelle...", mg: "[Nom] no anarako", phonetic: "[nom] no a-na-ra-ko" },
                { fr: "Je suis français(e)", mg: "Frantsay aho", phonetic: "fran-tsaï a-ho" },
                { fr: "Je ne parle pas malgache", mg: "Tsy mahay miteny malagasy aho", phonetic: "tsi ma-haï mi-te-ny ma-la-ga-sy a-ho" },
                { fr: "Je suis en vacances", mg: "Miala sasatra aho", phonetic: "mi-a-la sa-sa-tra a-ho" },
                { fr: "Enchanté(e)", mg: "Faly mahafantatra anao", phonetic: "fa-ly ma-ha-fan-ta-tra a-nao" }
            ],
            "Se déplacer": [
                { fr: "Où est la plage ?", mg: "Aiza ny moron-dranomasina ?", phonetic: "aï-za ni mo-ron-dra-no-ma-si-na" },
                { fr: "Combien pour Diego ?", mg: "Hoatrinona ny ho any Antsiranana ?", phonetic: "ho-a-tri-no-na ni ho a-ny an-tsi-ra-na-na" },
                { fr: "Je suis perdu(e)", mg: "Very làlana aho", phonetic: "ve-ry la-la-na a-ho" },
                { fr: "C'est loin ?", mg: "Lavitra ve ?", phonetic: "la-vi-tra ve" },
                { fr: "À droite", mg: "Havanana", phonetic: "ha-va-na-na" },
                { fr: "À gauche", mg: "Havia", phonetic: "hi-vi-a" },
                { fr: "Tout droit", mg: "Mahitsy", phonetic: "ma-hit-sy" },
                { fr: "Arrêtez ici", mg: "Mijanona eto", phonetic: "mi-ja-no-na e-to" }
            ],
            "Négocier & Acheter": [
                { fr: "Combien ça coûte ?", mg: "Ohatrinona ny vidiny ?", phonetic: "o-ha-tri-no-na ni vi-di-ny" },
                { fr: "C'est trop cher", mg: "Lafo be loatra izany", phonetic: "la-fo be lo-a-tra i-za-ny" },
                { fr: "Moins cher possible ?", mg: "Mora kokoa ve ?", phonetic: "mo-ra ko-ko-a ve" },
                { fr: "Je prends ça", mg: "Alako io", phonetic: "a-la-ko i-o" },
                { fr: "Vous acceptez les euros ?", mg: "Mandray euros ve ianao ?", phonetic: "man-draï e-u-ros ve i-a-nao" },
                { fr: "Pas de monnaie", mg: "Tsy misy vola madinika", phonetic: "tsi mi-sy vo-la ma-di-ni-ka" }
            ],
            "Restaurant": [
                { fr: "Une table pour deux", mg: "Latabatra roa azafady", phonetic: "la-ta-ba-tra ro-a a-za-fa-dy" },
                { fr: "Le menu s'il vous plaît", mg: "Ny menu azafady", phonetic: "ni me-nu a-za-fa-dy" },
                { fr: "L'addition", mg: "Ny faktiora", phonetic: "ni fak-ti-o-ra" },
                { fr: "C'était délicieux", mg: "Matsiro be", phonetic: "ma-tsi-ro be" },
                { fr: "Eau minérale", mg: "Rano mineraly", phonetic: "ra-no mi-ne-ra-ly" },
                { fr: "Sans piment", mg: "Tsy misy sakay", phonetic: "tsi mi-sy sa-kaï" },
                { fr: "Je suis végétarien(ne)", mg: "Tsy mihinana hena aho", phonetic: "tsi mi-hi-na-na he-na a-ho" }
            ],
            "Nombres": [
                { fr: "1", mg: "Iray", phonetic: "i-raï" },
                { fr: "2", mg: "Roa", phonetic: "ro-a" },
                { fr: "3", mg: "Telo", phonetic: "te-lo" },
                { fr: "4", mg: "Efatra", phonetic: "e-fa-tra" },
                { fr: "5", mg: "Dimy", phonetic: "di-my" },
                { fr: "10", mg: "Folo", phonetic: "fo-lo" },
                { fr: "100", mg: "Zato", phonetic: "za-to" },
                { fr: "1 000", mg: "Arivo", phonetic: "a-ri-vo" }
            ],
            "Urgence & Santé": [
                { fr: "Aidez-moi !", mg: "Vonjeo aho !", phonetic: "von-je-o a-ho" },
                { fr: "Mal à la tête", mg: "Marary ny lohako", phonetic: "ma-ra-ry ni lo-ha-ko" },
                { fr: "Où est la pharmacie ?", mg: "Aiza ny fivarotam-panafody ?", phonetic: "aï-za ni fi-va-ro-tam-fa-na-fo-dy" },
                { fr: "Hôpital", mg: "Hopitaly", phonetic: "ho-pi-ta-ly" },
                { fr: "J'ai besoin d'un docteur", mg: "Mila dokotera aho", phonetic: "mi-la do-ko-te-ra a-ho" },
                { fr: "Allergie", mg: "Alerizy", phonetic: "a-le-ri-zy" }
            ],
            "Hébergement & Météo": [
                { fr: "Hôtel", mg: "Hotely", phonetic: "ho-te-ly" },
                { fr: "Chambre", mg: "Efitrano", phonetic: "e-fi-tra-no" },
                { fr: "Il fait chaud", mg: "Mafana", phonetic: "ma-fa-na" },
                { fr: "Il pleut", mg: "Avy ny orana", phonetic: "a-vy ni o-ra-na" }
            ]
        };

        const CHECKLIST_ITEMS = [
            "SIM locale Telma",
            "Argent liquide (CB rare)",
            "Adaptateur prise C/E",
            "Crème solaire SPF50+",
            "Lampe frontale",
            "Carnet + stylo",
            "Powerbank 20 000 mAh",
            "Sac étanche",
            "Répulsif anti-moustiques",
            "Trousse premiers secours"
        ];

        // ============================================
        // VARIABLES GLOBALES
        // ============================================

        let map;
        let markersLayer;
        let currentTheme = localStorage.getItem('theme') || 'light';
        let exchangeRate = parseFloat(localStorage.getItem('exchangeRate')) || 4250;
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let checklist = JSON.parse(localStorage.getItem('checklist')) || [];
        let deferredPrompt;

        // ============================================
        // INITIALISATION
        // ============================================

        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            initNavigation();
            initMap();
            initLanguePage();
            initOutilsPage();
            initCityPages();
            initSpotsPage();
            initModal();
            initInstallPrompt();
            registerServiceWorker();

            initGeolocation();
        });



        // ============================================
        // GEOLOCALISATION
        // ============================================
        function initGeolocation() {
            const btnLocate = document.getElementById('btnLocateMe');
            if (!btnLocate) return;

            btnLocate.addEventListener('click', () => {
                if ("geolocation" in navigator) {
                    btnLocate.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Localisation...';

                    navigator.geolocation.getCurrentPosition(position => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;

                        // Centrer la carte
                        map.setView([lat, lng], 13);

                        // Marqueur utilisateur
                        const userIcon = L.divIcon({
                            className: 'user-marker',
                            html: '<div style="background:#4285F4; width:16px; height:16px; border:3px solid white; border-radius:50%; box-shadow:0 0 10px rgba(0,0,0,0.3);"></div>',
                            iconSize: [20, 20],
                            iconAnchor: [10, 10]
                        });

                        L.marker([lat, lng], { icon: userIcon })
                            .addTo(map)
                            .bindPopup("Vous êtes ici !")
                            .openPopup();

                        btnLocate.innerHTML = '<i class="fas fa-check"></i> Trouvé !';
                        setTimeout(() => {
                            btnLocate.innerHTML = '<i class="fas fa-location-crosshairs"></i> Autour de moi';
                        }, 2000);

                    }, error => {
                        alert("Erreur de localisation : " + error.message);
                        btnLocate.innerHTML = '<i class="fas fa-location-crosshairs"></i> Autour de moi';
                    });
                } else {
                    alert("Votre navigateur ne supporte pas la géolocalisation.");
                }
            });
        }


        // ============================================
        // MAP FILTER LOGIC (SMART EXCLUSIVE)
        // ============================================

        const CITY_COORDINATES = {
            'antananarivo': [-18.8792, 47.5079, 12],
            'antsiranana': [-12.2797, 49.2917, 12],
            'mahajanga': [-15.7167, 46.3167, 12],
            'toamasina': [-18.1492, 49.4023, 12],
            'toliara': [-23.3500, 43.6667, 12],
            'fianarantsoa': [-21.4333, 47.0833, 12]
        };

        function toggleFilter(chip, type) {
            const isCity = ['antananarivo', 'antsiranana', 'mahajanga', 'toamasina', 'toliara', 'fianarantsoa'].includes(type);
            const isCategory = ['explorer', 'manger', 'dodo', 'sortir', 'spot', 'favorites'].includes(type);

            const checkbox = chip.querySelector('input[type="checkbox"]');
            if (!checkbox) return;

            // 1. SMART CITY LOGIC (Exclusive + Zoom)
            if (isCity) {
                // If clicking a city, uncheck all other cities first
                const allCities = ['antananarivo', 'antsiranana', 'mahajanga', 'toamasina', 'toliara', 'fianarantsoa'];
                allCities.forEach(c => {
                    if (c !== type) {
                        const otherCb = document.getElementById(`filter-${c}`);
                        const otherChip = otherCb ? otherCb.parentElement : null;
                        if (otherCb) {
                            otherCb.checked = false;
                            if (otherChip) otherChip.classList.remove('active');
                        }
                    }
                });

                // Toggle the clicked one
                checkbox.checked = !checkbox.checked;

                // Visual
                if (checkbox.checked) {
                    chip.classList.add('active');
                    // ZOOM TO CITY
                    if (CITY_COORDINATES[type] && map) {
                        map.setView([CITY_COORDINATES[type][0], CITY_COORDINATES[type][1]], CITY_COORDINATES[type][2]);
                    }
                } else {
                    chip.classList.remove('active');
                    if (map) map.setView([-18.766947, 46.869107], 6); // Back to Global
                }
            }

            // 2. SMART CATEGORY LOGIC (Exclusive)
            else if (isCategory) {

                // Uncheck all other categories
                const allCats = ['explorer', 'manger', 'dodo', 'sortir', 'spot', 'favorites'];
                allCats.forEach(c => {
                    if (c !== type) {
                        const otherCb = document.getElementById(`filter-${c}`);
                        const otherChip = otherCb ? otherCb.parentElement : null;
                        if (otherCb) {
                            otherCb.checked = false;
                            if (otherChip) otherChip.classList.remove('active');
                        }
                    }
                });

                // Force Check the clicked one (Exclusive Select)
                if (!checkbox.checked) {
                    checkbox.checked = true;
                    chip.classList.add('active');
                } else {
                    // If already checked, uncheck it -> Show Everything (Empty Filter = All)
                    checkbox.checked = false;
                    chip.classList.remove('active');
                }
            }

            // Update Map
            updateMapMarkers();
        }

        // ============================================
        // GESTION DES FAVORIS
        // ============================================
        function toggleLieuFavorite(id, btnElement, event) {
            if (event) event.stopPropagation(); // Avoid triggering card click
            const index = favorites.indexOf(id);

            if (index === -1) {
                favorites.push(id);
                btnElement.classList.add('active');
                btnElement.innerHTML = '<i class="fa-solid fa-bookmark"></i>';
                showToast("Ajouté aux favoris");
            } else {
                favorites.splice(index, 1);
                btnElement.classList.remove('active');
                btnElement.innerHTML = '<i class="fa-regular fa-bookmark"></i>';
                showToast("Retiré des favoris");
            }

            localStorage.setItem('favorites', JSON.stringify(favorites));
            updateMapMarkers(); // Refresh map to show/hide hearts if needed
        }

        function isFavorite(id) {
            return favorites.includes(id);
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'install-prompt active'; // Reuse existing style
            toast.style.background = 'rgba(0,0,0,0.8)';
            toast.innerHTML = `<span>${message}</span>`;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 2000);
        }

        // ============================================
        // THÈME
        // ============================================

        function initTheme() {
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeToggle();

            const toggleBtn = document.getElementById('themeToggle');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    currentTheme = currentTheme === 'light' ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', currentTheme);
                    localStorage.setItem('theme', currentTheme);
                    updateThemeToggle();
                });
            }
        }

        function updateThemeToggle() {
            const toggle = document.getElementById('themeToggle');
            toggle.textContent = currentTheme === 'light' ? '☀️' : '🌙';
        }

        // ============================================
        // NAVIGATION
        // ============================================

        function initNavigation() {
            const navBtns = document.querySelectorAll('.nav-btn');
            const shortcuts = document.querySelectorAll('.shortcut-card');

            navBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const page = btn.dataset.page;
                    navigateToPage(page);
                });
            });

            shortcuts.forEach(card => {
                card.addEventListener('click', () => {
                    const page = card.dataset.goto;
                    navigateToPage(page);
                });
            });
        }

        function navigateToPage(pageName) {
            console.log('Navigating to:', pageName);

            // 1. Cacher toutes les sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
                section.style.display = 'none'; // Force hide
            });

            // 2. Retirer active de tous les boutons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // 3. Afficher la section demandée
            const targetSection = document.getElementById(`page-${pageName}`);
            if (targetSection) {
                targetSection.classList.add('active');
                targetSection.style.display = 'block'; // Force show

                // Hack: Si c'est la carte, forcer le resize pour éviter le gris
                if (pageName === 'carte' && window.map) {
                    setTimeout(() => {
                        window.map.invalidateSize();
                    }, 100);
                }
            } else {
                console.error('Section introuvable:', `page-${pageName}`);
            }

            // 4. Activer le bouton correspondant
            const activeBtn = document.querySelector(`.nav-btn[data-page="${pageName}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }

            // 5. Scroll en haut
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ============================================
        // CARTE
        // ============================================

        function initMap() {
            map = L.map('map').setView([-18.8792, 47.5079], 6);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                maxZoom: 18
            }).addTo(map);

            markersLayer = L.markerClusterGroup({
                chunkedLoading: true,
                spiderfyOnMaxZoom: true,
                showCoverageOnHover: false,
                zoomToBoundsOnClick: true
            });

            updateMapMarkers();
            map.addLayer(markersLayer);

            // Filtres
            document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateMapMarkers);
            });
        }

        function updateMapMarkers() {
            markersLayer.clearLayers();

            const filters = getActiveFilters();
            const filteredLieux = LIEUX_DATA.filter(lieu => lieu.nom && matchesFilters(lieu, filters));

            filteredLieux.forEach(lieu => {
                const icon = L.divIcon({
                    className: 'custom-marker',
                    html: lieu.spotLocal ? '📍' : '📌',
                    iconSize: [32, 32]
                });

                const marker = L.marker([lieu.lat, lieu.lng], { icon });

                const popupContent = `
                    <div class="popup-wrapper">
                        <div class="popup-image-container" style="background-image: url('${lieu.image}');">
                             <button onclick="toggleLieuFavorite(${lieu.id}, this, event)" class="btn-favorite-popup-overlay ${isFavorite(lieu.id) ? 'active' : ''}">
                                ${isFavorite(lieu.id) ? '<i class="fa-solid fa-bookmark"></i>' : '<i class="fa-regular fa-bookmark"></i>'}
                            </button>
                            ${lieu.spotLocal ? '<div class="popup-type-badge" style="background:var(--laterite);">📍 Spot Local</div>' : `<div class="popup-type-badge">${lieu.type}</div>`}
                        </div>
                        <div class="popup-body">
                            <h3 class="popup-title">${lieu.nom}</h3>
                            <div class="popup-subtitle">
                                ${getVilleEmoji(lieu.ville)} ${lieu.ville}
                            </div>
                            
                            <div class="popup-meta">
                                <div class="popup-price">${lieu.prixEur}</div>
                                <div class="popup-rating"><i class="fas fa-star"></i> ${lieu.note}</div>
                            </div>
                            
                            <button onclick="showLieuDetailsByID(${lieu.id})" class="btn-popup-details">
                                Voir détails <i class="fas fa-arrow-right" style="margin-left:6px; font-size:0.8em;"></i>
                            </button>
                        </div>
                    </div>
                `;

                marker.bindPopup(popupContent);
                // marker.on('click', () => showLieuDetails(lieu)); // Disabled to prioritize popup

                markersLayer.addLayer(marker);
            });
        }

        /* ============================================
           MAPPING / FILTERS LOGIC
           ============================================ */

        function toggleFilter(element, filterId) {
            const checkbox = document.getElementById('filter-' + filterId);
            if (checkbox) {
                // Si on a cliqué sur le chip (et pas directement la checkbox)
                if (event.target !== checkbox) {
                    checkbox.checked = !checkbox.checked;
                }

                // Update UI visually
                if (checkbox.checked) {
                    element.classList.add('active');
                } else {
                    element.classList.remove('active');
                }

                updateMapMarkers();
            }
        }

        function getActiveFilters() {
            const filters = {
                provinces: [],
                types: [],
                prix: [],
                favorites: false
            };

            const fav = document.getElementById('filter-favorites');
            if (fav && fav.checked) filters.favorites = true;

            const provinceIds = ['antananarivo', 'antsiranana', 'mahajanga', 'toamasina', 'toliara', 'fianarantsoa'];
            provinceIds.forEach(pid => {
                const cb = document.getElementById(`filter-${pid}`);
                if (cb && cb.checked) {
                    const pNameMap = {
                        'antananarivo': 'Antananarivo',
                        'antsiranana': 'Antsiranana',
                        'mahajanga': 'Mahajanga',
                        'toamasina': 'Toamasina',
                        'toliara': 'Toliara',
                        'fianarantsoa': 'Fianarantsoa'
                    };
                    filters.provinces.push(pNameMap[pid]);
                }
            });

            // NEW CATEGORY LOGIC (HARMONIZED)
            const typeIds = ['explorer', 'manger', 'dodo', 'sortir', 'spot'];
            typeIds.forEach(t => {
                const cb = document.getElementById(`filter-${t}`);
                if (cb && cb.checked) {
                    if (t === 'explorer') {
                        filters.types.push('Incontournable', 'Nature', 'Culture');
                    } else if (t === 'manger') {
                        filters.types.push('Restaurant');
                    } else if (t === 'dodo') {
                        filters.types.push('Hotel', 'Hôtel');
                    } else if (t === 'sortir') {
                        filters.types.push('Sortir', 'Bar', 'Boîte de nuit', 'Club');
                    } else if (t === 'spot') {
                        filters.types.push('Spot Local');
                    }
                }
            });

            // OLD LOGIC SUPPORT (Fallback if needed, or simple cleanup)
            // Added check for old IDs just in case, but standardizing on new ones is better.

            const prix = ['gratuit', 'economique', 'moyen'];
            prix.forEach(p => {
                const cb = document.getElementById(`filter-${p}`);
                if (cb && cb.checked) filters.prix.push(p);
            });

            return filters;
        }

        function matchesFilters(lieu, filters) {
            if (filters.favorites && !isFavorite(lieu.id)) return false;

            const lieuProvince = getProvinceForVille(lieu.ville);
            if (filters.provinces.length > 0 && !filters.provinces.includes(lieuProvince)) return false;

            if (filters.types.length > 0) {
                // If filters.types contains 'Spot Local', we must handle the boolean flag
                const lookingForSpot = filters.types.includes('Spot Local');

                // General Type Match
                const typeMatch = filters.types.includes(lieu.type);

                // Specific Spot Match (Boolean or String)
                const spotMatch = lookingForSpot && (lieu.spotLocal === true || lieu.type === 'Spot Local');

                if (!typeMatch && !spotMatch) {
                    return false;
                }
            }

            if (filters.prix.length > 0) {
                let prixCat = 'moyen';
                if (lieu.prixNum === 0) prixCat = 'gratuit';
                else if (lieu.prixNum < 50000) prixCat = 'economique';

                if (!filters.prix.includes(prixCat)) return false;
            }

            return true;
        }

        // ============================================
        // PAGES VILLES
        // ============================================

        /* ============================================
           PAGES PROVINCES (GÉNÉRATION DYNAMIQUE)
           ============================================ */

        // Mapping Villes -> Provinces
        const COMMUNE_MAPPING = {
            'Antananarivo': 'Antananarivo',
            'Ampefy': 'Antananarivo',
            'Antsirabe': 'Antananarivo',
            'Diego-Suarez': 'Antsiranana',
            'Nosy Be': 'Antsiranana',
            'Ankarana': 'Antsiranana',
            'Ambanja': 'Antsiranana',
            'Montagne d\'Ambre': 'Antsiranana',
            'Anivorano': 'Antsiranana',
            'Mahajanga': 'Mahajanga',
            'Andasibe': 'Toamasina',
            'Mananara': 'Toamasina',
            'Sainte-Marie': 'Toamasina',
            'Isalo': 'Toliara',
            'Ifaty': 'Toliara',
            'Anakao': 'Toliara',
            'Tuléar': 'Toliara',
            'Toliara': 'Toliara',
            'Fianarantsoa': 'Fianarantsoa'
        };

        const PROVINCE_CONFIG = {
            'Antananarivo': { emoji: '<i class="fa-solid fa-landmark"></i>', name: 'Antananarivo', desc: 'La capitale et les hautes terres' },
            'Antsiranana': { emoji: '<i class="fa-solid fa-anchor"></i>', name: 'Antsiranana (Nord)', desc: 'Diego, Nosy Be et merveilles du Nord' },
            'Fianarantsoa': { emoji: '<i class="fa-solid fa-train"></i>', name: 'Fianarantsoa', desc: 'Le sud des hautes terres et le train' },
            'Mahajanga': { emoji: '<i class="fa-solid fa-umbrella-beach"></i>', name: 'Mahajanga (Ouest)', desc: 'Boeny, baobabs et grottes' },
            'Toamasina': { emoji: '<i class="fa-solid fa-ship"></i>', name: 'Toamasina (Est)', desc: 'L\'Est sauvage, l\'Indri et les lagons' },
            'Toliara': { emoji: '<i class="fa-solid fa-sun"></i>', name: 'Toliara (Sud)', desc: 'Le grand Sud, le désert et le lagon' }
        };

        function getProvinceForVille(villeName) {
            return COMMUNE_MAPPING[villeName] || 'Autre';
        }

        function initCityPages() {
            // Group data by Province
            const locationsByProvince = {};

            Object.keys(PROVINCE_CONFIG).forEach(p => locationsByProvince[p] = []);

            LIEUX_DATA.forEach(lieu => {
                const prov = getProvinceForVille(lieu.ville);
                if (locationsByProvince[prov]) {
                    locationsByProvince[prov].push(lieu);
                }
            });

            // Generate Content for each Province
            Object.keys(locationsByProvince).forEach(provinceKey => {
                const container = document.getElementById(`page-${provinceKey.toLowerCase()}`);
                if (!container) return;

                const config = PROVINCE_CONFIG[provinceKey];
                const lieux = locationsByProvince[provinceKey];

                let cityFiltersHTML = '';
                let defaultCityState = 'all';

                // PREMIUM SWITCHER FOR ANTSIRANANA
                if (provinceKey === 'Antsiranana') {
                    defaultCityState = 'Diego-Suarez'; // Force default to Diego
                    cityFiltersHTML = `
                        <div class="segmented-control-container">
                            <div class="segmented-control">
                                <button class="segment-btn active" onclick="filterCity('Diego-Suarez', this)">
                                    Diego-Suarez
                                </button>
                                <button class="segment-btn" onclick="filterCity('Nosy Be', this)">
                                    Nosy Be
                                </button>
                            </div>
                        </div>
                    `;
                }

                let html = `
                    <div class="city-header">
                        <h2 class="city-title">${config.emoji} ${config.name}</h2>
                        <p class="city-desc">${config.desc}</p>
                    </div>
                    
                    ${cityFiltersHTML}

                    <div class="nav-pills" style="margin-bottom: 20px; overflow-x: auto; white-space: nowrap; padding-bottom: 5px;">
                        <button class="nav-pill active" onclick="filterProvinceItems('all', '${provinceKey}', this)"><i class="fa-solid fa-layer-group"></i> Tout</button>
                        <button class="nav-pill" onclick="filterProvinceItems('explorer', '${provinceKey}', this)"><i class="fa-solid fa-binoculars"></i> Explorer</button>
                        <button class="nav-pill" onclick="filterProvinceItems('manger', '${provinceKey}', this)"><i class="fa-solid fa-utensils"></i> Manger</button>
                        <button class="nav-pill" onclick="filterProvinceItems('dodo', '${provinceKey}', this)"><i class="fa-solid fa-bed"></i> Dormir</button>
                        <button class="nav-pill" onclick="filterProvinceItems('sortir', '${provinceKey}', this)"><i class="fa-solid fa-martini-glass-citrus"></i> Sortir</button>
                        <button class="nav-pill" onclick="filterProvinceItems('spot', '${provinceKey}', this)"><i class="fa-solid fa-map-pin"></i> Spots</button>
                    </div>

                    <div class="lieux-grid" id="grid-${provinceKey}" data-current-city="${defaultCityState}">
                `;

                if (lieux.length === 0) {
                    html += `<p style="text-align:center; color:var(--text-secondary); grid-column:1/-1;">Aucun lieu pour le moment.</p>`;
                } else {
                    lieux.forEach(lieu => {
                        html += createLieuCard(lieu);
                    });
                }

                html += `</div>`;
                container.innerHTML = html;
            });
        }

        window.filterProvinceItems = function (category, provinceKey, btn) {
            const container = document.getElementById(`page-${provinceKey.toLowerCase()}`);
            if (!container) return;

            container.querySelectorAll('.nav-pill').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            const grid = document.getElementById(`grid-${provinceKey}`);

            // 1. Get current city context (if any)
            let currentCity = 'all';
            if (grid.dataset.currentCity) {
                currentCity = grid.dataset.currentCity;
            }

            // 2. Filter by Province
            let provinceLieux = LIEUX_DATA.filter(l => getProvinceForVille(l.ville) === provinceKey);

            // 3. Filter by City (Strict Mode)
            if (currentCity !== 'all') {
                provinceLieux = provinceLieux.filter(l => l.ville === currentCity);
            }

            let filtered = [];
            if (category === 'all') {
                filtered = provinceLieux;
            } else if (category === 'explorer') {
                filtered = provinceLieux.filter(l => ['Incontournable', 'Nature', 'Culture'].includes(l.type));
            } else if (category === 'manger') {
                filtered = provinceLieux.filter(l => l.type === 'Restaurant');
            } else if (category === 'dodo') {
                filtered = provinceLieux.filter(l => ['Hotel', 'Hôtel'].includes(l.type));
            } else if (category === 'sortir') {
                filtered = provinceLieux.filter(l => ['Bar', 'Boîte de nuit', 'Sortir', 'Club'].includes(l.type));
            } else if (category === 'spot') {
                filtered = provinceLieux.filter(l => l.spotLocal === true || l.type === 'Spot Local');
            }

            if (filtered.length === 0) {
                grid.innerHTML = `<p style="text-align:center; color:var(--text-secondary); grid-column:1/-1;">Aucun lieu trouvé pour ce filtre.</p>`;
            } else {
                grid.innerHTML = filtered.map(l => createLieuCard(l)).join('');
            }
        };

        window.filterCity = function (city, btn) {
            // Update buttons style (Premium Segmented Control Logic)
            const container = btn.parentElement;
            container.querySelectorAll('.segment-btn').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');

            // Update Grid Data Attribute
            const grid = document.getElementById('grid-Antsiranana');
            if (grid) {
                grid.dataset.currentCity = city;
                // Re-trigger current category filter to apply city context
                const activeCategoryBtn = grid.parentElement.querySelector('.nav-pill.active');
                if (activeCategoryBtn) activeCategoryBtn.click();
            }
        };

        // Old filter function removed
        window.filterCityItems = function () { }; // No-op


        // ============================================
        // MODAL DETAILS LOGIC
        // ============================================

        window.showLieuDetailsByID = function (id) {
            const lieu = LIEUX_DATA.find(l => l.id == id);
            if (lieu) {
                showLieuDetails(lieu);
            } else {
                console.error('Lieu introuvable ID:', id);
            }
        };

        window.showLieuDetails = function (lieu) {
            const modal = document.getElementById('lieuModal');
            if (!modal) return;

            // Populate Modal
            document.getElementById('modal-image').src = lieu.image || 'images/placeholders/default.jpg';
            document.getElementById('modal-type').textContent = lieu.type;

            // Spot Local Badge Logic
            const badgeType = document.getElementById('modal-type');
            if (lieu.spotLocal) {
                badgeType.style.background = 'var(--laterite)';
                badgeType.textContent = 'Spot Local 📍';
            } else {
                badgeType.style.background = 'rgba(0,0,0,0.7)';
                badgeType.textContent = lieu.type;
            }

            document.getElementById('modal-title').textContent = lieu.nom;
            document.getElementById('modal-desc').innerHTML = lieu.description; // Allow HTML in desc

            // Meta Info
            document.getElementById('modal-price').textContent = lieu.prix;
            document.getElementById('modal-duration').textContent = lieu.duree || 'Durée libre';
            document.getElementById('modal-access').textContent = lieu.acces || 'Accès standard';

            // Advice Section
            const adviceSection = document.getElementById('modal-advice-section');
            if (lieu.conseil) {
                adviceSection.style.display = 'block';
                document.getElementById('modal-advice').textContent = lieu.conseil;
            } else {
                adviceSection.style.display = 'none';
            }

            // External Link
            const linkBtn = document.getElementById('modal-link-btn');
            if (lieu.siteWeb) {
                linkBtn.style.display = 'inline-flex';
                linkBtn.onclick = () => window.open(lieu.siteWeb, '_blank');
            } else {
                linkBtn.style.display = 'none';
            }

            // Open Modal
            modal.style.display = 'block';

            // Close Handler
            const closeBtn = modal.querySelector('.close-modal');
            closeBtn.onclick = () => {
                modal.style.display = 'none';
            };

            // Click outside to close
            window.onclick = (event) => {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            };
        };

        function getVilleEmoji(ville) {
            const emojis = {
                'Antananarivo': '🏛️',
                'Diego-Suarez': '🏝️',
                'Nosy Be': '🌴',
                'Mahajanga': '🌊',
                'Andasibe': '🌿',
                'Isalo': '🏜️',
                'Ifaty': '🏖️',
                'Ankarana': '🕳️',
                'Mananara': '🐊'
            };
            return emojis[ville] || '📍';
        }

        function createLieuCard(lieu, category = '') {
            const prixClass = lieu.prixNum === 0 ? 'gratuit' : lieu.prixNum < 10000 ? 'abordable' : 'premium';

            return `
                <article class="lieu-card" data-id="${lieu.id}" data-category="${category}" style="position: relative; cursor: pointer;">
                    <button onclick="toggleLieuFavorite(${lieu.id}, this, event)" class="btn-favorite ${isFavorite(lieu.id) ? 'active' : ''}">
                        ${isFavorite(lieu.id) ? '<i class="fa-solid fa-bookmark"></i>' : '<i class="fa-regular fa-bookmark"></i>'}
                    </button>
                    <img src="${lieu.image}" alt="${lieu.nom}" class="lieu-image" loading="lazy">
                    <div class="lieu-content">
                        <div class="lieu-header">
                            <h3 class="lieu-title">${lieu.nom}</h3>
                            ${lieu.spotLocal ? '<span class="badge-spot">📍 Spot Local</span>' : `<span class="badge-type">${lieu.type}</span>`}
                        </div>
                        <div class="lieu-meta">
                            <span class="lieu-prix ${prixClass}">${lieu.prix}</span>
                            <span class="lieu-note">⭐ ${lieu.note}</span>
                        </div>
                        <p class="lieu-desc">${lieu.description}</p>
                        <button class="btn-details" data-lieu-id="${lieu.id}">Voir détails</button>
                    </div>
                </article>
            `;
        }

        // ============================================
        // PAGE SPOTS LOCAUX
        // ============================================

        function initSpotsPage() {
            const spotsContainer = document.getElementById('spotsContainer');
            const spots = LIEUX_DATA.filter(l => l.spotLocal && l.nom);

            spotsContainer.innerHTML = spots.map(lieu => createLieuCard(lieu)).join('');

            spotsContainer.querySelectorAll('.btn-details').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const lieuId = parseInt(e.target.dataset.lieuId);
                    const lieu = LIEUX_DATA.find(l => l.id === lieuId);
                    if (lieu) showLieuDetails(lieu);
                });
            });
        }

        // ============================================
        // MODAL
        // ============================================

        function initModal() {
            const modal = document.getElementById('modal');
            const closeBtn = document.getElementById('modalClose');

            closeBtn.addEventListener('click', () => {
                modal.classList.remove('active');
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
            // Event Delegation pour ouvrir la modale au clic sur une carte
            document.addEventListener('click', (e) => {
                // Ignorer si on clique sur le bouton favori
                if (e.target.closest('.btn-favorite')) return;

                const card = e.target.closest('.lieu-card');
                // Gestion aussi du clic sur le bouton "Voir détails" spécifique
                const btnDetails = e.target.closest('.btn-details');

                if (card || btnDetails) {
                    const target = card || btnDetails.closest('.lieu-card');
                    if (target) {
                        const id = parseInt(target.dataset.id);
                        if (!isNaN(id)) openModal(id);
                    }
                }
            });
        }

        function openModal(id) {
            const lieu = LIEUX_DATA.find(l => l.id === id);
            if (!lieu) return;

            const modal = document.getElementById('modal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalBadges = document.getElementById('modalBadges');
            const modalInfoGrid = document.getElementById('modalInfoGrid');
            const modalSections = document.getElementById('modalSections');

            // Reset Scroll
            if (modal.querySelector('.popup-content')) modal.querySelector('.popup-content').scrollTop = 0;

            modalImage.src = lieu.image;
            modalImage.alt = lieu.nom;
            modalTitle.textContent = lieu.nom;

            // Badges
            let badgesHTML = '';
            if (lieu.spotLocal) {
                badgesHTML += '<span class="badge-spot">📍 Spot Local</span> ';
            }
            badgesHTML += `<span class="badge-type">${lieu.type}</span>`;
            modalBadges.innerHTML = badgesHTML;

            // Infos grille
            modalInfoGrid.innerHTML = `
                <div class="modal-info-item">
                    <div class="modal-info-label">Ville</div>
                    <div class="modal-info-value">${lieu.ville}</div>
                </div>
                <div class="modal-info-item">
                    <div class="modal-info-label">Prix</div>
                    <div class="modal-info-value">${lieu.prix}</div>
                </div>
                <div class="modal-info-item">
                    <div class="modal-info-label">Note</div>
                    <div class="modal-info-value">⭐ ${lieu.note}</div>
                </div>
                ${lieu.duree ? `
                <div class="modal-info-item">
                    <div class="modal-info-label">Durée</div>
                    <div class="modal-info-value">⏱️ ${lieu.duree}</div>
                </div>` : ''}
            `;

            // Sections
            let sectionsHTML = `
                <div class="modal-section">
                    <div class="modal-section-title">Description</div>
                    <div class="modal-section-content" style="line-height: 1.6;">${lieu.description}</div>
                </div>
                ${lieu.conseil ? `
                <div class="modal-section" style="background: rgba(255, 215, 0, 0.1); border-left: 3px solid #FFD700; padding: 10px;">
                    <div class="modal-section-title" style="color: #FFD700;">💡 Conseil du Local</div>
                    <div class="modal-section-content">${lieu.conseil}</div>
                </div>` : ''}
                <div class="modal-section">
                    <div class="modal-section-title">Accès</div>
                    <div class="modal-section-content">${lieu.acces}</div>
                </div>
                ${lieu.siteWeb ? `<a href="${lieu.siteWeb}" target="_blank" class="btn-website">🌍 Visiter le site web</a>` : ''}
            `;

            if (lieu.horaires) {
                sectionsHTML += `
                    <div class="modal-section">
                        <div class="modal-section-title">Horaires</div>
                        <div class="modal-section-content">${lieu.horaires}</div>
                    </div>
                `;
            }

            if (lieu.contactLocal) {
                sectionsHTML += `
                    <div class="modal-section">
                        <div class="modal-section-title">Contact Local</div>
                        <div class="modal-section-content">${lieu.contactLocal}</div>
                    </div>
                `;
            }

            if (lieu.respect) {
                sectionsHTML += `
                    <div class="modal-section">
                        <div class="modal-section-title">⚠️ Respect Requis</div>
                        <div class="modal-section-content">${lieu.respect}</div>
                    </div>
                `;
            }

            modalSections.innerHTML = sectionsHTML;

            // Gestion du bouton favori dans la modale
            const favBtn = document.querySelector('.btn-favorite-popup-overlay');
            if (favBtn) {
                favBtn.classList.remove('active');
                favBtn.innerHTML = '<i class="fa-regular fa-bookmark"></i>';

                if (isFavorite(lieu.id)) {
                    favBtn.classList.add('active');
                    favBtn.innerHTML = '<i class="fa-solid fa-bookmark"></i>';
                }

                // Recreation du bouton pour clean les listeners
                const newFavBtn = favBtn.cloneNode(true);
                favBtn.parentNode.replaceChild(newFavBtn, favBtn);
                newFavBtn.onclick = (e) => toggleLieuFavorite(lieu.id, newFavBtn, e);
            }

            modal.classList.add('active');
        }

        // ============================================
        // PAGE LANGUE
        // ============================================

        function initLanguePage() {
            const container = document.getElementById('accordionContainer');
            const searchInput = document.getElementById('langueSearch');

            Object.keys(PHRASES_DATA).forEach((category, index) => {
                const accordionHTML = createAccordion(category, PHRASES_DATA[category], index);
                container.insertAdjacentHTML('beforeend', accordionHTML);
            });

            // Event listeners accordéons
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const item = header.parentElement;
                    const wasOpen = item.classList.contains('open');

                    // Fermer tous
                    document.querySelectorAll('.accordion-item').forEach(i => i.classList.remove('open'));

                    // Ouvrir celui-ci si fermé
                    if (!wasOpen) {
                        item.classList.add('open');
                    }
                });
            });

            // Recherche
            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                document.querySelectorAll('.phrase-item').forEach(item => {
                    const fr = item.querySelector('.phrase-fr').textContent.toLowerCase();
                    const mg = item.querySelector('.phrase-mg').textContent.toLowerCase();
                    if (fr.includes(query) || mg.includes(query)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });

            // Boutons actions phrases
            container.addEventListener('click', (e) => {
                if (e.target.classList.contains('btn-audio')) {
                    playAudio(e.target.dataset.mg, e.target.dataset.fr);
                } else if (e.target.classList.contains('btn-copy')) {
                    copyToClipboard(e.target.dataset.text);
                } else if (e.target.classList.contains('btn-favorite')) {
                    toggleExpressionFavorite(e.target);
                }
            });
        }

        function createAccordion(category, phrases, index) {
            const phrasesHTML = phrases.map((phrase, i) => `
                <div class="phrase-item">
                    <div class="phrase-content">
                        <div class="phrase-fr">${phrase.fr}</div>
                        <div class="phrase-mg">${phrase.mg}</div>
                        <div class="phrase-phonetic">(${phrase.phonetic})</div>
                    </div>
                    <div class="phrase-actions">
                        <button class="btn-icon btn-audio" data-mg="${phrase.mg}" data-fr="${phrase.fr}" title="Écouter">🔊</button>
                        <button class="btn-icon btn-copy" data-text="${phrase.mg}" title="Copier">📋</button>
                        <button class="btn-icon btn-favorite ${favorites.includes(`${category}-${i}`) ? 'active' : ''}" data-category="${category}" data-index="${i}" title="Favori">⭐</button>
                    </div>
                </div>
            `).join('');

            return `
                <div class="accordion-item ${index === 0 ? 'open' : ''}">
                    <div class="accordion-header">
                        <h3 class="accordion-title">
                            ${getCategoryEmoji(category)} ${category}
                        </h3>
                        <span class="accordion-icon">▼</span>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            ${phrasesHTML}
                        </div>
                    </div>
                </div>
            `;
        }

        function getCategoryEmoji(category) {
            const emojis = {
                "Salutations & Politesse": "👋",
                "Se présenter": "🙋",
                "Se déplacer": "🚶",
                "Négocier & Acheter": "💰",
                "Restaurant": "🍽️",
                "Nombres": "🔢",
                "Urgence & Santé": "🚨",
                "Hébergement & Météo": "hotel"
            };
            return emojis[category] || "💬";
        }

        function playAudio(textMg, textFr) {
            // Tentative de lecture du fichier audio généré
            if (textFr) {
                const filename = slugify(textFr) + '.wav';
                const audio = new Audio('audio/' + filename);

                audio.play().catch(err => {
                    console.warn('Fichier audio introuvable, fallback sur TTS', err);
                    speakFallback(textMg);
                });
            } else {
                speakFallback(textMg);
            }
        }

        function speakFallback(text) {
            // Simulation audio (Speech Synthesis API)
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'mg-MG'; // Peu de support navigateur mais mieux que rien
            utterance.rate = 0.8;
            window.speechSynthesis.speak(utterance);
        }

        function slugify(text) {
            return text
                .toString()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '')
                .toLowerCase()
                .trim()
                .replace(/[^\w\s-]/g, '')
                .replace(/[\s_-]+/g, '-')
                .replace(/^-+|-+$/g, '');
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Feedback visuel
                alert('Copié dans le presse-papiers !');
            });
        }

        function toggleExpressionFavorite(btn) {
            const key = `${btn.dataset.category}-${btn.dataset.index}`;
            const index = favorites.indexOf(key);

            if (index > -1) {
                favorites.splice(index, 1);
                btn.classList.remove('active');
            } else {
                favorites.push(key);
                btn.classList.add('active');
            }

            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        // ============================================
        // PAGE OUTILS
        // ============================================

        function initOutilsPage() {
            // --- CONVERTISSEUR AVANCÉ ---
            const state = {
                rates: JSON.parse(localStorage.getItem('currencyRates')) || { EUR: 4800, USD: 4500, GBP: 5700, CHF: 5000, ZAR: 250 },
                currency: localStorage.getItem('selectedCurrency') || 'EUR',
                mode: localStorage.getItem('converterMode') || 'AUTO', // 'AUTO' or 'MANUAL'
                lastUpdate: localStorage.getItem('ratesLastUpdate') || null,
                isInverted: false
            };

            const currencySymbols = { EUR: '€', USD: '$', GBP: '£', CHF: 'Fr', ZAR: 'R' };

            // Elements
            const selector = document.getElementById('currencySelector');
            const btnRefresh = document.getElementById('btnRefreshRate');
            const statusBadge = document.getElementById('converterStatus');
            const inputForeign = document.getElementById('inputForeign');
            const inputLocal = document.getElementById('inputLocal'); // Ar input
            const foreignLabel = document.getElementById('foreignLabel');
            const rateText = document.getElementById('rateText');
            const btnEdit = document.getElementById('btnEditRate');
            const btnInvert = document.getElementById('btnInvert');
            const container = document.getElementById('converterInputsContainer');
            const rowForeign = document.getElementById('rowForeign');
            const rowLocal = document.getElementById('rowLocal');

            // Init UI
            selector.value = state.currency;
            updateUI();

            // Auto-fetch if old data (> 24h) and online
            if (navigator.onLine && state.mode === 'AUTO') {
                const now = Date.now();
                if (!state.lastUpdate || (now - state.lastUpdate > 86400000)) {
                    fetchRates();
                }
            }

            // --- LISTENERS ---

            selector.addEventListener('change', (e) => {
                state.currency = e.target.value;
                localStorage.setItem('selectedCurrency', state.currency);
                updateUI();
                recalcFromForeign();
            });

            btnRefresh.addEventListener('click', () => {
                state.mode = 'AUTO';
                localStorage.setItem('converterMode', 'AUTO');
                fetchRates();
            });

            btnEdit.addEventListener('click', () => {
                const currentRate = state.rates[state.currency];
                const newRate = prompt(`Entrez votre taux manuel pour 1 ${state.currency} :`, currentRate);
                if (newRate && !isNaN(newRate)) {
                    state.rates[state.currency] = parseFloat(newRate);
                    state.mode = 'MANUAL';
                    saveState();
                    updateUI();
                    recalcFromForeign();
                }
            });

            btnInvert.addEventListener('click', () => {
                state.isInverted = !state.isInverted;
                // Swap DOM elements
                if (state.isInverted) {
                    container.insertBefore(rowLocal, rowForeign); // Ar on top
                    btnInvert.style.transform = "rotate(270deg)";
                } else {
                    container.insertBefore(rowForeign, rowLocal); // Foreign on top
                    btnInvert.style.transform = "rotate(90deg)";
                }
            });

            inputForeign.addEventListener('input', recalcFromForeign);
            inputLocal.addEventListener('input', recalcFromLocal);

            // --- FUNCTIONS ---

            function fetchRates() {
                btnRefresh.classList.add('fa-spin'); // Animation

                // API Gratuite (Open Exchange Rates fallback or similar free json)
                // Ici on utilise open.er-api.com qui est gratuit et stable
                fetch('https://open.er-api.com/v6/latest/EUR')
                    .then(res => res.json())
                    .then(data => {
                        if (data && data.rates && data.rates.MGA) {
                            const eurToMga = data.rates.MGA;

                            // Déduire les autres par cross-calculation si l'API est base EUR
                            // (ou fetcher chaque, mais cross-calc suffit pour estimation)
                            const rates = {
                                EUR: eurToMga,
                                USD: eurToMga / data.rates.USD,
                                GBP: eurToMga / data.rates.GBP,
                                CHF: eurToMga / data.rates.CHF,
                                ZAR: eurToMga / data.rates.ZAR
                            };

                            // Arrondir
                            Object.keys(rates).forEach(k => rates[k] = Math.round(rates[k]));

                            state.rates = rates;
                            state.lastUpdate = Date.now();
                            state.mode = 'AUTO';
                            saveState();
                            updateUI();
                            recalcFromForeign();

                            showToast('Taux mis à jour avec succès !');
                        }
                    })
                    .catch(err => {
                        console.error(err);
                        showToast('Erreur connexion. Vérifiez internet.');
                    })
                    .finally(() => {
                        btnRefresh.classList.remove('fa-spin');
                    });
            }

            function updateUI() {
                const rate = Math.round(state.rates[state.currency]);
                const symbol = currencySymbols[state.currency];

                foreignLabel.textContent = symbol;
                rateText.textContent = `1 ${symbol} = ${rate} Ar`;

                // Afficher date maj
                if (state.lastUpdate) {
                    const date = new Date(parseInt(state.lastUpdate));
                    const dateStr = `${date.getDate()}/${date.getMonth() + 1} ${date.getHours()}h${date.getMinutes().toString().padStart(2, '0')}`;
                    rateText.textContent += ` (Maj: ${dateStr})`;
                }

                if (state.mode === 'AUTO') {
                    statusBadge.textContent = "🟢 Taux Réel";
                    statusBadge.className = "status-badge live";
                    statusBadge.title = "Taux officiel via internet";
                } else {
                    statusBadge.textContent = "🔴 Mode Manuel";
                    statusBadge.className = "status-badge manual";
                    statusBadge.title = "Taux défini par l'utilisateur";
                }
            }

            function recalcFromForeign() {
                const val = parseFloat(inputForeign.value) || 0;
                const rate = state.rates[state.currency];
                inputLocal.value = Math.round(val * rate);
            }

            function recalcFromLocal() {
                const val = parseFloat(inputLocal.value) || 0;
                const rate = state.rates[state.currency];
                inputForeign.value = (val / rate).toFixed(2);
            }

            function saveState() {
                localStorage.setItem('currencyRates', JSON.stringify(state.rates));
                localStorage.setItem('converterMode', state.mode);
                if (state.lastUpdate) localStorage.setItem('ratesLastUpdate', state.lastUpdate);
            }

            // --- CHECKLIST EXISTANTE (Code inchangé) ---
            const checklistContainer = document.getElementById('checklistContainer');

            CHECKLIST_ITEMS.forEach((item, index) => {
                const checked = checklist.includes(index);
                const html = `
                    <div class="checklist-item ${checked ? 'checked' : ''}" data-index="${index}">
                        <div class="checklist-checkbox"></div>
                        <span class="checklist-label">${item}</span>
                    </div>
                `;
                checklistContainer.insertAdjacentHTML('beforeend', html);
            });

            checklistContainer.addEventListener('click', (e) => {
                const item = e.target.closest('.checklist-item');
                if (!item) return;

                const index = parseInt(item.dataset.index);
                const checklistIndex = checklist.indexOf(index);

                if (checklistIndex > -1) {
                    checklist.splice(checklistIndex, 1);
                    item.classList.remove('checked');
                } else {
                    checklist.push(index);
                    item.classList.add('checked');
                }
                localStorage.setItem('checklist', JSON.stringify(checklist));
            });
        }

        // ============================================
        // PWA
        // ============================================

        function initInstallPrompt() {
            const installPrompt = document.getElementById('installPrompt');
            const installBtn = document.getElementById('installBtn');
            const installClose = document.getElementById('installClose');

            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                installPrompt.classList.add('active');
            });

            installBtn.addEventListener('click', async () => {
                if (!deferredPrompt) return;

                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;

                if (outcome === 'accepted') {
                    installPrompt.classList.remove('active');
                }

                deferredPrompt = null;
            });

            installClose.addEventListener('click', () => {
                installPrompt.classList.remove('active');
            });
        }

        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.error('Service Worker error:', err));
            }
        }


    </script>
</body>

</html>
```